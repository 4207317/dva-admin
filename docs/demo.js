webpackJsonp([7],{88:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=n(2),a=o(r),i=n(3),s=o(i),l=n(5),u=o(l),d=n(4),f=o(d),p=n(1),c=o(p),m=n(210),h=o(m),v=n(77),y=o(v),g=n(20),b=o(g),T=void 0,C=void 0,P=function(e){function t(){(0,s["default"])(this,t);var n=(0,u["default"])(this,e.apply(this,arguments));return n.handleCancel=function(e){var t=n.props.onCancel;t&&t(e)},n.handleOk=function(e){var t=n.props.onOk;t&&t(e)},n}return(0,f["default"])(t,e),t.prototype.componentDidMount=function(){C||((0,y["default"])(document.documentElement,"click",function(e){T={x:e.pageX,y:e.pageY},setTimeout(function(){return T=null},100)}),C=!0)},t.prototype.render=function(){var e=this.props,t=e.okText,n=e.cancelText,o=e.confirmLoading,r=e.footer,i=e.visible;this.context.antLocale&&this.context.antLocale.Modal&&(t=t||this.context.antLocale.Modal.okText,n=n||this.context.antLocale.Modal.cancelText);var s=[c["default"].createElement(b["default"],{key:"cancel",size:"large",onClick:this.handleCancel},n||"\u53d6\u6d88"),c["default"].createElement(b["default"],{key:"confirm",type:"primary",size:"large",loading:o,onClick:this.handleOk},t||"\u786e\u5b9a")];return c["default"].createElement(h["default"],(0,a["default"])({onClose:this.handleCancel,footer:r||s},this.props,{visible:i,mousePosition:T}))},t}(c["default"].Component);t["default"]=P,P.defaultProps={prefixCls:"ant-modal",width:520,transitionName:"zoom",maskTransitionName:"fade",confirmLoading:!1,visible:!1},P.propTypes={prefixCls:p.PropTypes.string,onOk:p.PropTypes.func,onCancel:p.PropTypes.func,okText:p.PropTypes.node,cancelText:p.PropTypes.node,width:p.PropTypes.oneOfType([p.PropTypes.number,p.PropTypes.string]),confirmLoading:p.PropTypes.bool,visible:p.PropTypes.bool,align:p.PropTypes.object,footer:p.PropTypes.node,title:p.PropTypes.node,closable:p.PropTypes.bool},P.contextTypes={antLocale:c["default"].PropTypes.object},e.exports=t["default"]},148:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(88),a=o(r),i=n(190),s=o(i),l=n(8),u=o(l);a["default"].info=function(e){var t=(0,u["default"])({},{type:"info",iconType:"info-circle",okCancel:!1},e);return(0,s["default"])(t)},a["default"].success=function(e){var t=(0,u["default"])({},{type:"success",iconType:"check-circle",okCancel:!1},e);return(0,s["default"])(t)},a["default"].error=function(e){var t=(0,u["default"])({},{type:"error",iconType:"cross-circle",okCancel:!1},e);return(0,s["default"])(t)},a["default"].warning=a["default"].warn=function(e){var t=(0,u["default"])({},{type:"warning",iconType:"exclamation-circle",okCancel:!1},e);return(0,s["default"])(t)},a["default"].confirm=function(e){var t=(0,u["default"])({},{type:"confirm",okCancel:!0},e);return(0,s["default"])(t)},t["default"]=a["default"],e.exports=t["default"]},149:function(e,t,n){"use strict";n(10),n(201),n(26)},189:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=n(3),a=o(r),i=n(5),s=o(i),l=n(4),u=o(l),d=n(1),f=o(d),p=n(9),c=o(p),m=n(20),h=o(m),v=function(e){function t(n){(0,a["default"])(this,t);var o=(0,s["default"])(this,e.call(this,n));return o.onClick=function(){var e=o.props,t=e.actionFn,n=e.closeModal;if(t){var r=void 0;t.length?r=t(n):(r=t(),r||n()),r&&r.then&&(o.setState({loading:!0}),r.then(function(){n.apply(void 0,arguments)}))}else n()},o.state={loading:!1},o}return(0,u["default"])(t,e),t.prototype.componentDidMount=function(){if(this.props.autoFocus){var e=c["default"].findDOMNode(this);this.timeoutId=setTimeout(function(){return e.focus()})}},t.prototype.componentWillUnmount=function(){clearTimeout(this.timeoutId)},t.prototype.render=function(){var e=this.props,t=e.type,n=e.children,o=this.state.loading;return f["default"].createElement(h["default"],{type:t,size:"large",onClick:this.onClick,loading:o},n)},t}(f["default"].Component);t["default"]=v,e.exports=t["default"]},190:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(){var e=d["default"].unmountComponentAtNode(r);e&&r.parentNode&&r.parentNode.removeChild(r)}var n=(0,m["default"])({iconType:"question-circle"},e),o=n.prefixCls||"ant-confirm",r=document.createElement("div");document.body.appendChild(r);var a=n.width||416,s=n.style||{},u=void 0!==n.maskClosable&&n.maskClosable;"okCancel"in n||(n.okCancel=!0);var f=(0,C.getConfirmLocale)();n.okText=n.okText||(n.okCancel?f.okText:f.justOkText),n.cancelText=n.cancelText||f.cancelText;var c=l["default"].createElement("div",{className:o+"-body"},l["default"].createElement(v["default"],{type:n.iconType}),l["default"].createElement("span",{className:o+"-title"},n.title),l["default"].createElement("div",{className:o+"-content"},n.content)),h=null;h=n.okCancel?l["default"].createElement("div",{className:o+"-btns"},l["default"].createElement(T["default"],{actionFn:n.onCancel,closeModal:t},n.cancelText),l["default"].createElement(T["default"],{type:"primary",actionFn:n.onOk,closeModal:t,autoFocus:!0},n.okText)):l["default"].createElement("div",{className:o+"-btns"},l["default"].createElement(T["default"],{type:"primary",actionFn:n.onOk,closeModal:t,autoFocus:!0},n.okText));var y=(0,p["default"])(o,(0,i["default"])({},o+"-"+n.type,!0),n.className);return d["default"].render(l["default"].createElement(g["default"],{className:y,onCancel:t,visible:!0,title:"",transitionName:"zoom",footer:"",maskTransitionName:"fade",maskClosable:u,style:s,width:a},l["default"].createElement("div",{className:o+"-body-wrapper"},c," ",h)),r),{destroy:t}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(7),i=o(a);t["default"]=r;var s=n(1),l=o(s),u=n(9),d=o(u),f=n(6),p=o(f),c=n(8),m=o(c),h=n(11),v=o(h),y=n(88),g=o(y),b=n(189),T=o(b),C=n(191);e.exports=t["default"]},191:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){u=e?(0,s["default"])({},u,e):(0,s["default"])({},l)}function a(){return u}Object.defineProperty(t,"__esModule",{value:!0}),t.changeConfirmLocale=r,t.getConfirmLocale=a;var i=n(8),s=o(i),l={okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",justOkText:"\u77e5\u9053\u4e86"},u=(0,s["default"])({},l)},193:[1216,202],201:10,202:10,209:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){}function a(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],o="scroll"+(t?"Top":"Left");if("number"!=typeof n){var r=e.document;n=r.documentElement[o],"number"!=typeof n&&(n=r.body[o])}return n}function i(e,t){var n=e.style;["Webkit","Moz","Ms","ms"].forEach(function(e){n[e+"TransformOrigin"]=t}),n.transformOrigin=t}function s(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},o=e.ownerDocument,r=o.defaultView||o.parentWindow;return n.left+=a(r),n.top+=a(r,!0),n}Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),u=o(l),d=n(9),f=o(d),p=n(212),c=o(p),m=n(56),h=o(m),v=n(211),y=o(v),g=n(214),b=o(g),T=n(8),C=o(T),P=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},k=0,w=0,E=u["default"].createClass({displayName:"Dialog",getDefaultProps:function(){return{afterClose:r,className:"",mask:!0,visible:!1,keyboard:!0,closable:!0,maskClosable:!0,prefixCls:"rc-dialog",onClose:r}},componentWillMount:function(){this.inTransition=!1,this.titleId="rcDialogTitle"+k++},componentDidMount:function(){this.componentDidUpdate({})},componentDidUpdate:function(e){var t=this.props,n=this.props.mousePosition;if(t.visible){if(!e.visible){this.openTime=Date.now(),this.lastOutSideFocusNode=document.activeElement,this.addScrollingEffect(),this.refs.wrap.focus();var o=f["default"].findDOMNode(this.refs.dialog);if(n){var r=s(o);i(o,n.x-r.left+"px "+(n.y-r.top)+"px")}else i(o,"")}}else if(e.visible&&(this.inTransition=!0,t.mask&&this.lastOutSideFocusNode)){try{this.lastOutSideFocusNode.focus()}catch(a){this.lastOutSideFocusNode=null}this.lastOutSideFocusNode=null}},componentWillUnmount:function(){(this.props.visible||this.inTransition)&&this.removeScrollingEffect()},onAnimateLeave:function(){this.refs.wrap&&(this.refs.wrap.style.display="none"),this.inTransition=!1,this.removeScrollingEffect(),this.props.afterClose()},onMaskClick:function(e){Date.now()-this.openTime<300||e.target===e.currentTarget&&this.close(e)},onKeyDown:function(e){var t=this.props;if(t.keyboard&&e.keyCode===c["default"].ESC&&this.close(e),t.visible&&e.keyCode===c["default"].TAB){var n=document.activeElement,o=this.refs.wrap,r=this.refs.sentinel;e.shiftKey?n===o&&r.focus():n===this.refs.sentinel&&o.focus()}},getDialogElement:function(){var e=this.props,t=e.closable,n=e.prefixCls,o={};void 0!==e.width&&(o.width=e.width),void 0!==e.height&&(o.height=e.height);var r=void 0;e.footer&&(r=u["default"].createElement("div",{className:n+"-footer",ref:"footer"},e.footer));var a=void 0;e.title&&(a=u["default"].createElement("div",{className:n+"-header",ref:"header"},u["default"].createElement("div",{className:n+"-title",id:this.titleId},e.title)));var i=void 0;t&&(i=u["default"].createElement("button",{onClick:this.close,"aria-label":"Close",className:n+"-close"},u["default"].createElement("span",{className:n+"-close-x"})));var s=(0,C["default"])({},e.style,o),l=this.getTransitionName(),d=u["default"].createElement(y["default"],{key:"dialog-element",role:"document",ref:"dialog",style:s,className:n+" "+(e.className||""),visible:e.visible},u["default"].createElement("div",{className:n+"-content"},i,a,u["default"].createElement("div",P({className:n+"-body",style:e.bodyStyle,ref:"body"},e.bodyProps),e.children),r),u["default"].createElement("div",{tabIndex:0,ref:"sentinel",style:{width:0,height:0,overflow:"hidden"}},"sentinel"));return u["default"].createElement(h["default"],{key:"dialog",showProp:"visible",onLeave:this.onAnimateLeave,transitionName:l,component:"",transitionAppear:!0},d)},getZIndexStyle:function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},getWrapStyle:function(){return(0,C["default"])({},this.getZIndexStyle(),this.props.wrapStyle)},getMaskStyle:function(){return(0,C["default"])({},this.getZIndexStyle(),this.props.maskStyle)},getMaskElement:function(){var e=this.props,t=void 0;if(e.mask){var n=this.getMaskTransitionName();t=u["default"].createElement(y["default"],P({style:this.getMaskStyle(),key:"mask",className:e.prefixCls+"-mask",hiddenClassName:e.prefixCls+"-mask-hidden",visible:e.visible},e.maskProps)),n&&(t=u["default"].createElement(h["default"],{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:n},t))}return t},getMaskTransitionName:function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t},getTransitionName:function(){var e=this.props,t=e.transitionName,n=e.animation;return!t&&n&&(t=e.prefixCls+"-"+n),t},getElement:function(e){return this.refs[e]},setScrollbar:function(){this.bodyIsOverflowing&&void 0!==this.scrollbarWidth&&(document.body.style.paddingRight=this.scrollbarWidth+"px")},addScrollingEffect:function(){w++,1===w&&(this.checkScrollbar(),this.setScrollbar(),document.body.style.overflow="hidden")},removeScrollingEffect:function(){w--,0===w&&(document.body.style.overflow="",this.resetScrollbar())},close:function(e){this.props.onClose(e)},checkScrollbar:function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.bodyIsOverflowing&&(this.scrollbarWidth=(0,b["default"])())},resetScrollbar:function(){document.body.style.paddingRight=""},adjustDialog:function(){if(this.refs.wrap&&void 0!==this.scrollbarWidth){var e=this.refs.wrap.scrollHeight>document.documentElement.clientHeight;this.refs.wrap.style.paddingLeft=(!this.bodyIsOverflowing&&e?this.scrollbarWidth:"")+"px",this.refs.wrap.style.paddingRight=(this.bodyIsOverflowing&&!e?this.scrollbarWidth:"")+"px"}},resetAdjustments:function(){this.refs.wrap&&(this.refs.wrap.style.paddingLeft=this.refs.wrap.style.paddingLeft="")},render:function(){var e=this.props,t=e.prefixCls,n=e.maskClosable,o=this.getWrapStyle();return e.visible&&(o.display=null),u["default"].createElement("div",null,this.getMaskElement(),u["default"].createElement("div",P({tabIndex:-1,onKeyDown:this.onKeyDown,className:t+"-wrap "+(e.wrapClassName||""),ref:"wrap",onClick:n?this.onMaskClick:void 0,role:"dialog","aria-labelledby":e.title?this.titleId:null,style:o},e.wrapProps),this.getDialogElement()))}});t["default"]=E,e.exports=t["default"]},210:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=o(r),i=n(209),s=o(i),l=n(213),u=o(l),d=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f=a["default"].createClass({displayName:"DialogWrap",mixins:[(0,u["default"])({isVisible:function(e){return e.props.visible},autoDestroy:!1,getComponent:function(e,t){return a["default"].createElement(s["default"],d({},e.props,t,{key:"dialog"}))}})],getDefaultProps:function(){return{visible:!1}},shouldComponentUpdate:function(e){var t=e.visible;return!(!this.props.visible&&!t)},componentWillUnmount:function(){this.props.visible?this.renderComponent({afterClose:this.removeContainer,onClose:function(){},visible:!1}):this.removeContainer()},getElement:function(e){return this._component.getElement(e)},render:function(){return null}});t["default"]=f,e.exports=t["default"]},211:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=o(r),i=n(8),s=o(i),l=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u=a["default"].createClass({displayName:"LazyRenderBox",shouldComponentUpdate:function(e){return!!e.hiddenClassName||!!e.visible},render:function(){var e=this.props.className;this.props.hiddenClassName&&!this.props.visible&&(e+=" "+this.props.hiddenClassName);var t=(0,s["default"])({},this.props);return delete t.hiddenClassName,delete t.visible,t.className=e,a["default"].createElement("div",l({},t))}});t["default"]=u,e.exports=t["default"]},212:297,213:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){var e=document.createElement("div");return document.body.appendChild(e),e}function a(e){function t(e,t,n){(!d||e._component||d(e))&&(e._container||(e._container=c(e)),l["default"].unstable_renderSubtreeIntoContainer(e,f(e,t),e._container,function(){e._component=this,n&&n.call(this)}))}function n(e){if(e._container){var t=e._container;l["default"].unmountComponentAtNode(t),t.parentNode.removeChild(t),e._container=null}}var o=e.autoMount,a=void 0===o||o,s=e.autoDestroy,u=void 0===s||s,d=e.isVisible,f=e.getComponent,p=e.getContainer,c=void 0===p?r:p,m=void 0;return a&&(m=i({},m,{componentDidMount:function(){t(this)},componentDidUpdate:function(){t(this)}})),a&&u||(m=i({},m,{renderComponent:function(e,n){t(this,e,n)}})),m=u?i({},m,{componentWillUnmount:function(){n(this)}}):i({},m,{removeContainer:function(){n(this)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t["default"]=a;var s=n(9),l=o(s);e.exports=t["default"]},214:function(e,t){"use strict";function n(e){if(e||void 0===o){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top=0,r.left=0,r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var a=t.offsetWidth;n.style.overflow="scroll";var i=t.offsetWidth;a===i&&(i=n.clientWidth),document.body.removeChild(n),o=a-i}return o}var o=void 0;e.exports=n},521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t["default"]={propTypes:{prefixCls:o.PropTypes.string,strokeWidth:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]),strokeColor:o.PropTypes.string,trailWidth:o.PropTypes.oneOfType([o.PropTypes.number,o.PropTypes.string]),trailColor:o.PropTypes.string,strokeLinecap:o.PropTypes.oneOf(["round","square"]),style:o.PropTypes.object,className:o.PropTypes.string},getDefaultProps:function(){return{prefixCls:"rc-progress",strokeWidth:1,strokeColor:"#2db7f5",trailWidth:1,trailColor:"#D9D9D9",strokeLinecap:"round",className:""}},componentDidUpdate:function(){var e=Date.now();this.path.style.transitionDuration="0.3s, 0.3s",this.prevTimeStamp&&e-this.prevTimeStamp<100&&(this.path.style.transitionDuration="0s, 0s"),this.prevTimeStamp=Date.now()}},e.exports=t["default"]},524:function(e,t){"use strict";function n(){return"rc-upload-"+o+"-"+ ++r}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n;var o=+new Date,r=0;e.exports=t["default"]},613:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(614),a=o(r);t["default"]=a["default"],e.exports=t["default"]},614:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=n(2),a=o(r),i=n(7),s=o(i),l=n(3),u=o(l),d=n(5),f=o(d),p=n(4),c=o(p),m=n(1),h=o(m),v=n(11),y=o(v),g=n(1050),b=n(6),T=o(b),C=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]]);return n},P={normal:"#108ee9",exception:"#ff5500",success:"#87d068"},k=function(e){function t(){return(0,u["default"])(this,t),(0,f["default"])(this,e.apply(this,arguments))}return(0,c["default"])(t,e),t.prototype.render=function(){var e,t=this.props,n=t.prefixCls,o=t.className,r=t.percent,i=void 0===r?0:r,l=t.status,u=t.format,d=t.trailColor,f=t.type,p=t.strokeWidth,c=t.width,m=t.showInfo,v=C(t,["prefixCls","className","percent","status","format","trailColor","type","strokeWidth","width","showInfo"]),b=parseInt(i.toString(),10)>=100&&!("status"in t)?"success":l||"normal",k=void 0,w=void 0,E=u||function(e){return e+"%"};if(m){var x=void 0,N="circle"===f?"":"-circle";x="exception"===b?u?E(i):h["default"].createElement(y["default"],{type:"cross"+N}):"success"===b?u?E(i):h["default"].createElement(y["default"],{type:"check"+N}):E(i),k=h["default"].createElement("span",{className:n+"-text"},x)}if("line"===f){var O={width:i+"%",height:p||10};w=h["default"].createElement("div",null,h["default"].createElement("div",{className:n+"-outer"},h["default"].createElement("div",{className:n+"-inner"},h["default"].createElement("div",{className:n+"-bg",style:O}))),k)}else if("circle"===f){var _=c||132,M={width:_,height:_,fontSize:.16*_+6},D=p||6;w=h["default"].createElement("div",{className:n+"-inner",style:M},h["default"].createElement(g.Circle,{percent:i,strokeWidth:D,trailWidth:D,strokeColor:P[b],trailColor:d,prefixCls:n}),k)}var S=(0,T["default"])(n,(e={},(0,s["default"])(e,n+"-"+f,!0),(0,s["default"])(e,n+"-status-"+b,!0),(0,s["default"])(e,n+"-show-info",m),e),o);return h["default"].createElement("div",(0,a["default"])({},v,{className:S}),w)},t}(h["default"].Component);t["default"]=k,k.defaultProps={type:"line",percent:0,showInfo:!0,trailColor:"#f3f3f3",prefixCls:"ant-progress"},k.propTypes={status:m.PropTypes.oneOf(["normal","exception","active","success"]),type:m.PropTypes.oneOf(["line","circle"]),showInfo:m.PropTypes.bool,percent:m.PropTypes.number,width:m.PropTypes.number,strokeWidth:m.PropTypes.number,trailColor:m.PropTypes.string,format:m.PropTypes.func},e.exports=t["default"]},615:[1216,851],620:function(e,t){"use strict";function n(e,t){var n=e.uid?"byUid":"byName",o=t.filter(function(t){return"byName"===n?t.name===e.name:t.uid===e.uid})[0];return o}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},621:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){return!0}function a(e){return{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.filename||e.name,size:e.size,type:e.type,uid:e.uid,response:e.response,error:e.error,percent:0,originFileObj:e,status:null}}function i(){var e=.1,t=.01,n=.98;return function(o){var r=o;return r>=n?r:(r+=e,e-=t,e<.001&&(e=.001),100*r)}}function s(e){return b["default"].createElement(M,(0,y["default"])({},e,{type:"drag",style:{height:e.height}}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var l=n(7),u=o(l),d=n(3),f=o(d),p=n(5),c=o(p),m=n(4),h=o(m),v=n(2),y=o(v);t.Dragger=s;var g=n(1),b=o(g),T=n(1065),C=o(T),P=n(623),k=o(P),w=n(620),E=o(w),x=n(6),N=o(x),O=n(8),_=o(O),M=function(e){function t(n){(0,f["default"])(this,t);var o=(0,c["default"])(this,e.call(this,n));return o.onStart=function(e){var t=void 0,n=o.state.fileList.concat();e.length>0?(t=e.map(function(e){var t=a(e);return t.status="uploading",t}),n=n.concat(t)):(t=a(e),t.status="uploading",n.push(t)),o.onChange({file:t,fileList:n}),window.FormData||o.autoUpdateProgress(0,t)},o.onSuccess=function(e,t){o.clearProgressTimer();try{"string"==typeof e&&(e=JSON.parse(e))}catch(n){}var r=o.state.fileList,a=(0,E["default"])(t,r);a&&(a.status="done",a.response=e,o.onChange({file:a,fileList:r}))},o.onProgress=function(e,t){var n=o.state.fileList,r=(0,E["default"])(t,n);r&&(r.percent=e.percent,o.onChange({event:e,file:r,fileList:o.state.fileList}))},o.onError=function(e,t,n){o.clearProgressTimer();var r=o.state.fileList,a=(0,E["default"])(n,r);a&&(a.error=e,a.response=t,a.status="error",o.onChange({file:a,fileList:r}))},o.handleManualRemove=function(e){o.refs.upload.abort(e),e.status="removed",o.handleRemove(e)},o.onChange=function(e){"fileList"in o.props||o.setState({fileList:e.fileList});var t=o.props.onChange;t&&t(e)},o.onFileDrop=function(e){o.setState({dragState:e.type})},o.state={fileList:o.props.fileList||o.props.defaultFileList||[],dragState:"drop"},o}return(0,h["default"])(t,e),t.prototype.autoUpdateProgress=function(e,t){var n=this,o=i(),r=0;this.progressTimer=setInterval(function(){r=o(r),n.onProgress({percent:r},t)},200)},t.prototype.removeFile=function(e){var t=this.state.fileList,n=(0,E["default"])(e,t),o=t.indexOf(n);return o!==-1?(t.splice(o,1),t):null},t.prototype.handleRemove=function(e){var t=this.props.onRemove,n=t&&t(e);if(n!==!1){var o=this.removeFile(e);o&&this.onChange({file:e,fileList:o})}},t.prototype.componentWillReceiveProps=function(e){"fileList"in e&&this.setState({fileList:e.fileList||[]})},t.prototype.clearProgressTimer=function(){clearInterval(this.progressTimer)},t.prototype.render=function(){var e,t=this.props,n=t.prefixCls,o=void 0===n?"":n,r=t.showUploadList,a=t.listType,i=t.onPreview,s=t.type,l=t.disabled,d=t.children,f=t.className,p=(0,_["default"])({},this.props,{onStart:this.onStart,onError:this.onError,onProgress:this.onProgress,onSuccess:this.onSuccess});delete p.className;var c=r.showRemoveIcon,m=r.showPreviewIcon,h=r?b["default"].createElement(k["default"],{listType:a,items:this.state.fileList,onPreview:i,onRemove:this.handleManualRemove,showRemoveIcon:c,showPreviewIcon:m}):null;if("drag"===s){var v,g=(0,N["default"])(o,(v={},(0,u["default"])(v,o+"-drag",!0),(0,u["default"])(v,o+"-drag-uploading",this.state.fileList.some(function(e){return"uploading"===e.status})),(0,u["default"])(v,o+"-drag-hover","dragover"===this.state.dragState),(0,u["default"])(v,o+"-disabled",l),v));return b["default"].createElement("span",{className:f},b["default"].createElement("div",{className:g,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,onDragLeave:this.onFileDrop},b["default"].createElement(C["default"],(0,y["default"])({},p,{ref:"upload",className:o+"-btn"}),b["default"].createElement("div",{className:o+"-drag-container"},d))),h)}var T=(0,N["default"])(o,(e={},(0,u["default"])(e,o+"-select",!0),(0,u["default"])(e,o+"-select-"+a,!0),(0,u["default"])(e,o+"-disabled",l),e)),P=b["default"].createElement("div",{className:T,style:{display:d?"":"none"}},b["default"].createElement(C["default"],(0,y["default"])({},p,{ref:"upload"})));return"picture-card"===a?b["default"].createElement("span",{className:f},h,P):b["default"].createElement("span",{className:f},P,h)},t}(b["default"].Component);t["default"]=M,M.Dragger=s,M.defaultProps={prefixCls:"ant-upload",type:"select",multiple:!1,action:"",data:{},accept:"",beforeUpload:r,showUploadList:!0,listType:"text",className:"",disabled:!1,supportServerRender:!0}},622:function(e,t,n){"use strict";n(10),n(855),n(615),n(193)},623:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=n(7),a=o(r),i=n(2),s=o(i),l=n(3),u=o(l),d=n(5),f=o(d),p=n(4),c=o(p),m=n(1),h=o(m),v=n(56),y=o(v),g=n(11),b=o(g),T=n(176),C=o(T),P=n(613),k=o(P),w=n(6),E=o(w),x=function(e,t){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.readAsDataURL(e)},N=function(e){function t(){(0,u["default"])(this,t);var n=(0,f["default"])(this,e.apply(this,arguments));return n.handleClose=function(e){var t=n.props.onRemove;t&&t(e)},n.handlePreview=function(e,t){var o=n.props.onPreview;if(o)return t.preventDefault(),o(e)},n}return(0,c["default"])(t,e),t.prototype.componentDidUpdate=function(){var e=this;"picture"!==this.props.listType&&"picture-card"!==this.props.listType||(this.props.items||[]).forEach(function(t){"undefined"!=typeof document&&"undefined"!=typeof window&&window.FileReader&&window.File&&t.originFileObj instanceof File&&void 0===t.thumbUrl&&(t.thumbUrl="",x(t.originFileObj,function(n){t.thumbUrl=n,e.forceUpdate()}))})},t.prototype.render=function(){var e,t=this,n=this.props,o=n.prefixCls,r=n.items,i=void 0===r?[]:r,l=n.listType,u=n.showPreviewIcon,d=n.showRemoveIcon,f=i.map(function(e){var n,r=void 0,i=h["default"].createElement(b["default"],{type:"paper-clip"});"picture"!==l&&"picture-card"!==l||(i="uploading"===e.status||!e.thumbUrl&&!e.url?"picture-card"===l?h["default"].createElement("div",{className:o+"-list-item-uploading-text"},"Uploading..."):h["default"].createElement(b["default"],{className:o+"-list-item-thumbnail",type:"picture"}):h["default"].createElement("a",{className:o+"-list-item-thumbnail",onClick:function(n){return t.handlePreview(e,n)},href:e.url||e.thumbUrl,target:"_blank",rel:"noopener noreferrer"},h["default"].createElement("img",{src:e.thumbUrl||e.url,alt:e.name}))),"uploading"===e.status&&(r=h["default"].createElement("div",{className:o+"-list-item-progress"},h["default"].createElement(k["default"],(0,s["default"])({type:"line"},t.props.progressAttr,{percent:e.percent}))));var f=(0,E["default"])((n={},(0,a["default"])(n,o+"-list-item",!0),(0,a["default"])(n,o+"-list-item-"+e.status,!0),n)),p=e.url?h["default"].createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:o+"-list-item-name",onClick:function(n){return t.handlePreview(e,n)}},e.name):h["default"].createElement("span",{className:o+"-list-item-name",onClick:function(n){return t.handlePreview(e,n)}},e.name),c=e.url||e.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},m=u?h["default"].createElement("a",{href:e.url||e.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:c,onClick:function(n){return t.handlePreview(e,n)},title:"Preview file"},h["default"].createElement(b["default"],{type:"eye-o"})):null,v=d?h["default"].createElement(b["default"],{type:"delete",title:"Remove file",onClick:function(){return t.handleClose(e)}}):null,y=d?h["default"].createElement(b["default"],{type:"cross",title:"Remove file",onClick:function(){return t.handleClose(e)}}):null,g="picture-card"===l&&"uploading"!==e.status?h["default"].createElement("span",{className:o+"-list-item-actions"},m,v):y,T=h["default"].createElement("div",{className:f,key:e.uid},h["default"].createElement("div",{className:o+"-list-item-info"},i,p,g),r);if("error"===e.status){var P=e.response||e.error&&e.error.statusText||"Upload Error";return h["default"].createElement(C["default"],{title:P,key:e.uid},T)}return T}),p=(0,E["default"])((e={},(0,a["default"])(e,o+"-list",!0),(0,a["default"])(e,o+"-list-"+l,!0),e));return h["default"].createElement(y["default"],{transitionName:o+"-margin-top",component:"div",className:p},f)},t}(h["default"].Component);t["default"]=N,N.defaultProps={listType:"text",progressAttr:{strokeWidth:3,showInfo:!1},prefixCls:"ant-upload",showRemoveIcon:!0,showPreviewIcon:!0},e.exports=t["default"]},680:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(n(149),n(148)),s=o(i),l=(n(622),n(621)),u=o(l),d=(n(23),n(11)),f=o(d),p=n(3),c=o(p),m=n(5),h=o(m),v=n(4),y=o(v),g=n(1),b=o(g),T=n(861),C=o(T),P=n(272),k=(o(P),a=r=function(e){function t(n){(0,c["default"])(this,t);var o=(0,h["default"])(this,e.call(this,n));return o.state={previewVisible:!1,previewImage:"",fileList:Array.isArray(n.fileList)?n.fileList.map(function(e,t){var n=e.split("/");return{url:e,uid:t,name:n[n.length-1],status:"done"}}):[{uid:-1,url:n.fileList,name:n.fileList.split("/")[n.fileList.split("/").length-1],status:"done"}]},o}return(0,y["default"])(t,e),t.prototype.render=function(){var e=this,t=this.state,n=t.previewVisible,o=t.previewImage,r=t.fileList,a=this.props,i=a.multiple,l=void 0===i?1:i,d=a.onUpload,p=function(e){var t=e.map(function(e){return e.url||e.thumbUrl});return 1===l?t[0]:t},c={action:"test.do",data:{},listType:"picture-card",fileList:r,multiple:l===!0,onPreview:function(t){e.setState({previewImage:t.url||t.thumbUrl,previewVisible:!0})},beforeUpload:function(e){return!0},onChange:function(t){var n=(t.file,t.fileList);t.e;e.setState({fileList:n}),d(p(n))},onRemove:function(t){var n=e.state.fileList.filter(function(e){return e.uid!==t.uid});d(p(n))}},m={visible:n,footer:null,onCancel:function(){return e.setState({previewVisible:!1})}},h=b["default"].createElement("div",null,b["default"].createElement(f["default"],{type:"plus"}),b["default"].createElement("div",{className:"ant-upload-text"},"\u70b9\u51fb\u4e0a\u4f20"));return b["default"].createElement("div",{className:"clearfix"},b["default"].createElement(u["default"],c,l===!0?h:r.length>=l?null:h),b["default"].createElement(s["default"],m,b["default"].createElement("img",{className:C["default"].previewImage,alt:"",src:o})))},t}(b["default"].Component),r.propTypes={fileList:g.PropTypes.oneOfType([g.PropTypes.array,g.PropTypes.string]).isRequired,onUpload:g.PropTypes.func.isRequired,multiple:g.PropTypes.oneOfType([g.PropTypes.bool,g.PropTypes.number])},a);t["default"]=k,e.exports=t["default"]},716:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=(n(26),n(20)),a=o(r),i=n(2),s=o(i),l=n(3),u=o(l),d=n(5),f=o(d),p=n(4),c=o(p),m=(n(87),n(86)),h=o(m),v=n(1),y=o(v),g=n(680),b=o(g),T=h["default"].Item,C={labelCol:{span:6},wrapperCol:{span:14}},P=function(e){function t(){return(0,u["default"])(this,t),(0,f["default"])(this,e.apply(this,arguments))}return(0,c["default"])(t,e),t.prototype.handleUpload=function(e){},t.prototype.handleOk=function(e){e.preventDefault()},t.prototype.render=function(){var e=["https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"];return y["default"].createElement(h["default"],{horizontal:!0,onSubmit:this.handleOk.bind(this)},y["default"].createElement(T,(0,s["default"])({
label:"\u7528\u6237\u540d\uff1a",hasFeedback:!0},C),y["default"].createElement(b["default"],{fileList:e,onUpload:this.handleUpload.bind(this),multiple:!0})),y["default"].createElement(T,C,y["default"].createElement(a["default"],{type:"primary",htmlType:"submit",size:"large"},"\u786e\u8ba4\u63d0\u4ea4")))},t}(v.Component);t["default"]=h["default"].create()(P),e.exports=t["default"]},851:10,855:10,861:function(e,t){e.exports={previewImage:"previewImage___RwsAp"}},1048:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(1),s=o(i),l=n(521),u=o(l);t["default"]=s["default"].createClass({displayName:"Circle",mixins:[u["default"]],render:function(){var e=this,t=this.props,n=t.prefixCls,o=t.strokeWidth,i=t.trailWidth,l=t.strokeColor,u=t.trailColor,d=t.strokeLinecap,f=t.percent,p=t.style,c=t.className,m=r(t,["prefixCls","strokeWidth","trailWidth","strokeColor","trailColor","strokeLinecap","percent","style","className"]),h=50-o/2,v="M 50,50 m 0,-"+h+"\n     a "+h+","+h+" 0 1 1 0,"+2*h+"\n     a "+h+","+h+" 0 1 1 0,-"+2*h,y=2*Math.PI*h,g={strokeDasharray:y+"px "+y+"px",strokeDashoffset:(100-f)/100*y+"px",transition:"stroke-dashoffset 0.3s ease 0s, stroke 0.3s ease"};return s["default"].createElement("svg",a({className:n+"-circle "+c,viewBox:"0 0 100 100",style:p},m),s["default"].createElement("path",{className:n+"-circle-trail",d:v,stroke:u,strokeWidth:i||o,fillOpacity:"0"}),s["default"].createElement("path",{className:n+"-circle-path",d:v,strokeLinecap:d,stroke:l,strokeWidth:o,fillOpacity:"0",ref:function(t){e.path=t},style:g}))}}),e.exports=t["default"]},1049:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n(1),s=o(i),l=n(521),u=o(l);t["default"]=s["default"].createClass({displayName:"Line",mixins:[u["default"]],render:function(){var e=this,t=this.props,n=t.prefixCls,o=t.strokeWidth,i=t.trailWidth,l=t.strokeColor,u=t.trailColor,d=t.strokeLinecap,f=t.percent,p=t.style,c=t.className,m=r(t,["prefixCls","strokeWidth","trailWidth","strokeColor","trailColor","strokeLinecap","percent","style","className"]),h={strokeDasharray:"100px, 100px",strokeDashoffset:100-f+"px",transition:"stroke-dashoffset 0.3s ease 0s, stroke 0.3s linear"},v=o/2,y=100-o/2,g="M "+v+","+v+" L "+y+","+v,b="0 0 100 "+o;return s["default"].createElement("svg",a({className:n+"-line "+c,viewBox:b,preserveAspectRatio:"none",style:p},m),s["default"].createElement("path",{className:n+"-line-trail",d:g,strokeLinecap:d,stroke:u,strokeWidth:i||o,fillOpacity:"0"}),s["default"].createElement("path",{className:n+"-line-path",d:g,strokeLinecap:d,stroke:l,strokeWidth:o,fillOpacity:"0",ref:function(t){e.path=t},style:h}))}}),e.exports=t["default"]},1050:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1049),a=o(r),i=n(1048),s=o(i);t["default"]={Line:a["default"],Circle:s["default"]},e.exports=t["default"]},1062:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=o(r),i=n(7),s=o(i),l=n(1),u=o(l),d=n(6),f=o(d),p=n(1066),c=o(p),m=n(524),h=o(m),v=u["default"].createClass({displayName:"AjaxUploader",propTypes:{component:l.PropTypes.string,style:l.PropTypes.object,prefixCls:l.PropTypes.string,className:l.PropTypes.string,multiple:l.PropTypes.bool,disabled:l.PropTypes.bool,accept:l.PropTypes.string,children:l.PropTypes.any,onStart:l.PropTypes.func,data:l.PropTypes.oneOfType([l.PropTypes.object,l.PropTypes.func]),headers:l.PropTypes.object,beforeUpload:l.PropTypes.func,customRequest:l.PropTypes.func,withCredentials:l.PropTypes.bool},getInitialState:function(){return this.reqs={},{uid:(0,h["default"])()}},componentWillUnmount:function(){this.abort()},onChange:function(e){var t=e.target.files;this.uploadFiles(t),this.reset()},onClick:function(){var e=this.refs.file;e&&e.click()},onKeyDown:function(e){"Enter"===e.key&&this.onClick()},onFileDrop:function(e){if("dragover"===e.type)return void e.preventDefault();var t=e.dataTransfer.files;this.uploadFiles(t),e.preventDefault()},uploadFiles:function(e){for(var t=Array.prototype.slice.call(e),n=t.length,o=0;o<n;o++){var r=t[o];r.uid=(0,h["default"])(),this.upload(r,t)}},upload:function(e,t){var n=this,o=this.props;if(!o.beforeUpload)return setTimeout(function(){return n.post(e)},0);var r=o.beforeUpload(e,t);r&&r.then?r.then(function(t){var o=Object.prototype.toString.call(t);"[object File]"===o||"[object Blob]"===o?n.post(t):n.post(e)})["catch"](function(e){console&&console.log(e)}):r!==!1&&setTimeout(function(){return n.post(e)},0)},post:function(e){var t=this;if(this.isMounted()){var n=this.props,o=n.data,r=n.onStart;"function"==typeof o&&(o=o(e));var a=e.uid,i=n.customRequest||c["default"];this.reqs[a]=i({action:n.action,filename:n.name,file:e,data:o,headers:n.headers,withCredentials:n.withCredentials,onProgress:function(t){n.onProgress(t,e)},onSuccess:function(o){delete t.reqs[a],n.onSuccess(o,e)},onError:function(o,r){delete t.reqs[a],n.onError(o,r,e)}}),r(e)}},reset:function(){this.setState({uid:(0,h["default"])()})},abort:function(e){var t=this.reqs;if(e){var n=e;e&&e.uid&&(n=e.uid),t[n]&&(t[n].abort(),delete t[n])}else Object.keys(t).forEach(function(e){t[e]&&t[e].abort(),delete t[e]})},render:function(){var e,t=this.props,n=t.component,o=t.prefixCls,r=t.className,i=t.disabled,l=t.style,d=t.multiple,p=t.accept,c=t.children,m=(0,f["default"])((e={},(0,s["default"])(e,o,!0),(0,s["default"])(e,o+"-disabled",i),(0,s["default"])(e,r,r),e)),h=i?{}:{onClick:this.onClick,onKeyDown:this.onKeyDown,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return u["default"].createElement(n,(0,a["default"])({},h,{className:m,role:"button",style:l}),u["default"].createElement("input",{type:"file",ref:"file",key:this.state.uid,style:{display:"none"},accept:p,multiple:d,onChange:this.onChange}),c)}});t["default"]=v,e.exports=t["default"]},1063:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),a=o(r),i=n(2),s=o(i),l=n(1),u=o(l),d=n(9),f=o(d),p=n(6),c=o(p),m=n(524),h=o(m),v=n(1067),y=o(v),g={position:"absolute",top:0,opacity:0,filter:"alpha(opacity=0)",left:0,zIndex:9999},b=u["default"].createClass({displayName:"IframeUploader",propTypes:{component:l.PropTypes.string,style:l.PropTypes.object,disabled:l.PropTypes.bool,prefixCls:l.PropTypes.string,className:l.PropTypes.string,accept:l.PropTypes.string,onStart:l.PropTypes.func,multiple:l.PropTypes.bool,children:l.PropTypes.any,data:l.PropTypes.oneOfType([l.PropTypes.object,l.PropTypes.func]),action:l.PropTypes.string,name:l.PropTypes.string},getInitialState:function(){return this.file={},{uploading:!1}},componentDidMount:function(){this.updateIframeWH(),this.initIframe()},componentDidUpdate:function(){this.updateIframeWH()},onLoad:function(){if(this.state.uploading){var e=this.props,t=this.file,n=void 0;try{var o=this.getIframeDocument(),r=o.getElementsByTagName("script")[0];r&&r.parentNode===o.body&&o.body.removeChild(r),n=o.body.innerHTML,e.onSuccess(n,t)}catch(a){(0,y["default"])(!1,"cross domain error for Upload. Maybe server should return document.domain script. see Note from https://github.com/react-component/upload"),n="cross-domain",e.onError(a,null,t)}this.endUpload()}},onChange:function(){var e=this,t=this.getFormInputNode(),n=this.file={uid:(0,h["default"])(),name:t.value};this.startUpload();var o=this.props;if(!o.beforeUpload)return this.post(n);var r=o.beforeUpload(n);r&&r.then?r.then(function(){e.post(n)},function(){e.endUpload()}):r!==!1?this.post(n):this.endUpload()},getIframeNode:function(){return this.refs.iframe},getIframeDocument:function(){return this.getIframeNode().contentDocument},getFormNode:function(){return this.getIframeDocument().getElementById("form")},getFormInputNode:function(){return this.getIframeDocument().getElementById("input")},getFormDataNode:function(){return this.getIframeDocument().getElementById("data")},getFileForMultiple:function(e){return this.props.multiple?[e]:e},getIframeHTML:function(e){var t="",n="";if(e){var o="script";t="<"+o+'>document.domain="'+e+'";</'+o+">",n='<input name="_documentDomain" value="'+e+'" />'}return'\n    <!DOCTYPE html>\n    <html>\n    <head>\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <style>\n    body,html {padding:0;margin:0;border:0;overflow:hidden;}\n    </style>\n    '+t+'\n    </head>\n    <body>\n    <form method="post"\n    encType="multipart/form-data"\n    action="'+this.props.action+'" id="form"\n    style="display:block;height:9999px;position:relative;overflow:hidden;">\n    <input id="input" type="file"\n     name="'+this.props.name+'"\n     style="position:absolute;top:0;right:0;height:9999px;font-size:9999px;cursor:pointer;"/>\n    '+n+'\n    <span id="data"></span>\n    </form>\n    </body>\n    </html>\n    '},initIframeSrc:function(){this.domain&&(this.getIframeNode().src="javascript:void((function(){\n        var d = document;\n        d.open();\n        d.domain='"+this.domain+"';\n        d.write('');\n        d.close();\n      })())")},initIframe:function(){var e=this.getIframeNode(),t=e.contentWindow,n=void 0;this.domain=this.domain||"",this.initIframeSrc();try{n=t.document}catch(o){this.domain=document.domain,this.initIframeSrc(),t=e.contentWindow,n=t.document}n.open("text/html","replace"),n.write(this.getIframeHTML(this.domain)),n.close(),this.getFormInputNode().onchange=this.onChange},endUpload:function(){this.state.uploading&&(this.file={},this.state.uploading=!1,this.setState({uploading:!1}),this.initIframe())},startUpload:function(){this.state.uploading||(this.state.uploading=!0,this.setState({uploading:!0}))},updateIframeWH:function(){var e=f["default"].findDOMNode(this),t=this.getIframeNode();t.style.height=e.offsetHeight+"px",t.style.width=e.offsetWidth+"px"},abort:function(e){if(e){var t=e;e&&e.uid&&(t=e.uid),t===this.file.uid&&this.endUpload()}else this.endUpload()},post:function(e){var t=this.getFormNode(),n=this.getFormDataNode(),o=this.props.data,r=this.props.onStart;"function"==typeof o&&(o=o(e));var a=[];for(var i in o)o.hasOwnProperty(i)&&a.push('<input name="'+i+'" value="'+o[i]+'"/>');n.innerHTML=a.join(""),t.submit(),n.innerHTML="",r(e)},render:function(){var e,t=this.props,n=t.component,o=t.disabled,r=t.className,i=t.prefixCls,l=t.children,d=t.style,f=(0,s["default"])({},g,{display:this.state.uploading||o?"none":""}),p=(0,c["default"])((e={},(0,a["default"])(e,i,!0),(0,a["default"])(e,i+"-disabled",o),(0,a["default"])(e,r,r),e));return u["default"].createElement(n,{className:p,style:(0,s["default"])({position:"relative",zIndex:0},d)},u["default"].createElement("iframe",{ref:"iframe",onLoad:this.onLoad,style:f}),l)}});t["default"]=b,e.exports=t["default"]},1064:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),i=o(a),s=n(1),l=o(s),u=n(1062),d=o(u),f=n(1063),p=o(f),c=l["default"].createClass({displayName:"Upload",propTypes:{component:s.PropTypes.string,style:s.PropTypes.object,prefixCls:s.PropTypes.string,action:s.PropTypes.string,name:s.PropTypes.string,multipart:s.PropTypes.bool,onError:s.PropTypes.func,onSuccess:s.PropTypes.func,onProgress:s.PropTypes.func,onStart:s.PropTypes.func,data:s.PropTypes.oneOfType([s.PropTypes.object,s.PropTypes.func]),headers:s.PropTypes.object,accept:s.PropTypes.string,multiple:s.PropTypes.bool,disabled:s.PropTypes.bool,beforeUpload:s.PropTypes.func,customRequest:s.PropTypes.func,onReady:s.PropTypes.func,withCredentials:s.PropTypes.bool,supportServerRender:s.PropTypes.bool},getDefaultProps:function(){return{component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onProgress:r,onReady:r,onStart:r,onError:r,onSuccess:r,supportServerRender:!1,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1}},getInitialState:function(){return{Component:null}},componentDidMount:function(){this.props.supportServerRender&&this.setState({Component:this.getComponent()},this.props.onReady)},getComponent:function(){return"undefined"!=typeof FormData?d["default"]:p["default"]},abort:function(e){this.refs.inner.abort(e)},render:function(){if(this.props.supportServerRender){var e=this.state.Component;return e?l["default"].createElement(e,(0,i["default"])({},this.props,{ref:"inner"})):null}var t=this.getComponent();return l["default"].createElement(t,(0,i["default"])({},this.props,{ref:"inner"}))}});t["default"]=c,e.exports=t["default"]},1065:function(e,t,n){"use strict";e.exports=n(1064)},1066:function(e,t){"use strict";function n(e,t){var n="cannot post "+e.action+" "+t.status+"'",o=new Error(n);return o.status=t.status,o.method="post",o.url=e.action,o}function o(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function r(e){var t=new XMLHttpRequest;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var r=new FormData;e.data&&Object.keys(e.data).map(function(t){r.append(t,e.data[t])}),r.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(n(e,t),o(t)):void e.onSuccess(o(t))},t.open("post",e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var a=e.headers||{};null!==a["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest");for(var i in a)a.hasOwnProperty(i)&&null!==a[i]&&t.setRequestHeader(i,a[i]);return t.send(r),{abort:function(){t.abort()}}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r,e.exports=t["default"]},1067:81});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZGVtby5qcyIsIndlYnBhY2s6Ly8vLi9+L2FudGQvbGliL21vZGFsL01vZGFsLmpzPzNmOTgqKiIsIndlYnBhY2s6Ly8vLi9+L2FudGQvbGliL21vZGFsL2luZGV4LmpzPzAzNmEqKiIsIndlYnBhY2s6Ly8vLi9+L2FudGQvbGliL21vZGFsL3N0eWxlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vYW50ZC9saWIvbW9kYWwvQWN0aW9uQnV0dG9uLmpzP2VkMDQqKiIsIndlYnBhY2s6Ly8vLi9+L2FudGQvbGliL21vZGFsL2NvbmZpcm0uanM/N2FlZSoqIiwid2VicGFjazovLy8uL34vYW50ZC9saWIvbW9kYWwvbG9jYWxlLmpzP2YwYjgqKiIsIndlYnBhY2s6Ly8vLi9+L3JjLWRpYWxvZy9saWIvRGlhbG9nLmpzPzM3YWUqKiIsIndlYnBhY2s6Ly8vLi9+L3JjLWRpYWxvZy9saWIvRGlhbG9nV3JhcC5qcz8xN2NhKioiLCJ3ZWJwYWNrOi8vLy4vfi9yYy1kaWFsb2cvbGliL0xhenlSZW5kZXJCb3guanM/ZjNmMSoqIiwid2VicGFjazovLy8uL34vcmMtZGlhbG9nL34vcmMtdXRpbC9saWIvZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW4uanM/YjkyOCoqIiwid2VicGFjazovLy8uL34vcmMtZGlhbG9nL34vcmMtdXRpbC9saWIvZ2V0U2Nyb2xsQmFyU2l6ZS5qcz8wOWZhKioiLCJ3ZWJwYWNrOi8vLy4vfi9yYy1wcm9ncmVzcy9saWIvbWl4aW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYy11cGxvYWQvbGliL3VpZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2FudGQvbGliL3Byb2dyZXNzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vYW50ZC9saWIvcHJvZ3Jlc3MvcHJvZ3Jlc3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9hbnRkL2xpYi91cGxvYWQvZ2V0RmlsZUl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vfi9hbnRkL2xpYi91cGxvYWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9hbnRkL2xpYi91cGxvYWQvc3R5bGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9hbnRkL2xpYi91cGxvYWQvdXBsb2FkTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vVXBsb2FkRmlsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcm91dGVzL2RlbW8vRGVtby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb21tb24vVXBsb2FkRmlsZS5sZXNzIiwid2VicGFjazovLy8uL34vcmMtcHJvZ3Jlc3MvbGliL0NpcmNsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3JjLXByb2dyZXNzL2xpYi9MaW5lLmpzIiwid2VicGFjazovLy8uL34vcmMtcHJvZ3Jlc3MvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmMtdXBsb2FkL2xpYi9BamF4VXBsb2FkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYy11cGxvYWQvbGliL0lmcmFtZVVwbG9hZGVyLmpzIiwid2VicGFjazovLy8uL34vcmMtdXBsb2FkL2xpYi9VcGxvYWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9yYy11cGxvYWQvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vcmMtdXBsb2FkL2xpYi9yZXF1ZXN0LmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIjg4IiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwidW5kZWZpbmVkIiwiX2V4dGVuZHMyIiwiX2V4dGVuZHMzIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9jbGFzc0NhbGxDaGVjazMiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMiLCJfaW5oZXJpdHMyIiwiX2luaGVyaXRzMyIsIl9yZWFjdCIsIl9yZWFjdDIiLCJfcmNEaWFsb2ciLCJfcmNEaWFsb2cyIiwiX2FkZEV2ZW50TGlzdGVuZXIiLCJfYWRkRXZlbnRMaXN0ZW5lcjIiLCJfYnV0dG9uIiwiX2J1dHRvbjIiLCJtb3VzZVBvc2l0aW9uIiwibW91c2VQb3NpdGlvbkV2ZW50QmluZGVkIiwiTW9kYWwiLCJfUmVhY3QkQ29tcG9uZW50IiwidGhpcyIsIl90aGlzIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJoYW5kbGVDYW5jZWwiLCJlIiwib25DYW5jZWwiLCJwcm9wcyIsImhhbmRsZU9rIiwib25PayIsInByb3RvdHlwZSIsImNvbXBvbmVudERpZE1vdW50IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJ4IiwicGFnZVgiLCJ5IiwicGFnZVkiLCJzZXRUaW1lb3V0IiwicmVuZGVyIiwiX3Byb3BzIiwib2tUZXh0IiwiY2FuY2VsVGV4dCIsImNvbmZpcm1Mb2FkaW5nIiwiZm9vdGVyIiwidmlzaWJsZSIsImNvbnRleHQiLCJhbnRMb2NhbGUiLCJkZWZhdWx0Rm9vdGVyIiwiY3JlYXRlRWxlbWVudCIsImtleSIsInNpemUiLCJvbkNsaWNrIiwidHlwZSIsImxvYWRpbmciLCJvbkNsb3NlIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIiwicHJlZml4Q2xzIiwid2lkdGgiLCJ0cmFuc2l0aW9uTmFtZSIsIm1hc2tUcmFuc2l0aW9uTmFtZSIsInByb3BUeXBlcyIsIlByb3BUeXBlcyIsInN0cmluZyIsImZ1bmMiLCJub2RlIiwib25lT2ZUeXBlIiwibnVtYmVyIiwiYm9vbCIsImFsaWduIiwib2JqZWN0IiwidGl0bGUiLCJjbG9zYWJsZSIsImNvbnRleHRUeXBlcyIsIjE0OCIsIl9Nb2RhbCIsIl9Nb2RhbDIiLCJfY29uZmlybSIsIl9jb25maXJtMiIsIl9vYmplY3RBc3NpZ24iLCJfb2JqZWN0QXNzaWduMiIsImluZm8iLCJjb25maWciLCJpY29uVHlwZSIsIm9rQ2FuY2VsIiwic3VjY2VzcyIsImVycm9yIiwid2FybmluZyIsIndhcm4iLCJjb25maXJtIiwiMTQ5IiwiMTg5IiwiX3JlYWN0RG9tIiwiX3JlYWN0RG9tMiIsIkFjdGlvbkJ1dHRvbiIsImNhbGwiLCJfdGhpcyRwcm9wcyIsImFjdGlvbkZuIiwiY2xvc2VNb2RhbCIsInJldCIsImxlbmd0aCIsInRoZW4iLCJzZXRTdGF0ZSIsInN0YXRlIiwiYXV0b0ZvY3VzIiwiJHRoaXMiLCJmaW5kRE9NTm9kZSIsInRpbWVvdXRJZCIsImZvY3VzIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJjbGVhclRpbWVvdXQiLCJjaGlsZHJlbiIsIjE5MCIsImNsb3NlIiwidW5tb3VudFJlc3VsdCIsInVubW91bnRDb21wb25lbnRBdE5vZGUiLCJkaXYiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzdHlsZSIsIm1hc2tDbG9zYWJsZSIsInJ1bnRpbWVMb2NhbGUiLCJfbG9jYWxlIiwiZ2V0Q29uZmlybUxvY2FsZSIsImp1c3RPa1RleHQiLCJjbGFzc05hbWUiLCJfaWNvbjIiLCJjb250ZW50IiwiX0FjdGlvbkJ1dHRvbjIiLCJjbGFzc1N0cmluZyIsIl9jbGFzc25hbWVzMiIsIl9kZWZpbmVQcm9wZXJ0eTMiLCJkZXN0cm95IiwiX2RlZmluZVByb3BlcnR5MiIsIl9jbGFzc25hbWVzIiwiX2ljb24iLCJfQWN0aW9uQnV0dG9uIiwiMTkxIiwiY2hhbmdlQ29uZmlybUxvY2FsZSIsIm5ld0xvY2FsZSIsImRlZmF1bHRMb2NhbGUiLCIxOTMiLCIyMDEiLCIyMDIiLCIyMDkiLCJub29wIiwiZ2V0U2Nyb2xsIiwidyIsInRvcCIsIm1ldGhvZCIsImQiLCJzZXRUcmFuc2Zvcm1PcmlnaW4iLCJmb3JFYWNoIiwicHJlZml4Iiwib2Zmc2V0IiwiZWwiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicG9zIiwibGVmdCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJkZWZhdWx0VmlldyIsInBhcmVudFdpbmRvdyIsIl9LZXlDb2RlIiwiX0tleUNvZGUyIiwiX3JjQW5pbWF0ZSIsIl9yY0FuaW1hdGUyIiwiX0xhenlSZW5kZXJCb3giLCJfTGF6eVJlbmRlckJveDIiLCJfZ2V0U2Nyb2xsQmFyU2l6ZSIsIl9nZXRTY3JvbGxCYXJTaXplMiIsIl9fYXNzaWduIiwiYXNzaWduIiwidCIsInMiLCJpIiwibiIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsInV1aWQiLCJvcGVuQ291bnQiLCJEaWFsb2ciLCJjcmVhdGVDbGFzcyIsImRpc3BsYXlOYW1lIiwiZ2V0RGVmYXVsdFByb3BzIiwiYWZ0ZXJDbG9zZSIsIm1hc2siLCJrZXlib2FyZCIsImNvbXBvbmVudFdpbGxNb3VudCIsImluVHJhbnNpdGlvbiIsInRpdGxlSWQiLCJjb21wb25lbnREaWRVcGRhdGUiLCJwcmV2UHJvcHMiLCJvcGVuVGltZSIsIkRhdGUiLCJub3ciLCJsYXN0T3V0U2lkZUZvY3VzTm9kZSIsImFjdGl2ZUVsZW1lbnQiLCJhZGRTY3JvbGxpbmdFZmZlY3QiLCJyZWZzIiwid3JhcCIsImRpYWxvZ05vZGUiLCJkaWFsb2ciLCJlbE9mZnNldCIsInJlbW92ZVNjcm9sbGluZ0VmZmVjdCIsIm9uQW5pbWF0ZUxlYXZlIiwiZGlzcGxheSIsIm9uTWFza0NsaWNrIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIm9uS2V5RG93biIsImtleUNvZGUiLCJFU0MiLCJUQUIiLCJkaWFsb2dSb290Iiwic2VudGluZWwiLCJzaGlmdEtleSIsImdldERpYWxvZ0VsZW1lbnQiLCJkZXN0IiwiaGVpZ2h0IiwicmVmIiwiaGVhZGVyIiwiaWQiLCJjbG9zZXIiLCJhcmlhLWxhYmVsIiwiZ2V0VHJhbnNpdGlvbk5hbWUiLCJkaWFsb2dFbGVtZW50Iiwicm9sZSIsImJvZHlTdHlsZSIsImJvZHlQcm9wcyIsInRhYkluZGV4Iiwib3ZlcmZsb3ciLCJzaG93UHJvcCIsIm9uTGVhdmUiLCJjb21wb25lbnQiLCJ0cmFuc2l0aW9uQXBwZWFyIiwiZ2V0WkluZGV4U3R5bGUiLCJ6SW5kZXgiLCJnZXRXcmFwU3R5bGUiLCJ3cmFwU3R5bGUiLCJnZXRNYXNrU3R5bGUiLCJtYXNrU3R5bGUiLCJnZXRNYXNrRWxlbWVudCIsIm1hc2tFbGVtZW50IiwibWFza1RyYW5zaXRpb24iLCJnZXRNYXNrVHJhbnNpdGlvbk5hbWUiLCJoaWRkZW5DbGFzc05hbWUiLCJtYXNrUHJvcHMiLCJhbmltYXRpb24iLCJtYXNrQW5pbWF0aW9uIiwiZ2V0RWxlbWVudCIsInBhcnQiLCJzZXRTY3JvbGxiYXIiLCJib2R5SXNPdmVyZmxvd2luZyIsInNjcm9sbGJhcldpZHRoIiwicGFkZGluZ1JpZ2h0IiwiY2hlY2tTY3JvbGxiYXIiLCJyZXNldFNjcm9sbGJhciIsImZ1bGxXaW5kb3dXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJkb2N1bWVudEVsZW1lbnRSZWN0IiwicmlnaHQiLCJNYXRoIiwiYWJzIiwiY2xpZW50V2lkdGgiLCJhZGp1c3REaWFsb2ciLCJtb2RhbElzT3ZlcmZsb3dpbmciLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJwYWRkaW5nTGVmdCIsInJlc2V0QWRqdXN0bWVudHMiLCJ3cmFwQ2xhc3NOYW1lIiwiYXJpYS1sYWJlbGxlZGJ5Iiwid3JhcFByb3BzIiwiMjEwIiwiX0RpYWxvZyIsIl9EaWFsb2cyIiwiX2dldENvbnRhaW5lclJlbmRlck1peGluIiwiX2dldENvbnRhaW5lclJlbmRlck1peGluMiIsIkRpYWxvZ1dyYXAiLCJtaXhpbnMiLCJpc1Zpc2libGUiLCJpbnN0YW5jZSIsImF1dG9EZXN0cm95IiwiZ2V0Q29tcG9uZW50IiwiZXh0cmEiLCJzaG91bGRDb21wb25lbnRVcGRhdGUiLCJfcmVmIiwicmVuZGVyQ29tcG9uZW50IiwicmVtb3ZlQ29udGFpbmVyIiwiX2NvbXBvbmVudCIsIjIxMSIsIkxhenlSZW5kZXJCb3giLCJuZXh0UHJvcHMiLCIyMTIiLCIyMTMiLCJkZWZhdWx0R2V0Q29udGFpbmVyIiwiY29udGFpbmVyIiwiZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW4iLCJfcmVuZGVyQ29tcG9uZW50IiwiY29tcG9uZW50QXJnIiwicmVhZHkiLCJfY29udGFpbmVyIiwiZ2V0Q29udGFpbmVyIiwidW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIiLCJfcmVtb3ZlQ29udGFpbmVyIiwiX2NvbmZpZyRhdXRvTW91bnQiLCJhdXRvTW91bnQiLCJfY29uZmlnJGF1dG9EZXN0cm95IiwiX2NvbmZpZyRnZXRDb250YWluZXIiLCJtaXhpbiIsIl9leHRlbmRzIiwic291cmNlIiwiMjE0IiwiZ2V0U2Nyb2xsQmFyU2l6ZSIsImZyZXNoIiwiY2FjaGVkIiwiaW5uZXIiLCJvdXRlciIsIm91dGVyU3R5bGUiLCJwb3NpdGlvbiIsInBvaW50ZXJFdmVudHMiLCJ2aXNpYmlsaXR5Iiwid2lkdGhDb250YWluZWQiLCJvZmZzZXRXaWR0aCIsIndpZHRoU2Nyb2xsIiwiNTIxIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VDb2xvciIsInRyYWlsV2lkdGgiLCJ0cmFpbENvbG9yIiwic3Ryb2tlTGluZWNhcCIsIm9uZU9mIiwicGF0aCIsInRyYW5zaXRpb25EdXJhdGlvbiIsInByZXZUaW1lU3RhbXAiLCI1MjQiLCJ1aWQiLCJpbmRleCIsIjYxMyIsIl9wcm9ncmVzcyIsIl9wcm9ncmVzczIiLCI2MTQiLCJfcmNQcm9ncmVzcyIsIl9fcmVzdCIsImluZGV4T2YiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJzdGF0dXNDb2xvck1hcCIsIm5vcm1hbCIsImV4Y2VwdGlvbiIsIlByb2dyZXNzIiwiX2NsYXNzTmFtZXMiLCJfcHJvcHMkcGVyY2VudCIsInBlcmNlbnQiLCJzdGF0dXMiLCJmb3JtYXQiLCJzaG93SW5mbyIsInJlc3RQcm9wcyIsInByb2dyZXNzU3RhdHVzIiwicGFyc2VJbnQiLCJ0b1N0cmluZyIsInByb2dyZXNzSW5mbyIsInByb2dyZXNzIiwidGV4dEZvcm1hdHRlciIsInBlcmNlbnROdW1iZXIiLCJ0ZXh0IiwicGVyY2VudFN0eWxlIiwiY2lyY2xlU2l6ZSIsImNpcmNsZVN0eWxlIiwiZm9udFNpemUiLCJjaXJjbGVXaWR0aCIsIkNpcmNsZSIsIjYxNSIsIjYyMCIsImdldEZpbGVJdGVtIiwiZmlsZSIsImZpbGVMaXN0IiwibWF0Y2hXYXkiLCJmaWx0ZXIiLCJpdGVtIiwibmFtZSIsIjYyMSIsIlQiLCJmaWxlVG9PYmplY3QiLCJsYXN0TW9kaWZpZWQiLCJsYXN0TW9kaWZpZWREYXRlIiwiZmlsZW5hbWUiLCJyZXNwb25zZSIsIm9yaWdpbkZpbGVPYmoiLCJnZW5QZXJjZW50QWRkIiwiayIsImVuZCIsInN0YXJ0IiwiRHJhZ2dlciIsIlVwbG9hZCIsIl9yY1VwbG9hZCIsIl9yY1VwbG9hZDIiLCJfdXBsb2FkTGlzdCIsIl91cGxvYWRMaXN0MiIsIl9nZXRGaWxlSXRlbSIsIl9nZXRGaWxlSXRlbTIiLCJvblN0YXJ0IiwidGFyZ2V0SXRlbSIsIm5leHRGaWxlTGlzdCIsImNvbmNhdCIsIm1hcCIsImYiLCJmaWxlT2JqZWN0IiwicHVzaCIsIm9uQ2hhbmdlIiwiRm9ybURhdGEiLCJhdXRvVXBkYXRlUHJvZ3Jlc3MiLCJvblN1Y2Nlc3MiLCJjbGVhclByb2dyZXNzVGltZXIiLCJKU09OIiwicGFyc2UiLCJvblByb2dyZXNzIiwiZXZlbnQiLCJvbkVycm9yIiwiaGFuZGxlTWFudWFsUmVtb3ZlIiwidXBsb2FkIiwiYWJvcnQiLCJoYW5kbGVSZW1vdmUiLCJvbkZpbGVEcm9wIiwiZHJhZ1N0YXRlIiwiZGVmYXVsdEZpbGVMaXN0IiwiXyIsIl90aGlzMiIsImdldFBlcmNlbnQiLCJjdXJQZXJjZW50IiwicHJvZ3Jlc3NUaW1lciIsInNldEludGVydmFsIiwicmVtb3ZlRmlsZSIsInNwbGljZSIsIm9uUmVtb3ZlIiwib25SZW1vdmVSZXR1cm5WYWx1ZSIsImNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMiLCJjbGVhckludGVydmFsIiwiX2NsYXNzTmFtZXMyIiwiX3Byb3BzJHByZWZpeENscyIsInNob3dVcGxvYWRMaXN0IiwibGlzdFR5cGUiLCJvblByZXZpZXciLCJkaXNhYmxlZCIsInJjVXBsb2FkUHJvcHMiLCJzaG93UmVtb3ZlSWNvbiIsInNob3dQcmV2aWV3SWNvbiIsInVwbG9hZExpc3QiLCJpdGVtcyIsImRyYWdDbHMiLCJzb21lIiwib25Ecm9wIiwib25EcmFnT3ZlciIsIm9uRHJhZ0xlYXZlIiwidXBsb2FkQnV0dG9uQ2xzIiwidXBsb2FkQnV0dG9uIiwibXVsdGlwbGUiLCJhY3Rpb24iLCJkYXRhIiwiYWNjZXB0IiwiYmVmb3JlVXBsb2FkIiwic3VwcG9ydFNlcnZlclJlbmRlciIsIjYyMiIsIjYyMyIsIl90b29sdGlwIiwiX3Rvb2x0aXAyIiwicHJldmlld0ZpbGUiLCJjYWxsYmFjayIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWRlbmQiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwiVXBsb2FkTGlzdCIsImhhbmRsZUNsb3NlIiwiaGFuZGxlUHJldmlldyIsInByZXZlbnREZWZhdWx0IiwiRmlsZSIsInRodW1iVXJsIiwicHJldmlld0RhdGFVcmwiLCJmb3JjZVVwZGF0ZSIsIl90aGlzMyIsIl9wcm9wcyRpdGVtcyIsImxpc3QiLCJpY29uIiwidXJsIiwiaHJlZiIsInJlbCIsInNyYyIsImFsdCIsInByb2dyZXNzQXR0ciIsImluZm9VcGxvYWRpbmdDbGFzcyIsInByZXZpZXciLCJvcGFjaXR5IiwicHJldmlld0ljb24iLCJyZW1vdmVJY29uIiwicmVtb3ZlSWNvbkNyb3NzIiwiYWN0aW9ucyIsIm1lc3NhZ2UiLCJzdGF0dXNUZXh0IiwibGlzdENsYXNzTmFtZXMiLCI2ODAiLCJfY2xhc3MiLCJfdGVtcCIsIl9tb2RhbCIsIl9tb2RhbDIiLCJfdXBsb2FkIiwiX3VwbG9hZDIiLCJfVXBsb2FkRmlsZSIsIl9VcGxvYWRGaWxlMiIsIl9jb29raWUiLCJVcGxvYWRGaWxlcyIsInByZXZpZXdWaXNpYmxlIiwicHJldmlld0ltYWdlIiwiQXJyYXkiLCJpc0FycmF5IiwidXJsQXJyIiwic3BsaXQiLCJfc3RhdGUiLCJfcHJvcHMkbXVsdGlwbGUiLCJvblVwbG9hZCIsInJlbmRlckZpbGVzIiwiZmlsZXMiLCJ1cGxvYWRQcm9wcyIsIm1vZGFsUHJvcHMiLCJhcnJheSIsImlzUmVxdWlyZWQiLCI3MTYiLCJfZm9ybSIsIl9mb3JtMiIsIkZvcm1JdGVtIiwiSXRlbSIsImZvcm1JdGVtTGF5b3V0IiwibGFiZWxDb2wiLCJzcGFuIiwid3JhcHBlckNvbCIsIkRlbW8iLCJfQ29tcG9uZW50IiwiaGFuZGxlVXBsb2FkIiwiaG9yaXpvbnRhbCIsIm9uU3VibWl0IiwiYmluZCIsImxhYmVsIiwiaGFzRmVlZGJhY2siLCJodG1sVHlwZSIsImNyZWF0ZSIsIjg1MSIsIjg1NSIsIjg2MSIsIjEwNDgiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJrZXlzIiwiX21peGluIiwiX21peGluMiIsInJhZGl1cyIsInBhdGhTdHJpbmciLCJsZW4iLCJQSSIsInBhdGhTdHlsZSIsInN0cm9rZURhc2hhcnJheSIsInN0cm9rZURhc2hvZmZzZXQiLCJ0cmFuc2l0aW9uIiwidmlld0JveCIsInN0cm9rZSIsImZpbGxPcGFjaXR5IiwiMTA0OSIsImNlbnRlciIsInZpZXdCb3hTdHJpbmciLCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwiMTA1MCIsIl9MaW5lIiwiX0xpbmUyIiwiX0NpcmNsZSIsIl9DaXJjbGUyIiwiTGluZSIsIjEwNjIiLCJfcmVxdWVzdCIsIl9yZXF1ZXN0MiIsIl91aWQiLCJfdWlkMiIsIkFqYXhVcGxvYWRlciIsImFueSIsImhlYWRlcnMiLCJjdXN0b21SZXF1ZXN0Iiwid2l0aENyZWRlbnRpYWxzIiwiZ2V0SW5pdGlhbFN0YXRlIiwicmVxcyIsInVwbG9hZEZpbGVzIiwicmVzZXQiLCJjbGljayIsImRhdGFUcmFuc2ZlciIsInBvc3RGaWxlcyIsInNsaWNlIiwicG9zdCIsImJlZm9yZSIsInByb2Nlc3NlZEZpbGUiLCJwcm9jZXNzZWRGaWxlVHlwZSIsImNvbnNvbGUiLCJsb2ciLCJpc01vdW50ZWQiLCJyZXF1ZXN0IiwiZXJyIiwiVGFnIiwiY2xzIiwiZXZlbnRzIiwiMTA2MyIsIl93YXJuaW5nIiwiX3dhcm5pbmcyIiwiSUZSQU1FX1NUWUxFIiwiSWZyYW1lVXBsb2FkZXIiLCJ1cGxvYWRpbmciLCJ1cGRhdGVJZnJhbWVXSCIsImluaXRJZnJhbWUiLCJvbkxvYWQiLCJnZXRJZnJhbWVEb2N1bWVudCIsInNjcmlwdCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5uZXJIVE1MIiwiZW5kVXBsb2FkIiwiZ2V0Rm9ybUlucHV0Tm9kZSIsInN0YXJ0VXBsb2FkIiwiZ2V0SWZyYW1lTm9kZSIsImlmcmFtZSIsImNvbnRlbnREb2N1bWVudCIsImdldEZvcm1Ob2RlIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRGb3JtRGF0YU5vZGUiLCJnZXRGaWxlRm9yTXVsdGlwbGUiLCJnZXRJZnJhbWVIVE1MIiwiZG9tYWluIiwiZG9tYWluU2NyaXB0IiwiZG9tYWluSW5wdXQiLCJpbml0SWZyYW1lU3JjIiwiaWZyYW1lTm9kZSIsIndpbiIsImNvbnRlbnRXaW5kb3ciLCJvcGVuIiwid3JpdGUiLCJvbmNoYW5nZSIsInJvb3ROb2RlIiwib2Zmc2V0SGVpZ2h0IiwiZm9ybU5vZGUiLCJkYXRhU3BhbiIsImlucHV0cyIsImpvaW4iLCJzdWJtaXQiLCJpZnJhbWVTdHlsZSIsIjEwNjQiLCJlbXB0eSIsIl9BamF4VXBsb2FkZXIiLCJfQWpheFVwbG9hZGVyMiIsIl9JZnJhbWVVcGxvYWRlciIsIl9JZnJhbWVVcGxvYWRlcjIiLCJtdWx0aXBhcnQiLCJvblJlYWR5IiwiMTA2NSIsIjEwNjYiLCJnZXRFcnJvciIsIm9wdGlvbiIsInhociIsIm1zZyIsIkVycm9yIiwiZ2V0Qm9keSIsInJlc3BvbnNlVGV4dCIsIlhNTEh0dHBSZXF1ZXN0Iiwib25wcm9ncmVzcyIsInRvdGFsIiwibG9hZGVkIiwiZm9ybURhdGEiLCJhcHBlbmQiLCJvbmVycm9yIiwib25sb2FkIiwic2V0UmVxdWVzdEhlYWRlciIsImgiLCJzZW5kIiwiMTA2NyJdLCJtYXBwaW5ncyI6IkFBQUFBLGNBQWMsSUFFUkMsR0FDQSxTQUFTQyxFQUFRQyxFQUFTQyxH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QUFBLE9BQUFzQixFQUFBek0sUUFBQSxHQUdBeU0sRUFBQTFFLGlCQUFBLG1CQUFBMkUsS0FDQUEsRUFBQTNFLGlCQUFBLEVBR0EsSUFBQUYsR0FBQTRFLEVBQUE1RSxXQUlBLFFBQUFBLEVBQUEscUJBQ0E2RSxFQUFBYSxpQkFBQSxvQ0FHQSxRQUFBQyxLQUFBM0YsR0FDQUEsRUFBQXJaLGVBQUFnZixJQUFBLE9BQUEzRixFQUFBMkYsSUFDQWQsRUFBQWEsaUJBQUFDLEVBQUEzRixFQUFBMkYsR0FLQSxPQUZBZCxHQUFBZSxLQUFBTixJQUdBdlAsTUFBQSxXQUNBOE8sRUFBQTlPLFVBaEdBOWEsT0FBQUMsZUFBQVAsRUFBQSxjQUNBUSxPQUFBLElBRUFSLEVBQUEsV0FBQW1iLEVBaUdBcGIsRUFBQUMsVUFBQSxZOUIwbUdNa3JCLEtBQ04iLCJmaWxlIjoiZGVtby5qcyIsInNvdXJjZXNDb250ZW50IjpbIndlYnBhY2tKc29ucChbN10se1xuXG4vKioqLyA4ODpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXHRcblx0dmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXHRcblx0dmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXHRcblx0dmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmNEaWFsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCk7XG5cdFxuXHR2YXIgX3JjRGlhbG9nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JjRGlhbG9nKTtcblx0XG5cdHZhciBfYWRkRXZlbnRMaXN0ZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpO1xuXHRcblx0dmFyIF9hZGRFdmVudExpc3RlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FkZEV2ZW50TGlzdGVuZXIpO1xuXHRcblx0dmFyIF9idXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBfYnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2J1dHRvbik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblx0XG5cdHZhciBtb3VzZVBvc2l0aW9uID0gdm9pZCAwO1xuXHR2YXIgbW91c2VQb3NpdGlvbkV2ZW50QmluZGVkID0gdm9pZCAwO1xuXHRcblx0dmFyIE1vZGFsID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgICgwLCBfaW5oZXJpdHMzW1wiZGVmYXVsdFwiXSkoTW9kYWwsIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIE1vZGFsKCkge1xuXHQgICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szW1wiZGVmYXVsdFwiXSkodGhpcywgTW9kYWwpO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zW1wiZGVmYXVsdFwiXSkodGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0XG5cdCAgICAgICAgX3RoaXMuaGFuZGxlQ2FuY2VsID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgdmFyIG9uQ2FuY2VsID0gX3RoaXMucHJvcHMub25DYW5jZWw7XG5cdCAgICAgICAgICAgIGlmIChvbkNhbmNlbCkge1xuXHQgICAgICAgICAgICAgICAgb25DYW5jZWwoZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIF90aGlzLmhhbmRsZU9rID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgdmFyIG9uT2sgPSBfdGhpcy5wcm9wcy5vbk9rO1xuXHQgICAgICAgICAgICBpZiAob25Paykge1xuXHQgICAgICAgICAgICAgICAgb25PayhlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcmV0dXJuIF90aGlzO1xuXHQgICAgfVxuXHRcblx0ICAgIE1vZGFsLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgIGlmIChtb3VzZVBvc2l0aW9uRXZlbnRCaW5kZWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyDlj6rmnInngrnlh7vkuovku7bmlK/mjIHku47pvKDmoIfkvY3nva7liqjnlLvlsZXlvIBcblx0ICAgICAgICAoMCwgX2FkZEV2ZW50TGlzdGVuZXIyW1wiZGVmYXVsdFwiXSkoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICBtb3VzZVBvc2l0aW9uID0ge1xuXHQgICAgICAgICAgICAgICAgeDogZS5wYWdlWCxcblx0ICAgICAgICAgICAgICAgIHk6IGUucGFnZVlcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgLy8gMTAwbXMg5YaF5Y+R55Sf6L+H54K55Ye75LqL5Lu277yM5YiZ5LuO54K55Ye75L2N572u5Yqo55S75bGV56S6XG5cdCAgICAgICAgICAgIC8vIOWQpuWImeebtOaOpSB6b29tIOWxleekulxuXHQgICAgICAgICAgICAvLyDov5nmoLflj6/ku6XlhbzlrrnpnZ7ngrnlh7vmlrnlvI/lsZXlvIBcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbW91c2VQb3NpdGlvbiA9IG51bGw7XG5cdCAgICAgICAgICAgIH0sIDEwMCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgbW91c2VQb3NpdGlvbkV2ZW50QmluZGVkID0gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgTW9kYWwucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcblx0ICAgICAgICAgICAgb2tUZXh0ID0gX3Byb3BzLm9rVGV4dCxcblx0ICAgICAgICAgICAgY2FuY2VsVGV4dCA9IF9wcm9wcy5jYW5jZWxUZXh0LFxuXHQgICAgICAgICAgICBjb25maXJtTG9hZGluZyA9IF9wcm9wcy5jb25maXJtTG9hZGluZyxcblx0ICAgICAgICAgICAgZm9vdGVyID0gX3Byb3BzLmZvb3Rlcixcblx0ICAgICAgICAgICAgdmlzaWJsZSA9IF9wcm9wcy52aXNpYmxlO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5jb250ZXh0LmFudExvY2FsZSAmJiB0aGlzLmNvbnRleHQuYW50TG9jYWxlLk1vZGFsKSB7XG5cdCAgICAgICAgICAgIG9rVGV4dCA9IG9rVGV4dCB8fCB0aGlzLmNvbnRleHQuYW50TG9jYWxlLk1vZGFsLm9rVGV4dDtcblx0ICAgICAgICAgICAgY2FuY2VsVGV4dCA9IGNhbmNlbFRleHQgfHwgdGhpcy5jb250ZXh0LmFudExvY2FsZS5Nb2RhbC5jYW5jZWxUZXh0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZGVmYXVsdEZvb3RlciA9IFtfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICBfYnV0dG9uMltcImRlZmF1bHRcIl0sXG5cdCAgICAgICAgICAgIHsga2V5OiAnY2FuY2VsJywgc2l6ZTogJ2xhcmdlJywgb25DbGljazogdGhpcy5oYW5kbGVDYW5jZWwgfSxcblx0ICAgICAgICAgICAgY2FuY2VsVGV4dCB8fCAn5Y+W5raIJ1xuXHQgICAgICAgICksIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgIF9idXR0b24yW1wiZGVmYXVsdFwiXSxcblx0ICAgICAgICAgICAgeyBrZXk6ICdjb25maXJtJywgdHlwZTogJ3ByaW1hcnknLCBzaXplOiAnbGFyZ2UnLCBsb2FkaW5nOiBjb25maXJtTG9hZGluZywgb25DbGljazogdGhpcy5oYW5kbGVPayB9LFxuXHQgICAgICAgICAgICBva1RleHQgfHwgJ+ehruWumidcblx0ICAgICAgICApXTtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfcmNEaWFsb2cyW1wiZGVmYXVsdFwiXSwgKDAsIF9leHRlbmRzM1tcImRlZmF1bHRcIl0pKHsgb25DbG9zZTogdGhpcy5oYW5kbGVDYW5jZWwsIGZvb3RlcjogZm9vdGVyIHx8IGRlZmF1bHRGb290ZXIgfSwgdGhpcy5wcm9wcywgeyB2aXNpYmxlOiB2aXNpYmxlLCBtb3VzZVBvc2l0aW9uOiBtb3VzZVBvc2l0aW9uIH0pKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE1vZGFsO1xuXHR9KF9yZWFjdDJbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IE1vZGFsO1xuXHRcblx0TW9kYWwuZGVmYXVsdFByb3BzID0ge1xuXHQgICAgcHJlZml4Q2xzOiAnYW50LW1vZGFsJyxcblx0ICAgIHdpZHRoOiA1MjAsXG5cdCAgICB0cmFuc2l0aW9uTmFtZTogJ3pvb20nLFxuXHQgICAgbWFza1RyYW5zaXRpb25OYW1lOiAnZmFkZScsXG5cdCAgICBjb25maXJtTG9hZGluZzogZmFsc2UsXG5cdCAgICB2aXNpYmxlOiBmYWxzZVxuXHR9O1xuXHRNb2RhbC5wcm9wVHlwZXMgPSB7XG5cdCAgICBwcmVmaXhDbHM6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgb25PazogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuXHQgICAgb25DYW5jZWw6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIG9rVGV4dDogX3JlYWN0LlByb3BUeXBlcy5ub2RlLFxuXHQgICAgY2FuY2VsVGV4dDogX3JlYWN0LlByb3BUeXBlcy5ub2RlLFxuXHQgICAgd2lkdGg6IF9yZWFjdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuUHJvcFR5cGVzLm51bWJlciwgX3JlYWN0LlByb3BUeXBlcy5zdHJpbmddKSxcblx0ICAgIGNvbmZpcm1Mb2FkaW5nOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG5cdCAgICB2aXNpYmxlOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBhbGlnbjogX3JlYWN0LlByb3BUeXBlcy5vYmplY3QsXG5cdCAgICBmb290ZXI6IF9yZWFjdC5Qcm9wVHlwZXMubm9kZSxcblx0ICAgIHRpdGxlOiBfcmVhY3QuUHJvcFR5cGVzLm5vZGUsXG5cdCAgICBjbG9zYWJsZTogX3JlYWN0LlByb3BUeXBlcy5ib29sXG5cdH07XG5cdE1vZGFsLmNvbnRleHRUeXBlcyA9IHtcblx0ICAgIGFudExvY2FsZTogX3JlYWN0MltcImRlZmF1bHRcIl0uUHJvcFR5cGVzLm9iamVjdFxuXHR9O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMTQ4OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfTW9kYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KTtcblx0XG5cdHZhciBfTW9kYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9kYWwpO1xuXHRcblx0dmFyIF9jb25maXJtID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTApO1xuXHRcblx0dmFyIF9jb25maXJtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmZpcm0pO1xuXHRcblx0dmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0X01vZGFsMltcImRlZmF1bHRcIl0uaW5mbyA9IGZ1bmN0aW9uIChwcm9wcykge1xuXHQgICAgdmFyIGNvbmZpZyA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCB7XG5cdCAgICAgICAgdHlwZTogJ2luZm8nLFxuXHQgICAgICAgIGljb25UeXBlOiAnaW5mby1jaXJjbGUnLFxuXHQgICAgICAgIG9rQ2FuY2VsOiBmYWxzZVxuXHQgICAgfSwgcHJvcHMpO1xuXHQgICAgcmV0dXJuICgwLCBfY29uZmlybTJbXCJkZWZhdWx0XCJdKShjb25maWcpO1xuXHR9O1xuXHRfTW9kYWwyW1wiZGVmYXVsdFwiXS5zdWNjZXNzID0gZnVuY3Rpb24gKHByb3BzKSB7XG5cdCAgICB2YXIgY29uZmlnID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHtcblx0ICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG5cdCAgICAgICAgaWNvblR5cGU6ICdjaGVjay1jaXJjbGUnLFxuXHQgICAgICAgIG9rQ2FuY2VsOiBmYWxzZVxuXHQgICAgfSwgcHJvcHMpO1xuXHQgICAgcmV0dXJuICgwLCBfY29uZmlybTJbXCJkZWZhdWx0XCJdKShjb25maWcpO1xuXHR9O1xuXHRfTW9kYWwyW1wiZGVmYXVsdFwiXS5lcnJvciA9IGZ1bmN0aW9uIChwcm9wcykge1xuXHQgICAgdmFyIGNvbmZpZyA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCB7XG5cdCAgICAgICAgdHlwZTogJ2Vycm9yJyxcblx0ICAgICAgICBpY29uVHlwZTogJ2Nyb3NzLWNpcmNsZScsXG5cdCAgICAgICAgb2tDYW5jZWw6IGZhbHNlXG5cdCAgICB9LCBwcm9wcyk7XG5cdCAgICByZXR1cm4gKDAsIF9jb25maXJtMltcImRlZmF1bHRcIl0pKGNvbmZpZyk7XG5cdH07XG5cdF9Nb2RhbDJbXCJkZWZhdWx0XCJdLndhcm5pbmcgPSBfTW9kYWwyW1wiZGVmYXVsdFwiXS53YXJuID0gZnVuY3Rpb24gKHByb3BzKSB7XG5cdCAgICB2YXIgY29uZmlnID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHtcblx0ICAgICAgICB0eXBlOiAnd2FybmluZycsXG5cdCAgICAgICAgaWNvblR5cGU6ICdleGNsYW1hdGlvbi1jaXJjbGUnLFxuXHQgICAgICAgIG9rQ2FuY2VsOiBmYWxzZVxuXHQgICAgfSwgcHJvcHMpO1xuXHQgICAgcmV0dXJuICgwLCBfY29uZmlybTJbXCJkZWZhdWx0XCJdKShjb25maWcpO1xuXHR9O1xuXHRfTW9kYWwyW1wiZGVmYXVsdFwiXS5jb25maXJtID0gZnVuY3Rpb24gKHByb3BzKSB7XG5cdCAgICB2YXIgY29uZmlnID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHtcblx0ICAgICAgICB0eXBlOiAnY29uZmlybScsXG5cdCAgICAgICAgb2tDYW5jZWw6IHRydWVcblx0ICAgIH0sIHByb3BzKTtcblx0ICAgIHJldHVybiAoMCwgX2NvbmZpcm0yW1wiZGVmYXVsdFwiXSkoY29uZmlnKTtcblx0fTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfTW9kYWwyW1wiZGVmYXVsdFwiXTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG5cbi8qKiovIDE0OTpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDEpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cbi8qKiovIH0sXG5cbi8qKiovIDE4OTpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF9jbGFzc0NhbGxDaGVjazIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXHRcblx0dmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXHRcblx0dmFyIF9pbmhlcml0czIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0dmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHR2YXIgX2J1dHRvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0dmFyIF9idXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYnV0dG9uKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0dmFyIEFjdGlvbkJ1dHRvbiA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG5cdCAgICAoMCwgX2luaGVyaXRzM1tcImRlZmF1bHRcIl0pKEFjdGlvbkJ1dHRvbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gQWN0aW9uQnV0dG9uKHByb3BzKSB7XG5cdCAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazNbXCJkZWZhdWx0XCJdKSh0aGlzLCBBY3Rpb25CdXR0b24pO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zW1wiZGVmYXVsdFwiXSkodGhpcywgX1JlYWN0JENvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzKSk7XG5cdFxuXHQgICAgICAgIF90aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHZhciBfdGhpcyRwcm9wcyA9IF90aGlzLnByb3BzLFxuXHQgICAgICAgICAgICAgICAgYWN0aW9uRm4gPSBfdGhpcyRwcm9wcy5hY3Rpb25Gbixcblx0ICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwgPSBfdGhpcyRwcm9wcy5jbG9zZU1vZGFsO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGFjdGlvbkZuKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmV0ID0gdm9pZCAwO1xuXHQgICAgICAgICAgICAgICAgaWYgKGFjdGlvbkZuLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldCA9IGFjdGlvbkZuKGNsb3NlTW9kYWwpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXQgPSBhY3Rpb25GbigpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghcmV0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBpZiAocmV0ICYmIHJldC50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoeyBsb2FkaW5nOiB0cnVlIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldC50aGVuKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXQncyB1bm5lY2Vzc2FyeSB0byBzZXQgbG9hZGluZz1mYWxzZSwgZm9yIHRoZSBNb2RhbCB3aWxsIGJlIHVubW91bnRlZCBhZnRlciBjbG9zZS5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZXRTdGF0ZSh7IGxvYWRpbmc6IGZhbHNlIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU1vZGFsLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgX3RoaXMuc3RhdGUgPSB7XG5cdCAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlXG5cdCAgICAgICAgfTtcblx0ICAgICAgICByZXR1cm4gX3RoaXM7XG5cdCAgICB9XG5cdFxuXHQgICAgQWN0aW9uQnV0dG9uLnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLmF1dG9Gb2N1cykge1xuXHQgICAgICAgICAgICB2YXIgJHRoaXMgPSBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS5maW5kRE9NTm9kZSh0aGlzKTtcblx0ICAgICAgICAgICAgdGhpcy50aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcy5mb2N1cygpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIEFjdGlvbkJ1dHRvbi5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpO1xuXHQgICAgfTtcblx0XG5cdCAgICBBY3Rpb25CdXR0b24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcblx0ICAgICAgICAgICAgdHlwZSA9IF9wcm9wcy50eXBlLFxuXHQgICAgICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbjtcblx0XG5cdCAgICAgICAgdmFyIGxvYWRpbmcgPSB0aGlzLnN0YXRlLmxvYWRpbmc7XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgIF9idXR0b24yW1wiZGVmYXVsdFwiXSxcblx0ICAgICAgICAgICAgeyB0eXBlOiB0eXBlLCBzaXplOiAnbGFyZ2UnLCBvbkNsaWNrOiB0aGlzLm9uQ2xpY2ssIGxvYWRpbmc6IGxvYWRpbmcgfSxcblx0ICAgICAgICAgICAgY2hpbGRyZW5cblx0ICAgICAgICApO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQWN0aW9uQnV0dG9uO1xuXHR9KF9yZWFjdDJbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IEFjdGlvbkJ1dHRvbjtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG5cbi8qKiovIDE5MDpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5Mik7XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IGNvbmZpcm07XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cdFxuXHR2YXIgX29iamVjdEFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXHRcblx0dmFyIF9pY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaWNvbik7XG5cdFxuXHR2YXIgX01vZGFsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OCk7XG5cdFxuXHR2YXIgX01vZGFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX01vZGFsKTtcblx0XG5cdHZhciBfQWN0aW9uQnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODkpO1xuXHRcblx0dmFyIF9BY3Rpb25CdXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWN0aW9uQnV0dG9uKTtcblx0XG5cdHZhciBfbG9jYWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTEpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBjb25maXJtKGNvbmZpZykge1xuXHQgICAgdmFyIHByb3BzID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoeyBpY29uVHlwZTogJ3F1ZXN0aW9uLWNpcmNsZScgfSwgY29uZmlnKTtcblx0ICAgIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMgfHwgJ2FudC1jb25maXJtJztcblx0ICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcblx0ICAgIHZhciB3aWR0aCA9IHByb3BzLndpZHRoIHx8IDQxNjtcblx0ICAgIHZhciBzdHlsZSA9IHByb3BzLnN0eWxlIHx8IHt9O1xuXHQgICAgLy8g6buY6K6k5Li6IGZhbHNl77yM5L+d5oyB5pen54mI6buY6K6k6KGM5Li6XG5cdCAgICB2YXIgbWFza0Nsb3NhYmxlID0gcHJvcHMubWFza0Nsb3NhYmxlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IHByb3BzLm1hc2tDbG9zYWJsZTtcblx0ICAgIC8vIOm7mOiupOS4uiB0cnVl77yM5L+d5oyB5ZCR5LiL5YW85a65XG5cdCAgICBpZiAoISgnb2tDYW5jZWwnIGluIHByb3BzKSkge1xuXHQgICAgICAgIHByb3BzLm9rQ2FuY2VsID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHZhciBydW50aW1lTG9jYWxlID0gKDAsIF9sb2NhbGUuZ2V0Q29uZmlybUxvY2FsZSkoKTtcblx0ICAgIHByb3BzLm9rVGV4dCA9IHByb3BzLm9rVGV4dCB8fCAocHJvcHMub2tDYW5jZWwgPyBydW50aW1lTG9jYWxlLm9rVGV4dCA6IHJ1bnRpbWVMb2NhbGUuanVzdE9rVGV4dCk7XG5cdCAgICBwcm9wcy5jYW5jZWxUZXh0ID0gcHJvcHMuY2FuY2VsVGV4dCB8fCBydW50aW1lTG9jYWxlLmNhbmNlbFRleHQ7XG5cdCAgICBmdW5jdGlvbiBjbG9zZSgpIHtcblx0ICAgICAgICB2YXIgdW5tb3VudFJlc3VsdCA9IF9yZWFjdERvbTJbXCJkZWZhdWx0XCJdLnVubW91bnRDb21wb25lbnRBdE5vZGUoZGl2KTtcblx0ICAgICAgICBpZiAodW5tb3VudFJlc3VsdCAmJiBkaXYucGFyZW50Tm9kZSkge1xuXHQgICAgICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciBib2R5ID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAnZGl2Jyxcblx0ICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1ib2R5JyB9LFxuXHQgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiBwcm9wcy5pY29uVHlwZSB9KSxcblx0ICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLXRpdGxlJyB9LFxuXHQgICAgICAgICAgICBwcm9wcy50aXRsZVxuXHQgICAgICAgICksXG5cdCAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWNvbnRlbnQnIH0sXG5cdCAgICAgICAgICAgIHByb3BzLmNvbnRlbnRcblx0ICAgICAgICApXG5cdCAgICApO1xuXHQgICAgdmFyIGZvb3RlciA9IG51bGw7XG5cdCAgICBpZiAocHJvcHMub2tDYW5jZWwpIHtcblx0ICAgICAgICBmb290ZXIgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctYnRucycgfSxcblx0ICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgIF9BY3Rpb25CdXR0b24yW1wiZGVmYXVsdFwiXSxcblx0ICAgICAgICAgICAgICAgIHsgYWN0aW9uRm46IHByb3BzLm9uQ2FuY2VsLCBjbG9zZU1vZGFsOiBjbG9zZSB9LFxuXHQgICAgICAgICAgICAgICAgcHJvcHMuY2FuY2VsVGV4dFxuXHQgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgX0FjdGlvbkJ1dHRvbjJbXCJkZWZhdWx0XCJdLFxuXHQgICAgICAgICAgICAgICAgeyB0eXBlOiAncHJpbWFyeScsIGFjdGlvbkZuOiBwcm9wcy5vbk9rLCBjbG9zZU1vZGFsOiBjbG9zZSwgYXV0b0ZvY3VzOiB0cnVlIH0sXG5cdCAgICAgICAgICAgICAgICBwcm9wcy5va1RleHRcblx0ICAgICAgICAgICAgKVxuXHQgICAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvb3RlciA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1idG5zJyB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgX0FjdGlvbkJ1dHRvbjJbXCJkZWZhdWx0XCJdLFxuXHQgICAgICAgICAgICAgICAgeyB0eXBlOiAncHJpbWFyeScsIGFjdGlvbkZuOiBwcm9wcy5vbk9rLCBjbG9zZU1vZGFsOiBjbG9zZSwgYXV0b0ZvY3VzOiB0cnVlIH0sXG5cdCAgICAgICAgICAgICAgICBwcm9wcy5va1RleHRcblx0ICAgICAgICAgICAgKVxuXHQgICAgICAgICk7XG5cdCAgICB9XG5cdCAgICB2YXIgY2xhc3NTdHJpbmcgPSAoMCwgX2NsYXNzbmFtZXMyW1wiZGVmYXVsdFwiXSkocHJlZml4Q2xzLCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKHt9LCBwcmVmaXhDbHMgKyAnLScgKyBwcm9wcy50eXBlLCB0cnVlKSwgcHJvcHMuY2xhc3NOYW1lKTtcblx0ICAgIF9yZWFjdERvbTJbXCJkZWZhdWx0XCJdLnJlbmRlcihfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgIF9Nb2RhbDJbXCJkZWZhdWx0XCJdLFxuXHQgICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc1N0cmluZywgb25DYW5jZWw6IGNsb3NlLCB2aXNpYmxlOiB0cnVlLCB0aXRsZTogJycsIHRyYW5zaXRpb25OYW1lOiAnem9vbScsIGZvb3RlcjogJycsIG1hc2tUcmFuc2l0aW9uTmFtZTogJ2ZhZGUnLCBtYXNrQ2xvc2FibGU6IG1hc2tDbG9zYWJsZSwgc3R5bGU6IHN0eWxlLCB3aWR0aDogd2lkdGggfSxcblx0ICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctYm9keS13cmFwcGVyJyB9LFxuXHQgICAgICAgICAgICBib2R5LFxuXHQgICAgICAgICAgICAnICcsXG5cdCAgICAgICAgICAgIGZvb3RlclxuXHQgICAgICAgIClcblx0ICAgICksIGRpdik7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAgIGRlc3Ryb3k6IGNsb3NlXG5cdCAgICB9O1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAxOTE6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmNoYW5nZUNvbmZpcm1Mb2NhbGUgPSBjaGFuZ2VDb25maXJtTG9jYWxlO1xuXHRleHBvcnRzLmdldENvbmZpcm1Mb2NhbGUgPSBnZXRDb25maXJtTG9jYWxlO1xuXHRcblx0dmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0dmFyIGRlZmF1bHRMb2NhbGUgPSB7XG5cdCAgICBva1RleHQ6ICfnoa7lrponLFxuXHQgICAgY2FuY2VsVGV4dDogJ+WPlua2iCcsXG5cdCAgICBqdXN0T2tUZXh0OiAn55+l6YGT5LqGJ1xuXHR9O1xuXHR2YXIgcnVudGltZUxvY2FsZSA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCBkZWZhdWx0TG9jYWxlKTtcblx0ZnVuY3Rpb24gY2hhbmdlQ29uZmlybUxvY2FsZShuZXdMb2NhbGUpIHtcblx0ICAgIGlmIChuZXdMb2NhbGUpIHtcblx0ICAgICAgICBydW50aW1lTG9jYWxlID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHJ1bnRpbWVMb2NhbGUsIG5ld0xvY2FsZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJ1bnRpbWVMb2NhbGUgPSAoMCwgX29iamVjdEFzc2lnbjJbXCJkZWZhdWx0XCJdKSh7fSwgZGVmYXVsdExvY2FsZSk7XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gZ2V0Q29uZmlybUxvY2FsZSgpIHtcblx0ICAgIHJldHVybiBydW50aW1lTG9jYWxlO1xuXHR9XG5cbi8qKiovIH0sXG5cbi8qKiovIDE5MzpcblsxMjE2LCAyMDJdLFxuXG4vKioqLyAyMDE6XG4xMCxcblxuLyoqKi8gMjAyOlxuMTAsXG5cbi8qKiovIDIwOTpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yZWFjdERvbSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHR2YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblx0XG5cdHZhciBfS2V5Q29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEyKTtcblx0XG5cdHZhciBfS2V5Q29kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9LZXlDb2RlKTtcblx0XG5cdHZhciBfcmNBbmltYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nik7XG5cdFxuXHR2YXIgX3JjQW5pbWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yY0FuaW1hdGUpO1xuXHRcblx0dmFyIF9MYXp5UmVuZGVyQm94ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTEpO1xuXHRcblx0dmFyIF9MYXp5UmVuZGVyQm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xhenlSZW5kZXJCb3gpO1xuXHRcblx0dmFyIF9nZXRTY3JvbGxCYXJTaXplID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTQpO1xuXHRcblx0dmFyIF9nZXRTY3JvbGxCYXJTaXplMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldFNjcm9sbEJhclNpemUpO1xuXHRcblx0dmFyIF9vYmplY3RBc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0dmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0dmFyIF9fYXNzaWduID0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2Fzc2lnbiB8fCBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0KSB7XG5cdCAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcblx0ICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIGZvciAodmFyIHAgaW4gcykge1xuXHQgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdDtcblx0fTtcblx0XG5cdHZhciB1dWlkID0gMDtcblx0dmFyIG9wZW5Db3VudCA9IDA7XG5cdC8qIGVzbGludCByZWFjdC9uby1pcy1tb3VudGVkOjAgKi9cblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdGZ1bmN0aW9uIGdldFNjcm9sbCh3LCB0b3ApIHtcblx0ICAgIHZhciByZXQgPSB3WydwYWdlJyArICh0b3AgPyAnWScgOiAnWCcpICsgJ09mZnNldCddO1xuXHQgICAgdmFyIG1ldGhvZCA9ICdzY3JvbGwnICsgKHRvcCA/ICdUb3AnIDogJ0xlZnQnKTtcblx0ICAgIGlmICh0eXBlb2YgcmV0ICE9PSAnbnVtYmVyJykge1xuXHQgICAgICAgIHZhciBkID0gdy5kb2N1bWVudDtcblx0ICAgICAgICByZXQgPSBkLmRvY3VtZW50RWxlbWVudFttZXRob2RdO1xuXHQgICAgICAgIGlmICh0eXBlb2YgcmV0ICE9PSAnbnVtYmVyJykge1xuXHQgICAgICAgICAgICByZXQgPSBkLmJvZHlbbWV0aG9kXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmV0O1xuXHR9XG5cdGZ1bmN0aW9uIHNldFRyYW5zZm9ybU9yaWdpbihub2RlLCB2YWx1ZSkge1xuXHQgICAgdmFyIHN0eWxlID0gbm9kZS5zdHlsZTtcblx0ICAgIFsnV2Via2l0JywgJ01veicsICdNcycsICdtcyddLmZvckVhY2goZnVuY3Rpb24gKHByZWZpeCkge1xuXHQgICAgICAgIHN0eWxlW3ByZWZpeCArICdUcmFuc2Zvcm1PcmlnaW4nXSA9IHZhbHVlO1xuXHQgICAgfSk7XG5cdCAgICBzdHlsZVsndHJhbnNmb3JtT3JpZ2luJ10gPSB2YWx1ZTtcblx0fVxuXHRmdW5jdGlvbiBvZmZzZXQoZWwpIHtcblx0ICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdCAgICB2YXIgcG9zID0ge1xuXHQgICAgICAgIGxlZnQ6IHJlY3QubGVmdCxcblx0ICAgICAgICB0b3A6IHJlY3QudG9wXG5cdCAgICB9O1xuXHQgICAgdmFyIGRvYyA9IGVsLm93bmVyRG9jdW1lbnQ7XG5cdCAgICB2YXIgdyA9IGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuXHQgICAgcG9zLmxlZnQgKz0gZ2V0U2Nyb2xsKHcpO1xuXHQgICAgcG9zLnRvcCArPSBnZXRTY3JvbGwodywgdHJ1ZSk7XG5cdCAgICByZXR1cm4gcG9zO1xuXHR9XG5cdHZhciBEaWFsb2cgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ0RpYWxvZycsXG5cdCAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBhZnRlckNsb3NlOiBub29wLFxuXHQgICAgICAgICAgICBjbGFzc05hbWU6ICcnLFxuXHQgICAgICAgICAgICBtYXNrOiB0cnVlLFxuXHQgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcblx0ICAgICAgICAgICAga2V5Ym9hcmQ6IHRydWUsXG5cdCAgICAgICAgICAgIGNsb3NhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICBtYXNrQ2xvc2FibGU6IHRydWUsXG5cdCAgICAgICAgICAgIHByZWZpeENsczogJ3JjLWRpYWxvZycsXG5cdCAgICAgICAgICAgIG9uQ2xvc2U6IG5vb3Bcblx0ICAgICAgICB9O1xuXHQgICAgfSxcblx0ICAgIGNvbXBvbmVudFdpbGxNb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbE1vdW50KCkge1xuXHQgICAgICAgIHRoaXMuaW5UcmFuc2l0aW9uID0gZmFsc2U7XG5cdCAgICAgICAgdGhpcy50aXRsZUlkID0gJ3JjRGlhbG9nVGl0bGUnICsgdXVpZCsrO1xuXHQgICAgfSxcblx0ICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgICAgICB0aGlzLmNvbXBvbmVudERpZFVwZGF0ZSh7fSk7XG5cdCAgICB9LFxuXHQgICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG5cdCAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblx0ICAgICAgICB2YXIgbW91c2VQb3NpdGlvbiA9IHRoaXMucHJvcHMubW91c2VQb3NpdGlvbjtcblx0ICAgICAgICBpZiAocHJvcHMudmlzaWJsZSkge1xuXHQgICAgICAgICAgICAvLyBmaXJzdCBzaG93XG5cdCAgICAgICAgICAgIGlmICghcHJldlByb3BzLnZpc2libGUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMub3BlblRpbWUgPSBEYXRlLm5vdygpO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5sYXN0T3V0U2lkZUZvY3VzTm9kZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmFkZFNjcm9sbGluZ0VmZmVjdCgpO1xuXHQgICAgICAgICAgICAgICAgdGhpcy5yZWZzLndyYXAuZm9jdXMoKTtcblx0ICAgICAgICAgICAgICAgIHZhciBkaWFsb2dOb2RlID0gX3JlYWN0RG9tMltcImRlZmF1bHRcIl0uZmluZERPTU5vZGUodGhpcy5yZWZzLmRpYWxvZyk7XG5cdCAgICAgICAgICAgICAgICBpZiAobW91c2VQb3NpdGlvbikge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBlbE9mZnNldCA9IG9mZnNldChkaWFsb2dOb2RlKTtcblx0ICAgICAgICAgICAgICAgICAgICBzZXRUcmFuc2Zvcm1PcmlnaW4oZGlhbG9nTm9kZSwgbW91c2VQb3NpdGlvbi54IC0gZWxPZmZzZXQubGVmdCArICdweCAnICsgKG1vdXNlUG9zaXRpb24ueSAtIGVsT2Zmc2V0LnRvcCkgKyAncHgnKTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNmb3JtT3JpZ2luKGRpYWxvZ05vZGUsICcnKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAocHJldlByb3BzLnZpc2libGUpIHtcblx0ICAgICAgICAgICAgdGhpcy5pblRyYW5zaXRpb24gPSB0cnVlO1xuXHQgICAgICAgICAgICBpZiAocHJvcHMubWFzayAmJiB0aGlzLmxhc3RPdXRTaWRlRm9jdXNOb2RlKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdE91dFNpZGVGb2N1c05vZGUuZm9jdXMoKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RPdXRTaWRlRm9jdXNOb2RlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHRoaXMubGFzdE91dFNpZGVGb2N1c05vZGUgPSBudWxsO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcblx0ICAgICAgICBpZiAodGhpcy5wcm9wcy52aXNpYmxlIHx8IHRoaXMuaW5UcmFuc2l0aW9uKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlU2Nyb2xsaW5nRWZmZWN0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIG9uQW5pbWF0ZUxlYXZlOiBmdW5jdGlvbiBvbkFuaW1hdGVMZWF2ZSgpIHtcblx0ICAgICAgICAvLyBuZWVkIGRlbW8/XG5cdCAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC9kaWFsb2cvcHVsbC8yOFxuXHQgICAgICAgIGlmICh0aGlzLnJlZnMud3JhcCkge1xuXHQgICAgICAgICAgICB0aGlzLnJlZnMud3JhcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmluVHJhbnNpdGlvbiA9IGZhbHNlO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlU2Nyb2xsaW5nRWZmZWN0KCk7XG5cdCAgICAgICAgdGhpcy5wcm9wcy5hZnRlckNsb3NlKCk7XG5cdCAgICB9LFxuXHQgICAgb25NYXNrQ2xpY2s6IGZ1bmN0aW9uIG9uTWFza0NsaWNrKGUpIHtcblx0ICAgICAgICAvLyBhbmRyb2lkIHRyaWdnZXIgY2xpY2sgb24gb3BlbiAoZmFzdGNsaWNrPz8pXG5cdCAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLm9wZW5UaW1lIDwgMzAwKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZShlKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZSkge1xuXHQgICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG5cdCAgICAgICAgaWYgKHByb3BzLmtleWJvYXJkICYmIGUua2V5Q29kZSA9PT0gX0tleUNvZGUyW1wiZGVmYXVsdFwiXS5FU0MpIHtcblx0ICAgICAgICAgICAgdGhpcy5jbG9zZShlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8ga2VlcCBmb2N1cyBpbnNpZGUgZGlhbG9nXG5cdCAgICAgICAgaWYgKHByb3BzLnZpc2libGUpIHtcblx0ICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gX0tleUNvZGUyW1wiZGVmYXVsdFwiXS5UQUIpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0ICAgICAgICAgICAgICAgIHZhciBkaWFsb2dSb290ID0gdGhpcy5yZWZzLndyYXA7XG5cdCAgICAgICAgICAgICAgICB2YXIgc2VudGluZWwgPSB0aGlzLnJlZnMuc2VudGluZWw7XG5cdCAgICAgICAgICAgICAgICBpZiAoZS5zaGlmdEtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50ID09PSBkaWFsb2dSb290KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHNlbnRpbmVsLmZvY3VzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVFbGVtZW50ID09PSB0aGlzLnJlZnMuc2VudGluZWwpIHtcblx0ICAgICAgICAgICAgICAgICAgICBkaWFsb2dSb290LmZvY3VzKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgZ2V0RGlhbG9nRWxlbWVudDogZnVuY3Rpb24gZ2V0RGlhbG9nRWxlbWVudCgpIHtcblx0ICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgIHZhciBjbG9zYWJsZSA9IHByb3BzLmNsb3NhYmxlO1xuXHQgICAgICAgIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHM7XG5cdCAgICAgICAgdmFyIGRlc3QgPSB7fTtcblx0ICAgICAgICBpZiAocHJvcHMud2lkdGggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICBkZXN0LndpZHRoID0gcHJvcHMud2lkdGg7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChwcm9wcy5oZWlnaHQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICBkZXN0LmhlaWdodCA9IHByb3BzLmhlaWdodDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGZvb3RlciA9IHZvaWQgMDtcblx0ICAgICAgICBpZiAocHJvcHMuZm9vdGVyKSB7XG5cdCAgICAgICAgICAgIGZvb3RlciA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctZm9vdGVyJywgcmVmOiBcImZvb3RlclwiIH0sIHByb3BzLmZvb3Rlcik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBoZWFkZXIgPSB2b2lkIDA7XG5cdCAgICAgICAgaWYgKHByb3BzLnRpdGxlKSB7XG5cdCAgICAgICAgICAgIGhlYWRlciA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctaGVhZGVyJywgcmVmOiBcImhlYWRlclwiIH0sIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctdGl0bGUnLCBpZDogdGhpcy50aXRsZUlkIH0sIHByb3BzLnRpdGxlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBjbG9zZXIgPSB2b2lkIDA7XG5cdCAgICAgICAgaWYgKGNsb3NhYmxlKSB7XG5cdCAgICAgICAgICAgIGNsb3NlciA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBvbkNsaWNrOiB0aGlzLmNsb3NlLCBcImFyaWEtbGFiZWxcIjogXCJDbG9zZVwiLCBjbGFzc05hbWU6IHByZWZpeENscyArICctY2xvc2UnIH0sIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWNsb3NlLXgnIH0pKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHN0eWxlID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHByb3BzLnN0eWxlLCBkZXN0KTtcblx0ICAgICAgICB2YXIgdHJhbnNpdGlvbk5hbWUgPSB0aGlzLmdldFRyYW5zaXRpb25OYW1lKCk7XG5cdCAgICAgICAgdmFyIGRpYWxvZ0VsZW1lbnQgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9MYXp5UmVuZGVyQm94MltcImRlZmF1bHRcIl0sIHsga2V5OiBcImRpYWxvZy1lbGVtZW50XCIsIHJvbGU6IFwiZG9jdW1lbnRcIiwgcmVmOiBcImRpYWxvZ1wiLCBzdHlsZTogc3R5bGUsIGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJyAnICsgKHByb3BzLmNsYXNzTmFtZSB8fCAnJyksIHZpc2libGU6IHByb3BzLnZpc2libGUgfSwgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1jb250ZW50JyB9LCBjbG9zZXIsIGhlYWRlciwgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCBfX2Fzc2lnbih7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1ib2R5Jywgc3R5bGU6IHByb3BzLmJvZHlTdHlsZSwgcmVmOiBcImJvZHlcIiB9LCBwcm9wcy5ib2R5UHJvcHMpLCBwcm9wcy5jaGlsZHJlbiksIGZvb3RlciksIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyB0YWJJbmRleDogMCwgcmVmOiBcInNlbnRpbmVsXCIsIHN0eWxlOiB7IHdpZHRoOiAwLCBoZWlnaHQ6IDAsIG92ZXJmbG93OiAnaGlkZGVuJyB9IH0sIFwic2VudGluZWxcIikpO1xuXHQgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9yY0FuaW1hdGUyW1wiZGVmYXVsdFwiXSwgeyBrZXk6IFwiZGlhbG9nXCIsIHNob3dQcm9wOiBcInZpc2libGVcIiwgb25MZWF2ZTogdGhpcy5vbkFuaW1hdGVMZWF2ZSwgdHJhbnNpdGlvbk5hbWU6IHRyYW5zaXRpb25OYW1lLCBjb21wb25lbnQ6IFwiXCIsIHRyYW5zaXRpb25BcHBlYXI6IHRydWUgfSwgZGlhbG9nRWxlbWVudCk7XG5cdCAgICB9LFxuXHQgICAgZ2V0WkluZGV4U3R5bGU6IGZ1bmN0aW9uIGdldFpJbmRleFN0eWxlKCkge1xuXHQgICAgICAgIHZhciBzdHlsZSA9IHt9O1xuXHQgICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG5cdCAgICAgICAgaWYgKHByb3BzLnpJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgIHN0eWxlLnpJbmRleCA9IHByb3BzLnpJbmRleDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHN0eWxlO1xuXHQgICAgfSxcblx0ICAgIGdldFdyYXBTdHlsZTogZnVuY3Rpb24gZ2V0V3JhcFN0eWxlKCkge1xuXHQgICAgICAgIHJldHVybiAoMCwgX29iamVjdEFzc2lnbjJbXCJkZWZhdWx0XCJdKSh7fSwgdGhpcy5nZXRaSW5kZXhTdHlsZSgpLCB0aGlzLnByb3BzLndyYXBTdHlsZSk7XG5cdCAgICB9LFxuXHQgICAgZ2V0TWFza1N0eWxlOiBmdW5jdGlvbiBnZXRNYXNrU3R5bGUoKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCB0aGlzLmdldFpJbmRleFN0eWxlKCksIHRoaXMucHJvcHMubWFza1N0eWxlKTtcblx0ICAgIH0sXG5cdCAgICBnZXRNYXNrRWxlbWVudDogZnVuY3Rpb24gZ2V0TWFza0VsZW1lbnQoKSB7XG5cdCAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblx0ICAgICAgICB2YXIgbWFza0VsZW1lbnQgPSB2b2lkIDA7XG5cdCAgICAgICAgaWYgKHByb3BzLm1hc2spIHtcblx0ICAgICAgICAgICAgdmFyIG1hc2tUcmFuc2l0aW9uID0gdGhpcy5nZXRNYXNrVHJhbnNpdGlvbk5hbWUoKTtcblx0ICAgICAgICAgICAgbWFza0VsZW1lbnQgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9MYXp5UmVuZGVyQm94MltcImRlZmF1bHRcIl0sIF9fYXNzaWduKHsgc3R5bGU6IHRoaXMuZ2V0TWFza1N0eWxlKCksIGtleTogXCJtYXNrXCIsIGNsYXNzTmFtZTogcHJvcHMucHJlZml4Q2xzICsgJy1tYXNrJywgaGlkZGVuQ2xhc3NOYW1lOiBwcm9wcy5wcmVmaXhDbHMgKyAnLW1hc2staGlkZGVuJywgdmlzaWJsZTogcHJvcHMudmlzaWJsZSB9LCBwcm9wcy5tYXNrUHJvcHMpKTtcblx0ICAgICAgICAgICAgaWYgKG1hc2tUcmFuc2l0aW9uKSB7XG5cdCAgICAgICAgICAgICAgICBtYXNrRWxlbWVudCA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX3JjQW5pbWF0ZTJbXCJkZWZhdWx0XCJdLCB7IGtleTogXCJtYXNrXCIsIHNob3dQcm9wOiBcInZpc2libGVcIiwgdHJhbnNpdGlvbkFwcGVhcjogdHJ1ZSwgY29tcG9uZW50OiBcIlwiLCB0cmFuc2l0aW9uTmFtZTogbWFza1RyYW5zaXRpb24gfSwgbWFza0VsZW1lbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBtYXNrRWxlbWVudDtcblx0ICAgIH0sXG5cdCAgICBnZXRNYXNrVHJhbnNpdGlvbk5hbWU6IGZ1bmN0aW9uIGdldE1hc2tUcmFuc2l0aW9uTmFtZSgpIHtcblx0ICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgIHZhciB0cmFuc2l0aW9uTmFtZSA9IHByb3BzLm1hc2tUcmFuc2l0aW9uTmFtZTtcblx0ICAgICAgICB2YXIgYW5pbWF0aW9uID0gcHJvcHMubWFza0FuaW1hdGlvbjtcblx0ICAgICAgICBpZiAoIXRyYW5zaXRpb25OYW1lICYmIGFuaW1hdGlvbikge1xuXHQgICAgICAgICAgICB0cmFuc2l0aW9uTmFtZSA9IHByb3BzLnByZWZpeENscyArICctJyArIGFuaW1hdGlvbjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25OYW1lO1xuXHQgICAgfSxcblx0ICAgIGdldFRyYW5zaXRpb25OYW1lOiBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uTmFtZSgpIHtcblx0ICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgIHZhciB0cmFuc2l0aW9uTmFtZSA9IHByb3BzLnRyYW5zaXRpb25OYW1lO1xuXHQgICAgICAgIHZhciBhbmltYXRpb24gPSBwcm9wcy5hbmltYXRpb247XG5cdCAgICAgICAgaWYgKCF0cmFuc2l0aW9uTmFtZSAmJiBhbmltYXRpb24pIHtcblx0ICAgICAgICAgICAgdHJhbnNpdGlvbk5hbWUgPSBwcm9wcy5wcmVmaXhDbHMgKyAnLScgKyBhbmltYXRpb247XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB0cmFuc2l0aW9uTmFtZTtcblx0ICAgIH0sXG5cdCAgICBnZXRFbGVtZW50OiBmdW5jdGlvbiBnZXRFbGVtZW50KHBhcnQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5yZWZzW3BhcnRdO1xuXHQgICAgfSxcblx0ICAgIHNldFNjcm9sbGJhcjogZnVuY3Rpb24gc2V0U2Nyb2xsYmFyKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmIHRoaXMuc2Nyb2xsYmFyV2lkdGggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IHRoaXMuc2Nyb2xsYmFyV2lkdGggKyAncHgnO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBhZGRTY3JvbGxpbmdFZmZlY3Q6IGZ1bmN0aW9uIGFkZFNjcm9sbGluZ0VmZmVjdCgpIHtcblx0ICAgICAgICBvcGVuQ291bnQrKztcblx0ICAgICAgICBpZiAob3BlbkNvdW50ICE9PSAxKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5jaGVja1Njcm9sbGJhcigpO1xuXHQgICAgICAgIHRoaXMuc2V0U2Nyb2xsYmFyKCk7XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXHQgICAgICAgIC8vIHRoaXMuYWRqdXN0RGlhbG9nKCk7XG5cdCAgICB9LFxuXHQgICAgcmVtb3ZlU2Nyb2xsaW5nRWZmZWN0OiBmdW5jdGlvbiByZW1vdmVTY3JvbGxpbmdFZmZlY3QoKSB7XG5cdCAgICAgICAgb3BlbkNvdW50LS07XG5cdCAgICAgICAgaWYgKG9wZW5Db3VudCAhPT0gMCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcblx0ICAgICAgICB0aGlzLnJlc2V0U2Nyb2xsYmFyKCk7XG5cdCAgICAgICAgLy8gdGhpcy5yZXNldEFkanVzdG1lbnRzKCk7XG5cdCAgICB9LFxuXHQgICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKGUpIHtcblx0ICAgICAgICB0aGlzLnByb3BzLm9uQ2xvc2UoZSk7XG5cdCAgICB9LFxuXHQgICAgY2hlY2tTY3JvbGxiYXI6IGZ1bmN0aW9uIGNoZWNrU2Nyb2xsYmFyKCkge1xuXHQgICAgICAgIHZhciBmdWxsV2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcblx0ICAgICAgICBpZiAoIWZ1bGxXaW5kb3dXaWR0aCkge1xuXHQgICAgICAgICAgICB2YXIgZG9jdW1lbnRFbGVtZW50UmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgICAgICAgICAgZnVsbFdpbmRvd1dpZHRoID0gZG9jdW1lbnRFbGVtZW50UmVjdC5yaWdodCAtIE1hdGguYWJzKGRvY3VtZW50RWxlbWVudFJlY3QubGVmdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcgPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIDwgZnVsbFdpbmRvd1dpZHRoO1xuXHQgICAgICAgIGlmICh0aGlzLmJvZHlJc092ZXJmbG93aW5nKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2Nyb2xsYmFyV2lkdGggPSAoMCwgX2dldFNjcm9sbEJhclNpemUyW1wiZGVmYXVsdFwiXSkoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVzZXRTY3JvbGxiYXI6IGZ1bmN0aW9uIHJlc2V0U2Nyb2xsYmFyKCkge1xuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gJyc7XG5cdCAgICB9LFxuXHQgICAgYWRqdXN0RGlhbG9nOiBmdW5jdGlvbiBhZGp1c3REaWFsb2coKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucmVmcy53cmFwICYmIHRoaXMuc2Nyb2xsYmFyV2lkdGggIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICB2YXIgbW9kYWxJc092ZXJmbG93aW5nID0gdGhpcy5yZWZzLndyYXAuc2Nyb2xsSGVpZ2h0ID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcblx0ICAgICAgICAgICAgdGhpcy5yZWZzLndyYXAuc3R5bGUucGFkZGluZ0xlZnQgPSAoIXRoaXMuYm9keUlzT3ZlcmZsb3dpbmcgJiYgbW9kYWxJc092ZXJmbG93aW5nID8gdGhpcy5zY3JvbGxiYXJXaWR0aCA6ICcnKSArICdweCc7XG5cdCAgICAgICAgICAgIHRoaXMucmVmcy53cmFwLnN0eWxlLnBhZGRpbmdSaWdodCA9ICh0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmICFtb2RhbElzT3ZlcmZsb3dpbmcgPyB0aGlzLnNjcm9sbGJhcldpZHRoIDogJycpICsgJ3B4Jztcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHQgICAgcmVzZXRBZGp1c3RtZW50czogZnVuY3Rpb24gcmVzZXRBZGp1c3RtZW50cygpIHtcblx0ICAgICAgICBpZiAodGhpcy5yZWZzLndyYXApIHtcblx0ICAgICAgICAgICAgdGhpcy5yZWZzLndyYXAuc3R5bGUucGFkZGluZ0xlZnQgPSB0aGlzLnJlZnMud3JhcC5zdHlsZS5wYWRkaW5nTGVmdCA9ICcnO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgICAgIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHMsXG5cdCAgICAgICAgICAgIG1hc2tDbG9zYWJsZSA9IHByb3BzLm1hc2tDbG9zYWJsZTtcblx0XG5cdCAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5nZXRXcmFwU3R5bGUoKTtcblx0ICAgICAgICAvLyBjbGVhciBoaWRlIGRpc3BsYXlcblx0ICAgICAgICAvLyBhbmQgb25seSBzZXQgZGlzcGxheSBhZnRlciBhc3luYyBhbmltLCBub3QgaGVyZSBmb3IgaGlkZVxuXHQgICAgICAgIGlmIChwcm9wcy52aXNpYmxlKSB7XG5cdCAgICAgICAgICAgIHN0eWxlLmRpc3BsYXkgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCBudWxsLCB0aGlzLmdldE1hc2tFbGVtZW50KCksIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19hc3NpZ24oeyB0YWJJbmRleDogLTEsIG9uS2V5RG93bjogdGhpcy5vbktleURvd24sIGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy13cmFwICcgKyAocHJvcHMud3JhcENsYXNzTmFtZSB8fCAnJyksIHJlZjogXCJ3cmFwXCIsIG9uQ2xpY2s6IG1hc2tDbG9zYWJsZSA/IHRoaXMub25NYXNrQ2xpY2sgOiB1bmRlZmluZWQsIHJvbGU6IFwiZGlhbG9nXCIsIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IHByb3BzLnRpdGxlID8gdGhpcy50aXRsZUlkIDogbnVsbCwgc3R5bGU6IHN0eWxlIH0sIHByb3BzLndyYXBQcm9wcyksIHRoaXMuZ2V0RGlhbG9nRWxlbWVudCgpKSk7XG5cdCAgICB9XG5cdH0pO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IERpYWxvZztcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG5cbi8qKiovIDIxMDpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9EaWFsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwOSk7XG5cdFxuXHR2YXIgX0RpYWxvZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EaWFsb2cpO1xuXHRcblx0dmFyIF9nZXRDb250YWluZXJSZW5kZXJNaXhpbiA9IF9fd2VicGFja19yZXF1aXJlX18oMjEzKTtcblx0XG5cdHZhciBfZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW4yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW4pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHR2YXIgX19hc3NpZ24gPSB1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXNzaWduIHx8IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHQpIHtcblx0ICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuXHQgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgZm9yICh2YXIgcCBpbiBzKSB7XG5cdCAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0O1xuXHR9O1xuXHRcblx0dmFyIERpYWxvZ1dyYXAgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7XG5cdCAgICBkaXNwbGF5TmFtZTogJ0RpYWxvZ1dyYXAnLFxuXHRcblx0ICAgIG1peGluczogWygwLCBfZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW4yW1wiZGVmYXVsdFwiXSkoe1xuXHQgICAgICAgIGlzVmlzaWJsZTogZnVuY3Rpb24gaXNWaXNpYmxlKGluc3RhbmNlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5wcm9wcy52aXNpYmxlO1xuXHQgICAgICAgIH0sXG5cdFxuXHQgICAgICAgIGF1dG9EZXN0cm95OiBmYWxzZSxcblx0ICAgICAgICBnZXRDb21wb25lbnQ6IGZ1bmN0aW9uIGdldENvbXBvbmVudChpbnN0YW5jZSwgZXh0cmEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX0RpYWxvZzJbXCJkZWZhdWx0XCJdLCBfX2Fzc2lnbih7fSwgaW5zdGFuY2UucHJvcHMsIGV4dHJhLCB7IGtleTogXCJkaWFsb2dcIiB9KSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSldLFxuXHQgICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgdmlzaWJsZTogZmFsc2Vcblx0ICAgICAgICB9O1xuXHQgICAgfSxcblx0ICAgIHNob3VsZENvbXBvbmVudFVwZGF0ZTogZnVuY3Rpb24gc2hvdWxkQ29tcG9uZW50VXBkYXRlKF9yZWYpIHtcblx0ICAgICAgICB2YXIgdmlzaWJsZSA9IF9yZWYudmlzaWJsZTtcblx0XG5cdCAgICAgICAgcmV0dXJuICEhKHRoaXMucHJvcHMudmlzaWJsZSB8fCB2aXNpYmxlKTtcblx0ICAgIH0sXG5cdCAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMucHJvcHMudmlzaWJsZSkge1xuXHQgICAgICAgICAgICB0aGlzLnJlbmRlckNvbXBvbmVudCh7XG5cdCAgICAgICAgICAgICAgICBhZnRlckNsb3NlOiB0aGlzLnJlbW92ZUNvbnRhaW5lcixcblx0ICAgICAgICAgICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIG9uQ2xvc2UoKSB7fSxcblx0XG5cdCAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZUNvbnRhaW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBnZXRFbGVtZW50OiBmdW5jdGlvbiBnZXRFbGVtZW50KHBhcnQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fY29tcG9uZW50LmdldEVsZW1lbnQocGFydCk7XG5cdCAgICB9LFxuXHQgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdH0pO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IERpYWxvZ1dyYXA7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMTE6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfb2JqZWN0QXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdHZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblx0XG5cdHZhciBfX2Fzc2lnbiA9IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hc3NpZ24gfHwgT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodCkge1xuXHQgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG5cdCAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICBmb3IgKHZhciBwIGluIHMpIHtcblx0ICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHQ7XG5cdH07XG5cdFxuXHR2YXIgTGF6eVJlbmRlckJveCA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUNsYXNzKHtcblx0ICAgIGRpc3BsYXlOYW1lOiAnTGF6eVJlbmRlckJveCcsXG5cdCAgICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcblx0ICAgICAgICByZXR1cm4gISFuZXh0UHJvcHMuaGlkZGVuQ2xhc3NOYW1lIHx8ICEhbmV4dFByb3BzLnZpc2libGU7XG5cdCAgICB9LFxuXHQgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMucHJvcHMuY2xhc3NOYW1lO1xuXHQgICAgICAgIGlmICghIXRoaXMucHJvcHMuaGlkZGVuQ2xhc3NOYW1lICYmICF0aGlzLnByb3BzLnZpc2libGUpIHtcblx0ICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgJyArIHRoaXMucHJvcHMuaGlkZGVuQ2xhc3NOYW1lO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcHJvcHMgPSAoMCwgX29iamVjdEFzc2lnbjJbXCJkZWZhdWx0XCJdKSh7fSwgdGhpcy5wcm9wcyk7XG5cdCAgICAgICAgZGVsZXRlIHByb3BzLmhpZGRlbkNsYXNzTmFtZTtcblx0ICAgICAgICBkZWxldGUgcHJvcHMudmlzaWJsZTtcblx0ICAgICAgICBwcm9wcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19hc3NpZ24oe30sIHByb3BzKSk7XG5cdCAgICB9XG5cdH0pO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IExhenlSZW5kZXJCb3g7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMTI6XG4yOTcsXG5cbi8qKiovIDIxMzpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblx0XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW47XG5cdFxuXHR2YXIgX3JlYWN0RG9tID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdHZhciBfcmVhY3REb20yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3REb20pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0R2V0Q29udGFpbmVyKCkge1xuXHQgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdCAgcmV0dXJuIGNvbnRhaW5lcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW4oY29uZmlnKSB7XG5cdCAgdmFyIF9jb25maWckYXV0b01vdW50ID0gY29uZmlnLmF1dG9Nb3VudDtcblx0ICB2YXIgYXV0b01vdW50ID0gX2NvbmZpZyRhdXRvTW91bnQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBfY29uZmlnJGF1dG9Nb3VudDtcblx0ICB2YXIgX2NvbmZpZyRhdXRvRGVzdHJveSA9IGNvbmZpZy5hdXRvRGVzdHJveTtcblx0ICB2YXIgYXV0b0Rlc3Ryb3kgPSBfY29uZmlnJGF1dG9EZXN0cm95ID09PSB1bmRlZmluZWQgPyB0cnVlIDogX2NvbmZpZyRhdXRvRGVzdHJveTtcblx0ICB2YXIgaXNWaXNpYmxlID0gY29uZmlnLmlzVmlzaWJsZTtcblx0ICB2YXIgZ2V0Q29tcG9uZW50ID0gY29uZmlnLmdldENvbXBvbmVudDtcblx0ICB2YXIgX2NvbmZpZyRnZXRDb250YWluZXIgPSBjb25maWcuZ2V0Q29udGFpbmVyO1xuXHQgIHZhciBnZXRDb250YWluZXIgPSBfY29uZmlnJGdldENvbnRhaW5lciA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdEdldENvbnRhaW5lciA6IF9jb25maWckZ2V0Q29udGFpbmVyO1xuXHRcblx0XG5cdCAgdmFyIG1peGluID0gdm9pZCAwO1xuXHRcblx0ICBmdW5jdGlvbiBfcmVuZGVyQ29tcG9uZW50KGluc3RhbmNlLCBjb21wb25lbnRBcmcsIHJlYWR5KSB7XG5cdCAgICBpZiAoIWlzVmlzaWJsZSB8fCBpbnN0YW5jZS5fY29tcG9uZW50IHx8IGlzVmlzaWJsZShpbnN0YW5jZSkpIHtcblx0ICAgICAgaWYgKCFpbnN0YW5jZS5fY29udGFpbmVyKSB7XG5cdCAgICAgICAgaW5zdGFuY2UuX2NvbnRhaW5lciA9IGdldENvbnRhaW5lcihpbnN0YW5jZSk7XG5cdCAgICAgIH1cblx0ICAgICAgX3JlYWN0RG9tMltcImRlZmF1bHRcIl0udW5zdGFibGVfcmVuZGVyU3VidHJlZUludG9Db250YWluZXIoaW5zdGFuY2UsIGdldENvbXBvbmVudChpbnN0YW5jZSwgY29tcG9uZW50QXJnKSwgaW5zdGFuY2UuX2NvbnRhaW5lciwgZnVuY3Rpb24gY2FsbGJhY2soKSB7XG5cdCAgICAgICAgaW5zdGFuY2UuX2NvbXBvbmVudCA9IHRoaXM7XG5cdCAgICAgICAgaWYgKHJlYWR5KSB7XG5cdCAgICAgICAgICByZWFkeS5jYWxsKHRoaXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoYXV0b01vdW50KSB7XG5cdCAgICBtaXhpbiA9IF9leHRlbmRzKHt9LCBtaXhpbiwge1xuXHQgICAgICBjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG5cdCAgICAgICAgX3JlbmRlckNvbXBvbmVudCh0aGlzKTtcblx0ICAgICAgfSxcblx0ICAgICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdCAgICAgICAgX3JlbmRlckNvbXBvbmVudCh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoIWF1dG9Nb3VudCB8fCAhYXV0b0Rlc3Ryb3kpIHtcblx0ICAgIG1peGluID0gX2V4dGVuZHMoe30sIG1peGluLCB7XG5cdCAgICAgIHJlbmRlckNvbXBvbmVudDogZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudEFyZywgcmVhZHkpIHtcblx0ICAgICAgICBfcmVuZGVyQ29tcG9uZW50KHRoaXMsIGNvbXBvbmVudEFyZywgcmVhZHkpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIF9yZW1vdmVDb250YWluZXIoaW5zdGFuY2UpIHtcblx0ICAgIGlmIChpbnN0YW5jZS5fY29udGFpbmVyKSB7XG5cdCAgICAgIHZhciBjb250YWluZXIgPSBpbnN0YW5jZS5fY29udGFpbmVyO1xuXHQgICAgICBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS51bm1vdW50Q29tcG9uZW50QXROb2RlKGNvbnRhaW5lcik7XG5cdCAgICAgIGNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG5cdCAgICAgIGluc3RhbmNlLl9jb250YWluZXIgPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGF1dG9EZXN0cm95KSB7XG5cdCAgICBtaXhpbiA9IF9leHRlbmRzKHt9LCBtaXhpbiwge1xuXHQgICAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdCAgICAgICAgX3JlbW92ZUNvbnRhaW5lcih0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG1peGluID0gX2V4dGVuZHMoe30sIG1peGluLCB7XG5cdCAgICAgIHJlbW92ZUNvbnRhaW5lcjogZnVuY3Rpb24gcmVtb3ZlQ29udGFpbmVyKCkge1xuXHQgICAgICAgIF9yZW1vdmVDb250YWluZXIodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG1peGluO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAyMTQ6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY2FjaGVkID0gdm9pZCAwO1xuXHRcblx0ZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyU2l6ZShmcmVzaCkge1xuXHQgIGlmIChmcmVzaCB8fCBjYWNoZWQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFyIGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBpbm5lci5zdHlsZS53aWR0aCA9ICcxMDAlJztcblx0ICAgIGlubmVyLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XG5cdFxuXHQgICAgdmFyIG91dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgb3V0ZXJTdHlsZSA9IG91dGVyLnN0eWxlO1xuXHRcblx0ICAgIG91dGVyU3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuXHQgICAgb3V0ZXJTdHlsZS50b3AgPSAwO1xuXHQgICAgb3V0ZXJTdHlsZS5sZWZ0ID0gMDtcblx0ICAgIG91dGVyU3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcblx0ICAgIG91dGVyU3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXHQgICAgb3V0ZXJTdHlsZS53aWR0aCA9ICcyMDBweCc7XG5cdCAgICBvdXRlclN0eWxlLmhlaWdodCA9ICcxNTBweCc7XG5cdCAgICBvdXRlclN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cdFxuXHQgICAgb3V0ZXIuYXBwZW5kQ2hpbGQoaW5uZXIpO1xuXHRcblx0ICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3V0ZXIpO1xuXHRcblx0ICAgIHZhciB3aWR0aENvbnRhaW5lZCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXHQgICAgb3V0ZXIuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcblx0ICAgIHZhciB3aWR0aFNjcm9sbCA9IGlubmVyLm9mZnNldFdpZHRoO1xuXHRcblx0ICAgIGlmICh3aWR0aENvbnRhaW5lZCA9PT0gd2lkdGhTY3JvbGwpIHtcblx0ICAgICAgd2lkdGhTY3JvbGwgPSBvdXRlci5jbGllbnRXaWR0aDtcblx0ICAgIH1cblx0XG5cdCAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG91dGVyKTtcblx0XG5cdCAgICBjYWNoZWQgPSB3aWR0aENvbnRhaW5lZCAtIHdpZHRoU2Nyb2xsO1xuXHQgIH1cblx0ICByZXR1cm4gY2FjaGVkO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldFNjcm9sbEJhclNpemU7XG5cbi8qKiovIH0sXG5cbi8qKiovIDUyMTpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHtcblx0ICBwcm9wVHlwZXM6IHtcblx0ICAgIHByZWZpeENsczogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBzdHJva2VXaWR0aDogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMubnVtYmVyLCBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZ10pLFxuXHQgICAgc3Ryb2tlQ29sb3I6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgdHJhaWxXaWR0aDogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMubnVtYmVyLCBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZ10pLFxuXHQgICAgdHJhaWxDb2xvcjogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBzdHJva2VMaW5lY2FwOiBfcmVhY3QuUHJvcFR5cGVzLm9uZU9mKFsncm91bmQnLCAnc3F1YXJlJ10pLFxuXHQgICAgc3R5bGU6IF9yZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuXHQgICAgY2xhc3NOYW1lOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZ1xuXHQgIH0sXG5cdCAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBwcmVmaXhDbHM6ICdyYy1wcm9ncmVzcycsXG5cdCAgICAgIHN0cm9rZVdpZHRoOiAxLFxuXHQgICAgICBzdHJva2VDb2xvcjogJyMyZGI3ZjUnLFxuXHQgICAgICB0cmFpbFdpZHRoOiAxLFxuXHQgICAgICB0cmFpbENvbG9yOiAnI0Q5RDlEOScsXG5cdCAgICAgIHN0cm9rZUxpbmVjYXA6ICdyb3VuZCcsXG5cdCAgICAgIGNsYXNzTmFtZTogJydcblx0ICAgIH07XG5cdCAgfSxcblx0ICBjb21wb25lbnREaWRVcGRhdGU6IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcblx0ICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuXHQgICAgdGhpcy5wYXRoLnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9ICcwLjNzLCAwLjNzJztcblx0ICAgIGlmICh0aGlzLnByZXZUaW1lU3RhbXAgJiYgbm93IC0gdGhpcy5wcmV2VGltZVN0YW1wIDwgMTAwKSB7XG5cdCAgICAgIHRoaXMucGF0aC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMsIDBzJztcblx0ICAgIH1cblx0ICAgIHRoaXMucHJldlRpbWVTdGFtcCA9IERhdGUubm93KCk7XG5cdCAgfVxuXHR9O1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcblxuLyoqKi8gNTI0OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB1aWQ7XG5cdHZhciBub3cgPSArbmV3IERhdGUoKTtcblx0dmFyIGluZGV4ID0gMDtcblx0XG5cdGZ1bmN0aW9uIHVpZCgpIHtcblx0ICByZXR1cm4gXCJyYy11cGxvYWQtXCIgKyBub3cgKyBcIi1cIiArICsraW5kZXg7XG5cdH1cblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG5cbi8qKiovIDYxMzpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9wcm9ncmVzcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjE0KTtcblx0XG5cdHZhciBfcHJvZ3Jlc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvZ3Jlc3MpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IF9wcm9ncmVzczJbXCJkZWZhdWx0XCJdO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcblxuLyoqKi8gNjE0OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5Mik7XG5cdFxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cdFxuXHR2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cdFxuXHR2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9pY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaWNvbik7XG5cdFxuXHR2YXIgX3JjUHJvZ3Jlc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNTApO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0dmFyIF9fcmVzdCA9IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19yZXN0IHx8IGZ1bmN0aW9uIChzLCBlKSB7XG5cdCAgICB2YXIgdCA9IHt9O1xuXHQgICAgZm9yICh2YXIgcCBpbiBzKSB7XG5cdCAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTtcblx0ICAgIH1pZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCkgdFtwW2ldXSA9IHNbcFtpXV07XG5cdCAgICB9cmV0dXJuIHQ7XG5cdH07XG5cdFxuXHR2YXIgc3RhdHVzQ29sb3JNYXAgPSB7XG5cdCAgICBub3JtYWw6ICcjMTA4ZWU5Jyxcblx0ICAgIGV4Y2VwdGlvbjogJyNmZjU1MDAnLFxuXHQgICAgc3VjY2VzczogJyM4N2QwNjgnXG5cdH07XG5cdFxuXHR2YXIgUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgICAgKDAsIF9pbmhlcml0czNbXCJkZWZhdWx0XCJdKShQcm9ncmVzcywgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gUHJvZ3Jlc3MoKSB7XG5cdCAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazNbXCJkZWZhdWx0XCJdKSh0aGlzLCBQcm9ncmVzcyk7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjNbXCJkZWZhdWx0XCJdKSh0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgICAgfVxuXHRcblx0ICAgIFByb2dyZXNzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXHRcblx0ICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXHRcblx0ICAgICAgICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuXHQgICAgICAgICAgICBjbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUsXG5cdCAgICAgICAgICAgIF9wcm9wcyRwZXJjZW50ID0gcHJvcHMucGVyY2VudCxcblx0ICAgICAgICAgICAgcGVyY2VudCA9IF9wcm9wcyRwZXJjZW50ID09PSB1bmRlZmluZWQgPyAwIDogX3Byb3BzJHBlcmNlbnQsXG5cdCAgICAgICAgICAgIHN0YXR1cyA9IHByb3BzLnN0YXR1cyxcblx0ICAgICAgICAgICAgZm9ybWF0ID0gcHJvcHMuZm9ybWF0LFxuXHQgICAgICAgICAgICB0cmFpbENvbG9yID0gcHJvcHMudHJhaWxDb2xvcixcblx0ICAgICAgICAgICAgdHlwZSA9IHByb3BzLnR5cGUsXG5cdCAgICAgICAgICAgIHN0cm9rZVdpZHRoID0gcHJvcHMuc3Ryb2tlV2lkdGgsXG5cdCAgICAgICAgICAgIHdpZHRoID0gcHJvcHMud2lkdGgsXG5cdCAgICAgICAgICAgIHNob3dJbmZvID0gcHJvcHMuc2hvd0luZm8sXG5cdCAgICAgICAgICAgIHJlc3RQcm9wcyA9IF9fcmVzdChwcm9wcywgW1wicHJlZml4Q2xzXCIsIFwiY2xhc3NOYW1lXCIsIFwicGVyY2VudFwiLCBcInN0YXR1c1wiLCBcImZvcm1hdFwiLCBcInRyYWlsQ29sb3JcIiwgXCJ0eXBlXCIsIFwic3Ryb2tlV2lkdGhcIiwgXCJ3aWR0aFwiLCBcInNob3dJbmZvXCJdKTtcblx0XG5cdCAgICAgICAgdmFyIHByb2dyZXNzU3RhdHVzID0gcGFyc2VJbnQocGVyY2VudC50b1N0cmluZygpLCAxMCkgPj0gMTAwICYmICEoJ3N0YXR1cycgaW4gcHJvcHMpID8gJ3N1Y2Nlc3MnIDogc3RhdHVzIHx8ICdub3JtYWwnO1xuXHQgICAgICAgIHZhciBwcm9ncmVzc0luZm8gPSB2b2lkIDA7XG5cdCAgICAgICAgdmFyIHByb2dyZXNzID0gdm9pZCAwO1xuXHQgICAgICAgIHZhciB0ZXh0Rm9ybWF0dGVyID0gZm9ybWF0IHx8IGZ1bmN0aW9uIChwZXJjZW50TnVtYmVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwZXJjZW50TnVtYmVyICsgJyUnO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgaWYgKHNob3dJbmZvKSB7XG5cdCAgICAgICAgICAgIHZhciB0ZXh0ID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB2YXIgaWNvblR5cGUgPSB0eXBlID09PSAnY2lyY2xlJyA/ICcnIDogJy1jaXJjbGUnO1xuXHQgICAgICAgICAgICBpZiAocHJvZ3Jlc3NTdGF0dXMgPT09ICdleGNlcHRpb24nKSB7XG5cdCAgICAgICAgICAgICAgICB0ZXh0ID0gZm9ybWF0ID8gdGV4dEZvcm1hdHRlcihwZXJjZW50KSA6IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiAnY3Jvc3MnICsgaWNvblR5cGUgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3NTdGF0dXMgPT09ICdzdWNjZXNzJykge1xuXHQgICAgICAgICAgICAgICAgdGV4dCA9IGZvcm1hdCA/IHRleHRGb3JtYXR0ZXIocGVyY2VudCkgOiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9pY29uMltcImRlZmF1bHRcIl0sIHsgdHlwZTogJ2NoZWNrJyArIGljb25UeXBlIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdGV4dCA9IHRleHRGb3JtYXR0ZXIocGVyY2VudCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcHJvZ3Jlc3NJbmZvID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLXRleHQnIH0sXG5cdCAgICAgICAgICAgICAgICB0ZXh0XG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnbGluZScpIHtcblx0ICAgICAgICAgICAgdmFyIHBlcmNlbnRTdHlsZSA9IHtcblx0ICAgICAgICAgICAgICAgIHdpZHRoOiBwZXJjZW50ICsgJyUnLFxuXHQgICAgICAgICAgICAgICAgaGVpZ2h0OiBzdHJva2VXaWR0aCB8fCAxMFxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBwcm9ncmVzcyA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIG51bGwsXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLW91dGVyJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1pbm5lcicgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnZGl2JywgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctYmcnLCBzdHlsZTogcGVyY2VudFN0eWxlIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKVxuXHQgICAgICAgICAgICAgICAgKSxcblx0ICAgICAgICAgICAgICAgIHByb2dyZXNzSW5mb1xuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NpcmNsZScpIHtcblx0ICAgICAgICAgICAgdmFyIGNpcmNsZVNpemUgPSB3aWR0aCB8fCAxMzI7XG5cdCAgICAgICAgICAgIHZhciBjaXJjbGVTdHlsZSA9IHtcblx0ICAgICAgICAgICAgICAgIHdpZHRoOiBjaXJjbGVTaXplLFxuXHQgICAgICAgICAgICAgICAgaGVpZ2h0OiBjaXJjbGVTaXplLFxuXHQgICAgICAgICAgICAgICAgZm9udFNpemU6IGNpcmNsZVNpemUgKiAwLjE2ICsgNlxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICB2YXIgY2lyY2xlV2lkdGggPSBzdHJva2VXaWR0aCB8fCA2O1xuXHQgICAgICAgICAgICBwcm9ncmVzcyA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWlubmVyJywgc3R5bGU6IGNpcmNsZVN0eWxlIH0sXG5cdCAgICAgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9yY1Byb2dyZXNzLkNpcmNsZSwgeyBwZXJjZW50OiBwZXJjZW50LCBzdHJva2VXaWR0aDogY2lyY2xlV2lkdGgsIHRyYWlsV2lkdGg6IGNpcmNsZVdpZHRoLCBzdHJva2VDb2xvcjogc3RhdHVzQ29sb3JNYXBbcHJvZ3Jlc3NTdGF0dXNdLCB0cmFpbENvbG9yOiB0cmFpbENvbG9yLCBwcmVmaXhDbHM6IHByZWZpeENscyB9KSxcblx0ICAgICAgICAgICAgICAgIHByb2dyZXNzSW5mb1xuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgY2xhc3NTdHJpbmcgPSAoMCwgX2NsYXNzbmFtZXMyW1wiZGVmYXVsdFwiXSkocHJlZml4Q2xzLCAoX2NsYXNzTmFtZXMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy0nICsgdHlwZSwgdHJ1ZSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMsIHByZWZpeENscyArICctc3RhdHVzLScgKyBwcm9ncmVzc1N0YXR1cywgdHJ1ZSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMsIHByZWZpeENscyArICctc2hvdy1pbmZvJywgc2hvd0luZm8pLCBfY2xhc3NOYW1lcyksIGNsYXNzTmFtZSk7XG5cdCAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICdkaXYnLFxuXHQgICAgICAgICAgICAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHJlc3RQcm9wcywgeyBjbGFzc05hbWU6IGNsYXNzU3RyaW5nIH0pLFxuXHQgICAgICAgICAgICBwcm9ncmVzc1xuXHQgICAgICAgICk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBQcm9ncmVzcztcblx0fShfcmVhY3QyW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBQcm9ncmVzcztcblx0XG5cdFByb2dyZXNzLmRlZmF1bHRQcm9wcyA9IHtcblx0ICAgIHR5cGU6ICdsaW5lJyxcblx0ICAgIHBlcmNlbnQ6IDAsXG5cdCAgICBzaG93SW5mbzogdHJ1ZSxcblx0ICAgIHRyYWlsQ29sb3I6ICcjZjNmM2YzJyxcblx0ICAgIHByZWZpeENsczogJ2FudC1wcm9ncmVzcydcblx0fTtcblx0UHJvZ3Jlc3MucHJvcFR5cGVzID0ge1xuXHQgICAgc3RhdHVzOiBfcmVhY3QuUHJvcFR5cGVzLm9uZU9mKFsnbm9ybWFsJywgJ2V4Y2VwdGlvbicsICdhY3RpdmUnLCAnc3VjY2VzcyddKSxcblx0ICAgIHR5cGU6IF9yZWFjdC5Qcm9wVHlwZXMub25lT2YoWydsaW5lJywgJ2NpcmNsZSddKSxcblx0ICAgIHNob3dJbmZvOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBwZXJjZW50OiBfcmVhY3QuUHJvcFR5cGVzLm51bWJlcixcblx0ICAgIHdpZHRoOiBfcmVhY3QuUHJvcFR5cGVzLm51bWJlcixcblx0ICAgIHN0cm9rZVdpZHRoOiBfcmVhY3QuUHJvcFR5cGVzLm51bWJlcixcblx0ICAgIHRyYWlsQ29sb3I6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgZm9ybWF0OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmNcblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG5cbi8qKiovIDYxNTpcblsxMjE2LCA4NTFdLFxuXG4vKioqLyA2MjA6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IGdldEZpbGVJdGVtO1xuXHRmdW5jdGlvbiBnZXRGaWxlSXRlbShmaWxlLCBmaWxlTGlzdCkge1xuXHQgICAgdmFyIG1hdGNoV2F5ID0gIWZpbGUudWlkID8gJ2J5TmFtZScgOiAnYnlVaWQnO1xuXHQgICAgdmFyIHRhcmdldCA9IGZpbGVMaXN0LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIGlmIChtYXRjaFdheSA9PT0gJ2J5TmFtZScpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gZmlsZS5uYW1lO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gaXRlbS51aWQgPT09IGZpbGUudWlkO1xuXHQgICAgfSlbMF07XG5cdCAgICByZXR1cm4gdGFyZ2V0O1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyA2MjE6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfZGVmaW5lUHJvcGVydHkyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfZGVmaW5lUHJvcGVydHkzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkyKTtcblx0XG5cdHZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblx0XG5cdHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblx0XG5cdHZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblx0XG5cdHZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblx0XG5cdGV4cG9ydHMuRHJhZ2dlciA9IERyYWdnZXI7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9yY1VwbG9hZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2NSk7XG5cdFxuXHR2YXIgX3JjVXBsb2FkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JjVXBsb2FkKTtcblx0XG5cdHZhciBfdXBsb2FkTGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNjIzKTtcblx0XG5cdHZhciBfdXBsb2FkTGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91cGxvYWRMaXN0KTtcblx0XG5cdHZhciBfZ2V0RmlsZUl0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyMCk7XG5cdFxuXHR2YXIgX2dldEZpbGVJdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dldEZpbGVJdGVtKTtcblx0XG5cdHZhciBfY2xhc3NuYW1lcyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cdFxuXHR2YXIgX29iamVjdEFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHR2YXIgX29iamVjdEFzc2lnbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vYmplY3RBc3NpZ24pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBUKCkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdH1cblx0Ly8gRml4IElFIGZpbGUuc3RhdHVzIHByb2JsZW1cblx0Ly8gdmlhIGNvcGluZyBhIG5ldyBPYmplY3Rcblx0ZnVuY3Rpb24gZmlsZVRvT2JqZWN0KGZpbGUpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGFzdE1vZGlmaWVkOiBmaWxlLmxhc3RNb2RpZmllZCxcblx0ICAgICAgICBsYXN0TW9kaWZpZWREYXRlOiBmaWxlLmxhc3RNb2RpZmllZERhdGUsXG5cdCAgICAgICAgbmFtZTogZmlsZS5maWxlbmFtZSB8fCBmaWxlLm5hbWUsXG5cdCAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuXHQgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcblx0ICAgICAgICB1aWQ6IGZpbGUudWlkLFxuXHQgICAgICAgIHJlc3BvbnNlOiBmaWxlLnJlc3BvbnNlLFxuXHQgICAgICAgIGVycm9yOiBmaWxlLmVycm9yLFxuXHQgICAgICAgIHBlcmNlbnQ6IDAsXG5cdCAgICAgICAgb3JpZ2luRmlsZU9iajogZmlsZSxcblx0ICAgICAgICBzdGF0dXM6IG51bGxcblx0ICAgIH07XG5cdH1cblx0LyoqXG5cdCAqIOeUn+aIkFByb2dyZXNzIHBlcmNlbnQ6IDAuMSAtPiAwLjk4XG5cdCAqICAgLSBmb3IgaWVcblx0ICovXG5cdGZ1bmN0aW9uIGdlblBlcmNlbnRBZGQoKSB7XG5cdCAgICB2YXIgayA9IDAuMTtcblx0ICAgIHZhciBpID0gMC4wMTtcblx0ICAgIHZhciBlbmQgPSAwLjk4O1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzKSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0ID0gcztcblx0ICAgICAgICBpZiAoc3RhcnQgPj0gZW5kKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzdGFydDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RhcnQgKz0gaztcblx0ICAgICAgICBrID0gayAtIGk7XG5cdCAgICAgICAgaWYgKGsgPCAwLjAwMSkge1xuXHQgICAgICAgICAgICBrID0gMC4wMDE7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBzdGFydCAqIDEwMDtcblx0ICAgIH07XG5cdH1cblx0ZnVuY3Rpb24gRHJhZ2dlcihwcm9wcykge1xuXHQgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoVXBsb2FkLCAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHByb3BzLCB7IHR5cGU6ICdkcmFnJywgc3R5bGU6IHsgaGVpZ2h0OiBwcm9wcy5oZWlnaHQgfSB9KSk7XG5cdH1cblx0XG5cdHZhciBVcGxvYWQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuXHQgICAgKDAsIF9pbmhlcml0czNbXCJkZWZhdWx0XCJdKShVcGxvYWQsIF9SZWFjdCRDb21wb25lbnQpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFVwbG9hZChwcm9wcykge1xuXHQgICAgICAgICgwLCBfY2xhc3NDYWxsQ2hlY2szW1wiZGVmYXVsdFwiXSkodGhpcywgVXBsb2FkKTtcblx0XG5cdCAgICAgICAgdmFyIF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuM1tcImRlZmF1bHRcIl0pKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcykpO1xuXHRcblx0ICAgICAgICBfdGhpcy5vblN0YXJ0ID0gZnVuY3Rpb24gKGZpbGUpIHtcblx0ICAgICAgICAgICAgdmFyIHRhcmdldEl0ZW0gPSB2b2lkIDA7XG5cdCAgICAgICAgICAgIHZhciBuZXh0RmlsZUxpc3QgPSBfdGhpcy5zdGF0ZS5maWxlTGlzdC5jb25jYXQoKTtcblx0ICAgICAgICAgICAgaWYgKGZpbGUubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgICAgdGFyZ2V0SXRlbSA9IGZpbGUubWFwKGZ1bmN0aW9uIChmKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVPYmplY3QgPSBmaWxlVG9PYmplY3QoZik7XG5cdCAgICAgICAgICAgICAgICAgICAgZmlsZU9iamVjdC5zdGF0dXMgPSAndXBsb2FkaW5nJztcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZU9iamVjdDtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgbmV4dEZpbGVMaXN0ID0gbmV4dEZpbGVMaXN0LmNvbmNhdCh0YXJnZXRJdGVtKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHRhcmdldEl0ZW0gPSBmaWxlVG9PYmplY3QoZmlsZSk7XG5cdCAgICAgICAgICAgICAgICB0YXJnZXRJdGVtLnN0YXR1cyA9ICd1cGxvYWRpbmcnO1xuXHQgICAgICAgICAgICAgICAgbmV4dEZpbGVMaXN0LnB1c2godGFyZ2V0SXRlbSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgX3RoaXMub25DaGFuZ2Uoe1xuXHQgICAgICAgICAgICAgICAgZmlsZTogdGFyZ2V0SXRlbSxcblx0ICAgICAgICAgICAgICAgIGZpbGVMaXN0OiBuZXh0RmlsZUxpc3Rcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIC8vIGZpeCBpZSBwcm9ncmVzc1xuXHQgICAgICAgICAgICBpZiAoIXdpbmRvdy5Gb3JtRGF0YSkge1xuXHQgICAgICAgICAgICAgICAgX3RoaXMuYXV0b1VwZGF0ZVByb2dyZXNzKDAsIHRhcmdldEl0ZW0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBfdGhpcy5vblN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcG9uc2UsIGZpbGUpIHtcblx0ICAgICAgICAgICAgX3RoaXMuY2xlYXJQcm9ncmVzc1RpbWVyKCk7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IF90aGlzLnN0YXRlLmZpbGVMaXN0O1xuXHQgICAgICAgICAgICB2YXIgdGFyZ2V0SXRlbSA9ICgwLCBfZ2V0RmlsZUl0ZW0yW1wiZGVmYXVsdFwiXSkoZmlsZSwgZmlsZUxpc3QpO1xuXHQgICAgICAgICAgICAvLyByZW1vdmVkXG5cdCAgICAgICAgICAgIGlmICghdGFyZ2V0SXRlbSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRhcmdldEl0ZW0uc3RhdHVzID0gJ2RvbmUnO1xuXHQgICAgICAgICAgICB0YXJnZXRJdGVtLnJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdCAgICAgICAgICAgIF90aGlzLm9uQ2hhbmdlKHtcblx0ICAgICAgICAgICAgICAgIGZpbGU6IHRhcmdldEl0ZW0sXG5cdCAgICAgICAgICAgICAgICBmaWxlTGlzdDogZmlsZUxpc3Rcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBfdGhpcy5vblByb2dyZXNzID0gZnVuY3Rpb24gKGUsIGZpbGUpIHtcblx0ICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gX3RoaXMuc3RhdGUuZmlsZUxpc3Q7XG5cdCAgICAgICAgICAgIHZhciB0YXJnZXRJdGVtID0gKDAsIF9nZXRGaWxlSXRlbTJbXCJkZWZhdWx0XCJdKShmaWxlLCBmaWxlTGlzdCk7XG5cdCAgICAgICAgICAgIC8vIHJlbW92ZWRcblx0ICAgICAgICAgICAgaWYgKCF0YXJnZXRJdGVtKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGFyZ2V0SXRlbS5wZXJjZW50ID0gZS5wZXJjZW50O1xuXHQgICAgICAgICAgICBfdGhpcy5vbkNoYW5nZSh7XG5cdCAgICAgICAgICAgICAgICBldmVudDogZSxcblx0ICAgICAgICAgICAgICAgIGZpbGU6IHRhcmdldEl0ZW0sXG5cdCAgICAgICAgICAgICAgICBmaWxlTGlzdDogX3RoaXMuc3RhdGUuZmlsZUxpc3Rcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBfdGhpcy5vbkVycm9yID0gZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgZmlsZSkge1xuXHQgICAgICAgICAgICBfdGhpcy5jbGVhclByb2dyZXNzVGltZXIoKTtcblx0ICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gX3RoaXMuc3RhdGUuZmlsZUxpc3Q7XG5cdCAgICAgICAgICAgIHZhciB0YXJnZXRJdGVtID0gKDAsIF9nZXRGaWxlSXRlbTJbXCJkZWZhdWx0XCJdKShmaWxlLCBmaWxlTGlzdCk7XG5cdCAgICAgICAgICAgIC8vIHJlbW92ZWRcblx0ICAgICAgICAgICAgaWYgKCF0YXJnZXRJdGVtKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGFyZ2V0SXRlbS5lcnJvciA9IGVycm9yO1xuXHQgICAgICAgICAgICB0YXJnZXRJdGVtLnJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdCAgICAgICAgICAgIHRhcmdldEl0ZW0uc3RhdHVzID0gJ2Vycm9yJztcblx0ICAgICAgICAgICAgX3RoaXMub25DaGFuZ2Uoe1xuXHQgICAgICAgICAgICAgICAgZmlsZTogdGFyZ2V0SXRlbSxcblx0ICAgICAgICAgICAgICAgIGZpbGVMaXN0OiBmaWxlTGlzdFxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIF90aGlzLmhhbmRsZU1hbnVhbFJlbW92ZSA9IGZ1bmN0aW9uIChmaWxlKSB7XG5cdCAgICAgICAgICAgIF90aGlzLnJlZnMudXBsb2FkLmFib3J0KGZpbGUpO1xuXHQgICAgICAgICAgICBmaWxlLnN0YXR1cyA9ICdyZW1vdmVkJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXHQgICAgICAgICAgICBfdGhpcy5oYW5kbGVSZW1vdmUoZmlsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBfdGhpcy5vbkNoYW5nZSA9IGZ1bmN0aW9uIChpbmZvKSB7XG5cdCAgICAgICAgICAgIGlmICghKCdmaWxlTGlzdCcgaW4gX3RoaXMucHJvcHMpKSB7XG5cdCAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGZpbGVMaXN0OiBpbmZvLmZpbGVMaXN0IH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBvbkNoYW5nZSA9IF90aGlzLnByb3BzLm9uQ2hhbmdlO1xuXHQgICAgICAgICAgICBpZiAob25DaGFuZ2UpIHtcblx0ICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGluZm8pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBfdGhpcy5vbkZpbGVEcm9wID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICAgICAgZHJhZ1N0YXRlOiBlLnR5cGVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBfdGhpcy5zdGF0ZSA9IHtcblx0ICAgICAgICAgICAgZmlsZUxpc3Q6IF90aGlzLnByb3BzLmZpbGVMaXN0IHx8IF90aGlzLnByb3BzLmRlZmF1bHRGaWxlTGlzdCB8fCBbXSxcblx0ICAgICAgICAgICAgZHJhZ1N0YXRlOiAnZHJvcCdcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICBVcGxvYWQucHJvdG90eXBlLmF1dG9VcGRhdGVQcm9ncmVzcyA9IGZ1bmN0aW9uIGF1dG9VcGRhdGVQcm9ncmVzcyhfLCBmaWxlKSB7XG5cdCAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBnZXRQZXJjZW50ID0gZ2VuUGVyY2VudEFkZCgpO1xuXHQgICAgICAgIHZhciBjdXJQZXJjZW50ID0gMDtcblx0ICAgICAgICB0aGlzLnByb2dyZXNzVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGN1clBlcmNlbnQgPSBnZXRQZXJjZW50KGN1clBlcmNlbnQpO1xuXHQgICAgICAgICAgICBfdGhpczIub25Qcm9ncmVzcyh7XG5cdCAgICAgICAgICAgICAgICBwZXJjZW50OiBjdXJQZXJjZW50XG5cdCAgICAgICAgICAgIH0sIGZpbGUpO1xuXHQgICAgICAgIH0sIDIwMCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFVwbG9hZC5wcm90b3R5cGUucmVtb3ZlRmlsZSA9IGZ1bmN0aW9uIHJlbW92ZUZpbGUoZmlsZSkge1xuXHQgICAgICAgIHZhciBmaWxlTGlzdCA9IHRoaXMuc3RhdGUuZmlsZUxpc3Q7XG5cdCAgICAgICAgdmFyIHRhcmdldEl0ZW0gPSAoMCwgX2dldEZpbGVJdGVtMltcImRlZmF1bHRcIl0pKGZpbGUsIGZpbGVMaXN0KTtcblx0ICAgICAgICB2YXIgaW5kZXggPSBmaWxlTGlzdC5pbmRleE9mKHRhcmdldEl0ZW0pO1xuXHQgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgZmlsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgcmV0dXJuIGZpbGVMaXN0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgVXBsb2FkLnByb3RvdHlwZS5oYW5kbGVSZW1vdmUgPSBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSkge1xuXHQgICAgICAgIHZhciBvblJlbW92ZSA9IHRoaXMucHJvcHMub25SZW1vdmU7XG5cdCAgICAgICAgLy8gUHJldmVudCByZW1vdmluZyBmaWxlXG5cdFxuXHQgICAgICAgIHZhciBvblJlbW92ZVJldHVyblZhbHVlID0gb25SZW1vdmUgJiYgb25SZW1vdmUoZmlsZSk7XG5cdCAgICAgICAgaWYgKG9uUmVtb3ZlUmV0dXJuVmFsdWUgIT09IGZhbHNlKSB7XG5cdCAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IHRoaXMucmVtb3ZlRmlsZShmaWxlKTtcblx0ICAgICAgICAgICAgaWYgKGZpbGVMaXN0KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKHtcblx0ICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLFxuXHQgICAgICAgICAgICAgICAgICAgIGZpbGVMaXN0OiBmaWxlTGlzdFxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIFVwbG9hZC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyA9IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMobmV4dFByb3BzKSB7XG5cdCAgICAgICAgaWYgKCdmaWxlTGlzdCcgaW4gbmV4dFByb3BzKSB7XG5cdCAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgICAgICAgICAgZmlsZUxpc3Q6IG5leHRQcm9wcy5maWxlTGlzdCB8fCBbXVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIFVwbG9hZC5wcm90b3R5cGUuY2xlYXJQcm9ncmVzc1RpbWVyID0gZnVuY3Rpb24gY2xlYXJQcm9ncmVzc1RpbWVyKCkge1xuXHQgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wcm9ncmVzc1RpbWVyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgVXBsb2FkLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgICAgdmFyIF9jbGFzc05hbWVzMjtcblx0XG5cdCAgICAgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG5cdCAgICAgICAgICAgIF9wcm9wcyRwcmVmaXhDbHMgPSBfcHJvcHMucHJlZml4Q2xzLFxuXHQgICAgICAgICAgICBwcmVmaXhDbHMgPSBfcHJvcHMkcHJlZml4Q2xzID09PSB1bmRlZmluZWQgPyAnJyA6IF9wcm9wcyRwcmVmaXhDbHMsXG5cdCAgICAgICAgICAgIHNob3dVcGxvYWRMaXN0ID0gX3Byb3BzLnNob3dVcGxvYWRMaXN0LFxuXHQgICAgICAgICAgICBsaXN0VHlwZSA9IF9wcm9wcy5saXN0VHlwZSxcblx0ICAgICAgICAgICAgb25QcmV2aWV3ID0gX3Byb3BzLm9uUHJldmlldyxcblx0ICAgICAgICAgICAgdHlwZSA9IF9wcm9wcy50eXBlLFxuXHQgICAgICAgICAgICBkaXNhYmxlZCA9IF9wcm9wcy5kaXNhYmxlZCxcblx0ICAgICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG5cdCAgICAgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWU7XG5cdFxuXHQgICAgICAgIHZhciByY1VwbG9hZFByb3BzID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHRoaXMucHJvcHMsIHtcblx0ICAgICAgICAgICAgb25TdGFydDogdGhpcy5vblN0YXJ0LFxuXHQgICAgICAgICAgICBvbkVycm9yOiB0aGlzLm9uRXJyb3IsXG5cdCAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IHRoaXMub25Qcm9ncmVzcyxcblx0ICAgICAgICAgICAgb25TdWNjZXNzOiB0aGlzLm9uU3VjY2Vzc1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGRlbGV0ZSByY1VwbG9hZFByb3BzLmNsYXNzTmFtZTtcblx0ICAgICAgICB2YXIgc2hvd1JlbW92ZUljb24gPSBzaG93VXBsb2FkTGlzdC5zaG93UmVtb3ZlSWNvbixcblx0ICAgICAgICAgICAgc2hvd1ByZXZpZXdJY29uID0gc2hvd1VwbG9hZExpc3Quc2hvd1ByZXZpZXdJY29uO1xuXHRcblx0ICAgICAgICB2YXIgdXBsb2FkTGlzdCA9IHNob3dVcGxvYWRMaXN0ID8gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfdXBsb2FkTGlzdDJbXCJkZWZhdWx0XCJdLCB7IGxpc3RUeXBlOiBsaXN0VHlwZSwgaXRlbXM6IHRoaXMuc3RhdGUuZmlsZUxpc3QsIG9uUHJldmlldzogb25QcmV2aWV3LCBvblJlbW92ZTogdGhpcy5oYW5kbGVNYW51YWxSZW1vdmUsIHNob3dSZW1vdmVJY29uOiBzaG93UmVtb3ZlSWNvbiwgc2hvd1ByZXZpZXdJY29uOiBzaG93UHJldmlld0ljb24gfSkgOiBudWxsO1xuXHQgICAgICAgIGlmICh0eXBlID09PSAnZHJhZycpIHtcblx0ICAgICAgICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGRyYWdDbHMgPSAoMCwgX2NsYXNzbmFtZXMyW1wiZGVmYXVsdFwiXSkocHJlZml4Q2xzLCAoX2NsYXNzTmFtZXMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kcmFnJywgdHJ1ZSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMsIHByZWZpeENscyArICctZHJhZy11cGxvYWRpbmcnLCB0aGlzLnN0YXRlLmZpbGVMaXN0LnNvbWUoZnVuY3Rpb24gKGZpbGUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmaWxlLnN0YXR1cyA9PT0gJ3VwbG9hZGluZyc7XG5cdCAgICAgICAgICAgIH0pKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kcmFnLWhvdmVyJywgdGhpcy5zdGF0ZS5kcmFnU3RhdGUgPT09ICdkcmFnb3ZlcicpLCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzLCBwcmVmaXhDbHMgKyAnLWRpc2FibGVkJywgZGlzYWJsZWQpLCBfY2xhc3NOYW1lcykpO1xuXHQgICAgICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdzcGFuJyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGRyYWdDbHMsIG9uRHJvcDogdGhpcy5vbkZpbGVEcm9wLCBvbkRyYWdPdmVyOiB0aGlzLm9uRmlsZURyb3AsIG9uRHJhZ0xlYXZlOiB0aGlzLm9uRmlsZURyb3AgfSxcblx0ICAgICAgICAgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmNVcGxvYWQyW1wiZGVmYXVsdFwiXSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgKDAsIF9leHRlbmRzM1tcImRlZmF1bHRcIl0pKHt9LCByY1VwbG9hZFByb3BzLCB7IHJlZjogJ3VwbG9hZCcsIGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1idG4nIH0pLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1kcmFnLWNvbnRhaW5lcicgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIClcblx0ICAgICAgICAgICAgICAgICAgICApXG5cdCAgICAgICAgICAgICAgICApLFxuXHQgICAgICAgICAgICAgICAgdXBsb2FkTGlzdFxuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgdXBsb2FkQnV0dG9uQ2xzID0gKDAsIF9jbGFzc25hbWVzMltcImRlZmF1bHRcIl0pKHByZWZpeENscywgKF9jbGFzc05hbWVzMiA9IHt9LCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzMiwgcHJlZml4Q2xzICsgJy1zZWxlY3QnLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lczIsIHByZWZpeENscyArICctc2VsZWN0LScgKyBsaXN0VHlwZSwgdHJ1ZSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMyLCBwcmVmaXhDbHMgKyAnLWRpc2FibGVkJywgZGlzYWJsZWQpLCBfY2xhc3NOYW1lczIpKTtcblx0ICAgICAgICB2YXIgdXBsb2FkQnV0dG9uID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiB1cGxvYWRCdXR0b25DbHMsIHN0eWxlOiB7IGRpc3BsYXk6IGNoaWxkcmVuID8gJycgOiAnbm9uZScgfSB9LFxuXHQgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9yY1VwbG9hZDJbXCJkZWZhdWx0XCJdLCAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHJjVXBsb2FkUHJvcHMsIHsgcmVmOiAndXBsb2FkJyB9KSlcblx0ICAgICAgICApO1xuXHQgICAgICAgIGlmIChsaXN0VHlwZSA9PT0gJ3BpY3R1cmUtY2FyZCcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG5cdCAgICAgICAgICAgICAgICB1cGxvYWRMaXN0LFxuXHQgICAgICAgICAgICAgICAgdXBsb2FkQnV0dG9uXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc05hbWUgfSxcblx0ICAgICAgICAgICAgdXBsb2FkQnV0dG9uLFxuXHQgICAgICAgICAgICB1cGxvYWRMaXN0XG5cdCAgICAgICAgKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFVwbG9hZDtcblx0fShfcmVhY3QyW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1xuXHRcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBVcGxvYWQ7XG5cdFxuXHRVcGxvYWQuRHJhZ2dlciA9IERyYWdnZXI7XG5cdFVwbG9hZC5kZWZhdWx0UHJvcHMgPSB7XG5cdCAgICBwcmVmaXhDbHM6ICdhbnQtdXBsb2FkJyxcblx0ICAgIHR5cGU6ICdzZWxlY3QnLFxuXHQgICAgbXVsdGlwbGU6IGZhbHNlLFxuXHQgICAgYWN0aW9uOiAnJyxcblx0ICAgIGRhdGE6IHt9LFxuXHQgICAgYWNjZXB0OiAnJyxcblx0ICAgIGJlZm9yZVVwbG9hZDogVCxcblx0ICAgIHNob3dVcGxvYWRMaXN0OiB0cnVlLFxuXHQgICAgbGlzdFR5cGU6ICd0ZXh0Jyxcblx0ICAgIGNsYXNzTmFtZTogJycsXG5cdCAgICBkaXNhYmxlZDogZmFsc2UsXG5cdCAgICBzdXBwb3J0U2VydmVyUmVuZGVyOiB0cnVlXG5cdH07XG5cbi8qKiovIH0sXG5cbi8qKiovIDYyMjpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg4NTUpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg2MTUpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxOTMpO1xuXG4vKioqLyB9LFxuXG4vKioqLyA2MjM6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfZGVmaW5lUHJvcGVydHkyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdHZhciBfZGVmaW5lUHJvcGVydHkzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkyKTtcblx0XG5cdHZhciBfZXh0ZW5kczIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblx0XG5cdHZhciBfY2xhc3NDYWxsQ2hlY2syID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblx0XG5cdHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblx0XG5cdHZhciBfaW5oZXJpdHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdHZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX3JjQW5pbWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHRcblx0dmFyIF9yY0FuaW1hdGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmNBbmltYXRlKTtcblx0XG5cdHZhciBfaWNvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0dmFyIF9pY29uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ljb24pO1xuXHRcblx0dmFyIF90b29sdGlwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzYpO1xuXHRcblx0dmFyIF90b29sdGlwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Rvb2x0aXApO1xuXHRcblx0dmFyIF9wcm9ncmVzcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjEzKTtcblx0XG5cdHZhciBfcHJvZ3Jlc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvZ3Jlc3MpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0ZpbGVSZWFkZXIvcmVhZEFzRGF0YVVSTFxuXHR2YXIgcHJldmlld0ZpbGUgPSBmdW5jdGlvbiBwcmV2aWV3RmlsZShmaWxlLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdCAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBjYWxsYmFjayhyZWFkZXIucmVzdWx0KTtcblx0ICAgIH07XG5cdCAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcblx0fTtcblx0XG5cdHZhciBVcGxvYWRMaXN0ID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAgICgwLCBfaW5oZXJpdHMzW1wiZGVmYXVsdFwiXSkoVXBsb2FkTGlzdCwgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gVXBsb2FkTGlzdCgpIHtcblx0ICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrM1tcImRlZmF1bHRcIl0pKHRoaXMsIFVwbG9hZExpc3QpO1xuXHRcblx0ICAgICAgICB2YXIgX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zW1wiZGVmYXVsdFwiXSkodGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0XG5cdCAgICAgICAgX3RoaXMuaGFuZGxlQ2xvc2UgPSBmdW5jdGlvbiAoZmlsZSkge1xuXHQgICAgICAgICAgICB2YXIgb25SZW1vdmUgPSBfdGhpcy5wcm9wcy5vblJlbW92ZTtcblx0ICAgICAgICAgICAgaWYgKG9uUmVtb3ZlKSB7XG5cdCAgICAgICAgICAgICAgICBvblJlbW92ZShmaWxlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgX3RoaXMuaGFuZGxlUHJldmlldyA9IGZ1bmN0aW9uIChmaWxlLCBlKSB7XG5cdCAgICAgICAgICAgIHZhciBvblByZXZpZXcgPSBfdGhpcy5wcm9wcy5vblByZXZpZXc7XG5cdFxuXHQgICAgICAgICAgICBpZiAoIW9uUHJldmlldykge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgcmV0dXJuIG9uUHJldmlldyhmaWxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHJldHVybiBfdGhpcztcblx0ICAgIH1cblx0XG5cdCAgICBVcGxvYWRMaXN0LnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGUgPSBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLnByb3BzLmxpc3RUeXBlICE9PSAncGljdHVyZScgJiYgdGhpcy5wcm9wcy5saXN0VHlwZSAhPT0gJ3BpY3R1cmUtY2FyZCcpIHtcblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAodGhpcy5wcm9wcy5pdGVtcyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkge1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCAhd2luZG93LkZpbGVSZWFkZXIgfHwgIXdpbmRvdy5GaWxlIHx8ICEoZmlsZS5vcmlnaW5GaWxlT2JqIGluc3RhbmNlb2YgRmlsZSkgfHwgZmlsZS50aHVtYlVybCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgLyplc2xpbnQtZGlzYWJsZSAqL1xuXHQgICAgICAgICAgICBmaWxlLnRodW1iVXJsID0gJyc7XG5cdCAgICAgICAgICAgIC8qZXNsaW50LWVuYWJsZSAqL1xuXHQgICAgICAgICAgICBwcmV2aWV3RmlsZShmaWxlLm9yaWdpbkZpbGVPYmosIGZ1bmN0aW9uIChwcmV2aWV3RGF0YVVybCkge1xuXHQgICAgICAgICAgICAgICAgLyplc2xpbnQtZGlzYWJsZSAqL1xuXHQgICAgICAgICAgICAgICAgZmlsZS50aHVtYlVybCA9IHByZXZpZXdEYXRhVXJsO1xuXHQgICAgICAgICAgICAgICAgLyplc2xpbnQtZW5hYmxlICovXG5cdCAgICAgICAgICAgICAgICBfdGhpczIuZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFVwbG9hZExpc3QucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgICB2YXIgX3RoaXMzID0gdGhpcyxcblx0ICAgICAgICAgICAgX2NsYXNzTmFtZXMyO1xuXHRcblx0ICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcblx0ICAgICAgICAgICAgcHJlZml4Q2xzID0gX3Byb3BzLnByZWZpeENscyxcblx0ICAgICAgICAgICAgX3Byb3BzJGl0ZW1zID0gX3Byb3BzLml0ZW1zLFxuXHQgICAgICAgICAgICBpdGVtcyA9IF9wcm9wcyRpdGVtcyA9PT0gdW5kZWZpbmVkID8gW10gOiBfcHJvcHMkaXRlbXMsXG5cdCAgICAgICAgICAgIGxpc3RUeXBlID0gX3Byb3BzLmxpc3RUeXBlLFxuXHQgICAgICAgICAgICBzaG93UHJldmlld0ljb24gPSBfcHJvcHMuc2hvd1ByZXZpZXdJY29uLFxuXHQgICAgICAgICAgICBzaG93UmVtb3ZlSWNvbiA9IF9wcm9wcy5zaG93UmVtb3ZlSWNvbjtcblx0XG5cdCAgICAgICAgdmFyIGxpc3QgPSBpdGVtcy5tYXAoZnVuY3Rpb24gKGZpbGUpIHtcblx0ICAgICAgICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXHRcblx0ICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gdm9pZCAwO1xuXHQgICAgICAgICAgICB2YXIgaWNvbiA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiAncGFwZXItY2xpcCcgfSk7XG5cdCAgICAgICAgICAgIGlmIChsaXN0VHlwZSA9PT0gJ3BpY3R1cmUnIHx8IGxpc3RUeXBlID09PSAncGljdHVyZS1jYXJkJykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGZpbGUuc3RhdHVzID09PSAndXBsb2FkaW5nJyB8fCAhZmlsZS50aHVtYlVybCAmJiAhZmlsZS51cmwpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFR5cGUgPT09ICdwaWN0dXJlLWNhcmQnKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tdXBsb2FkaW5nLXRleHQnIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVXBsb2FkaW5nLi4uJ1xuXHQgICAgICAgICAgICAgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGljb24gPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9pY29uMltcImRlZmF1bHRcIl0sIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWxpc3QtaXRlbS10aHVtYm5haWwnLCB0eXBlOiAncGljdHVyZScgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBpY29uID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICAgICAgICAgJ2EnLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tdGh1bWJuYWlsJywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5oYW5kbGVQcmV2aWV3KGZpbGUsIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgaHJlZjogZmlsZS51cmwgfHwgZmlsZS50aHVtYlVybCwgdGFyZ2V0OiAnX2JsYW5rJywgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicgfSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnaW1nJywgeyBzcmM6IGZpbGUudGh1bWJVcmwgfHwgZmlsZS51cmwsIGFsdDogZmlsZS5uYW1lIH0pXG5cdCAgICAgICAgICAgICAgICAgICAgKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoZmlsZS5zdGF0dXMgPT09ICd1cGxvYWRpbmcnKSB7XG5cdCAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctbGlzdC1pdGVtLXByb2dyZXNzJyB9LFxuXHQgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX3Byb2dyZXNzMltcImRlZmF1bHRcIl0sICgwLCBfZXh0ZW5kczNbXCJkZWZhdWx0XCJdKSh7IHR5cGU6ICdsaW5lJyB9LCBfdGhpczMucHJvcHMucHJvZ3Jlc3NBdHRyLCB7IHBlcmNlbnQ6IGZpbGUucGVyY2VudCB9KSlcblx0ICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIGluZm9VcGxvYWRpbmdDbGFzcyA9ICgwLCBfY2xhc3NuYW1lczJbXCJkZWZhdWx0XCJdKSgoX2NsYXNzTmFtZXMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0nLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tJyArIGZpbGUuc3RhdHVzLCB0cnVlKSwgX2NsYXNzTmFtZXMpKTtcblx0ICAgICAgICAgICAgdmFyIHByZXZpZXcgPSBmaWxlLnVybCA/IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnYScsXG5cdCAgICAgICAgICAgICAgICB7IGhyZWY6IGZpbGUudXJsLCB0YXJnZXQ6ICdfYmxhbmsnLCByZWw6ICdub29wZW5lciBub3JlZmVycmVyJywgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWxpc3QtaXRlbS1uYW1lJywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuaGFuZGxlUHJldmlldyhmaWxlLCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9IH0sXG5cdCAgICAgICAgICAgICAgICBmaWxlLm5hbWVcblx0ICAgICAgICAgICAgKSA6IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tbmFtZScsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmhhbmRsZVByZXZpZXcoZmlsZSwgZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSB9LFxuXHQgICAgICAgICAgICAgICAgZmlsZS5uYW1lXG5cdCAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIHZhciBzdHlsZSA9IGZpbGUudXJsIHx8IGZpbGUudGh1bWJVcmwgPyB1bmRlZmluZWQgOiB7XG5cdCAgICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG5cdCAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjVcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgdmFyIHByZXZpZXdJY29uID0gc2hvd1ByZXZpZXdJY29uID8gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgICAgICAgICdhJyxcblx0ICAgICAgICAgICAgICAgIHsgaHJlZjogZmlsZS51cmwgfHwgZmlsZS50aHVtYlVybCwgdGFyZ2V0OiAnX2JsYW5rJywgcmVsOiAnbm9vcGVuZXIgbm9yZWZlcnJlcicsIHN0eWxlOiBzdHlsZSwgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuaGFuZGxlUHJldmlldyhmaWxlLCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9LCB0aXRsZTogJ1ByZXZpZXcgZmlsZScgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiAnZXllLW8nIH0pXG5cdCAgICAgICAgICAgICkgOiBudWxsO1xuXHQgICAgICAgICAgICB2YXIgcmVtb3ZlSWNvbiA9IHNob3dSZW1vdmVJY29uID8gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfaWNvbjJbXCJkZWZhdWx0XCJdLCB7IHR5cGU6ICdkZWxldGUnLCB0aXRsZTogJ1JlbW92ZSBmaWxlJywgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmhhbmRsZUNsb3NlKGZpbGUpO1xuXHQgICAgICAgICAgICAgICAgfSB9KSA6IG51bGw7XG5cdCAgICAgICAgICAgIHZhciByZW1vdmVJY29uQ3Jvc3MgPSBzaG93UmVtb3ZlSWNvbiA/IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiAnY3Jvc3MnLCB0aXRsZTogJ1JlbW92ZSBmaWxlJywgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmhhbmRsZUNsb3NlKGZpbGUpO1xuXHQgICAgICAgICAgICAgICAgfSB9KSA6IG51bGw7XG5cdCAgICAgICAgICAgIHZhciBhY3Rpb25zID0gbGlzdFR5cGUgPT09ICdwaWN0dXJlLWNhcmQnICYmIGZpbGUuc3RhdHVzICE9PSAndXBsb2FkaW5nJyA/IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnc3BhbicsXG5cdCAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tYWN0aW9ucycgfSxcblx0ICAgICAgICAgICAgICAgIHByZXZpZXdJY29uLFxuXHQgICAgICAgICAgICAgICAgcmVtb3ZlSWNvblxuXHQgICAgICAgICAgICApIDogcmVtb3ZlSWNvbkNyb3NzO1xuXHQgICAgICAgICAgICB2YXIgaXRlbSA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAnZGl2Jyxcblx0ICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBpbmZvVXBsb2FkaW5nQ2xhc3MsIGtleTogZmlsZS51aWQgfSxcblx0ICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctbGlzdC1pdGVtLWluZm8nIH0sXG5cdCAgICAgICAgICAgICAgICAgICAgaWNvbixcblx0ICAgICAgICAgICAgICAgICAgICBwcmV2aWV3LFxuXHQgICAgICAgICAgICAgICAgICAgIGFjdGlvbnNcblx0ICAgICAgICAgICAgICAgICksXG5cdCAgICAgICAgICAgICAgICBwcm9ncmVzc1xuXHQgICAgICAgICAgICApO1xuXHQgICAgICAgICAgICBpZiAoZmlsZS5zdGF0dXMgPT09ICdlcnJvcicpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gZmlsZS5yZXNwb25zZSB8fCBmaWxlLmVycm9yICYmIGZpbGUuZXJyb3Iuc3RhdHVzVGV4dCB8fCAnVXBsb2FkIEVycm9yJztcblx0ICAgICAgICAgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICAgICAgICAgIF90b29sdGlwMltcImRlZmF1bHRcIl0sXG5cdCAgICAgICAgICAgICAgICAgICAgeyB0aXRsZTogbWVzc2FnZSwga2V5OiBmaWxlLnVpZCB9LFxuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW1cblx0ICAgICAgICAgICAgICAgICk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIGxpc3RDbGFzc05hbWVzID0gKDAsIF9jbGFzc25hbWVzMltcImRlZmF1bHRcIl0pKChfY2xhc3NOYW1lczIgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lczIsIHByZWZpeENscyArICctbGlzdCcsIHRydWUpLCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzMiwgcHJlZml4Q2xzICsgJy1saXN0LScgKyBsaXN0VHlwZSwgdHJ1ZSksIF9jbGFzc05hbWVzMikpO1xuXHQgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAgICAgICBfcmNBbmltYXRlMltcImRlZmF1bHRcIl0sXG5cdCAgICAgICAgICAgIHsgdHJhbnNpdGlvbk5hbWU6IHByZWZpeENscyArICctbWFyZ2luLXRvcCcsIGNvbXBvbmVudDogJ2RpdicsIGNsYXNzTmFtZTogbGlzdENsYXNzTmFtZXMgfSxcblx0ICAgICAgICAgICAgbGlzdFxuXHQgICAgICAgICk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBVcGxvYWRMaXN0O1xuXHR9KF9yZWFjdDJbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IFVwbG9hZExpc3Q7XG5cdFxuXHRVcGxvYWRMaXN0LmRlZmF1bHRQcm9wcyA9IHtcblx0ICAgIGxpc3RUeXBlOiAndGV4dCcsXG5cdCAgICBwcm9ncmVzc0F0dHI6IHtcblx0ICAgICAgICBzdHJva2VXaWR0aDogMyxcblx0ICAgICAgICBzaG93SW5mbzogZmFsc2Vcblx0ICAgIH0sXG5cdCAgICBwcmVmaXhDbHM6ICdhbnQtdXBsb2FkJyxcblx0ICAgIHNob3dSZW1vdmVJY29uOiB0cnVlLFxuXHQgICAgc2hvd1ByZXZpZXdJY29uOiB0cnVlXG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyA2ODA6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfc3R5bGU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDkpO1xuXHRcblx0dmFyIF9tb2RhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ4KTtcblx0XG5cdHZhciBfbW9kYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9kYWwpO1xuXHRcblx0dmFyIF9zdHlsZTUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyMik7XG5cdFxuXHR2YXIgX3VwbG9hZCA9IF9fd2VicGFja19yZXF1aXJlX18oNjIxKTtcblx0XG5cdHZhciBfdXBsb2FkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VwbG9hZCk7XG5cdFxuXHR2YXIgX3N0eWxlNiA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9pY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHR2YXIgX2ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaWNvbik7XG5cdFxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cdFxuXHR2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cdFxuXHR2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cdFxuXHR2YXIgX2NsYXNzLCBfdGVtcDtcblx0XG5cdHZhciBfcmVhY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0dmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cdFxuXHR2YXIgX1VwbG9hZEZpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2MSk7XG5cdFxuXHR2YXIgX1VwbG9hZEZpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfVXBsb2FkRmlsZSk7XG5cdFxuXHR2YXIgX2Nvb2tpZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcyKTtcblx0XG5cdHZhciBfY29va2llMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Nvb2tpZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIFVwbG9hZEZpbGVzID0gKF90ZW1wID0gX2NsYXNzID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcblx0ICAoMCwgX2luaGVyaXRzMy5kZWZhdWx0KShVcGxvYWRGaWxlcywgX1JlYWN0JENvbXBvbmVudCk7XG5cdFxuXHQgIGZ1bmN0aW9uIFVwbG9hZEZpbGVzKHByb3BzKSB7XG5cdCAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMy5kZWZhdWx0KSh0aGlzLCBVcGxvYWRGaWxlcyk7XG5cdFxuXHQgICAgdmFyIF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpKTtcblx0XG5cdCAgICBfdGhpcy5zdGF0ZSA9IHtcblx0ICAgICAgcHJldmlld1Zpc2libGU6IGZhbHNlLFxuXHQgICAgICBwcmV2aWV3SW1hZ2U6ICcnLFxuXHQgICAgICBmaWxlTGlzdDogQXJyYXkuaXNBcnJheShwcm9wcy5maWxlTGlzdCkgPyBwcm9wcy5maWxlTGlzdC5tYXAoZnVuY3Rpb24gKHVybCwga2V5KSB7XG5cdCAgICAgICAgdmFyIHVybEFyciA9IHVybC5zcGxpdCgnLycpO1xuXHQgICAgICAgIHJldHVybiB7IHVybDogdXJsLCB1aWQ6IGtleSwgbmFtZTogdXJsQXJyW3VybEFyci5sZW5ndGggLSAxXSwgc3RhdHVzOiAnZG9uZScgfTtcblx0ICAgICAgfSkgOiBbeyB1aWQ6IC0xLCB1cmw6IHByb3BzLmZpbGVMaXN0LCBuYW1lOiBwcm9wcy5maWxlTGlzdC5zcGxpdCgnLycpW3Byb3BzLmZpbGVMaXN0LnNwbGl0KCcvJykubGVuZ3RoIC0gMV0sIHN0YXR1czogJ2RvbmUnIH1dXG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIF90aGlzO1xuXHQgIH1cblx0XG5cdCAgVXBsb2FkRmlsZXMucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBfc3RhdGUgPSB0aGlzLnN0YXRlLFxuXHQgICAgICAgIHByZXZpZXdWaXNpYmxlID0gX3N0YXRlLnByZXZpZXdWaXNpYmxlLFxuXHQgICAgICAgIHByZXZpZXdJbWFnZSA9IF9zdGF0ZS5wcmV2aWV3SW1hZ2UsXG5cdCAgICAgICAgZmlsZUxpc3QgPSBfc3RhdGUuZmlsZUxpc3Q7XG5cdCAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcblx0ICAgICAgICBfcHJvcHMkbXVsdGlwbGUgPSBfcHJvcHMubXVsdGlwbGUsXG5cdCAgICAgICAgbXVsdGlwbGUgPSBfcHJvcHMkbXVsdGlwbGUgPT09IHVuZGVmaW5lZCA/IDEgOiBfcHJvcHMkbXVsdGlwbGUsXG5cdCAgICAgICAgb25VcGxvYWQgPSBfcHJvcHMub25VcGxvYWQ7XG5cdFxuXHRcblx0ICAgIHZhciByZW5kZXJGaWxlcyA9IGZ1bmN0aW9uIHJlbmRlckZpbGVzKGZpbGVzKSB7XG5cdCAgICAgIHZhciBmaWxlTGlzdCA9IGZpbGVzLm1hcChmdW5jdGlvbiAoZmlsZSkge1xuXHQgICAgICAgIHJldHVybiBmaWxlLnVybCB8fCBmaWxlLnRodW1iVXJsO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChtdWx0aXBsZSA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiBmaWxlTGlzdFswXTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZmlsZUxpc3Q7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciB1cGxvYWRQcm9wcyA9IHtcblx0ICAgICAgYWN0aW9uOiAndGVzdC5kbycsIC8vbmV3YmFuZC5hcHAuYWRtaW4uQVBJX0hPU1QgKyAnP2FjY2Vzc190b2tlbj0nICsgQ29va2llLmdldCgnYWNjZXNzX3Rva2VuJyksXG5cdCAgICAgIGRhdGE6IHt9LFxuXHQgICAgICBsaXN0VHlwZTogJ3BpY3R1cmUtY2FyZCcsXG5cdCAgICAgIGZpbGVMaXN0OiBmaWxlTGlzdCxcblx0ICAgICAgbXVsdGlwbGU6IG11bHRpcGxlID09PSB0cnVlLFxuXHQgICAgICBvblByZXZpZXc6IGZ1bmN0aW9uIG9uUHJldmlldyhmaWxlKSB7XG5cdCAgICAgICAgX3RoaXMyLnNldFN0YXRlKHtcblx0ICAgICAgICAgIHByZXZpZXdJbWFnZTogZmlsZS51cmwgfHwgZmlsZS50aHVtYlVybCxcblx0ICAgICAgICAgIHByZXZpZXdWaXNpYmxlOiB0cnVlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfSxcblx0ICAgICAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKF9yZWYpIHtcblx0ICAgICAgICB2YXIgZmlsZSA9IF9yZWYuZmlsZSxcblx0ICAgICAgICAgICAgZmlsZUxpc3QgPSBfcmVmLmZpbGVMaXN0LFxuXHQgICAgICAgICAgICBlID0gX3JlZi5lO1xuXHRcblx0ICAgICAgICBfdGhpczIuc2V0U3RhdGUoeyBmaWxlTGlzdDogZmlsZUxpc3QgfSk7XG5cdCAgICAgICAgb25VcGxvYWQocmVuZGVyRmlsZXMoZmlsZUxpc3QpKTtcblx0ICAgICAgfSxcblx0ICAgICAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKGZpbGUpIHtcblx0ICAgICAgICB2YXIgZmlsZUxpc3QgPSBfdGhpczIuc3RhdGUuZmlsZUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gaXRlbS51aWQgIT09IGZpbGUudWlkO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIG9uVXBsb2FkKHJlbmRlckZpbGVzKGZpbGVMaXN0KSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIG1vZGFsUHJvcHMgPSB7XG5cdCAgICAgIHZpc2libGU6IHByZXZpZXdWaXNpYmxlLFxuXHQgICAgICBmb290ZXI6IG51bGwsXG5cdCAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMyLnNldFN0YXRlKHsgcHJldmlld1Zpc2libGU6IGZhbHNlIH0pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciB1cGxvYWRCdXR0b24gPSBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgJ2RpdicsXG5cdCAgICAgIG51bGwsXG5cdCAgICAgIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KF9pY29uMi5kZWZhdWx0LCB7IHR5cGU6ICdwbHVzJyB9KSxcblx0ICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgJ2RpdicsXG5cdCAgICAgICAgeyBjbGFzc05hbWU6ICdhbnQtdXBsb2FkLXRleHQnIH0sXG5cdCAgICAgICAgJ1xcdTcwQjlcXHU1MUZCXFx1NEUwQVxcdTRGMjAnXG5cdCAgICAgIClcblx0ICAgICk7XG5cdFxuXHQgICAgcmV0dXJuIF9yZWFjdDIuZGVmYXVsdC5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAnZGl2Jyxcblx0ICAgICAgeyBjbGFzc05hbWU6ICdjbGVhcmZpeCcgfSxcblx0ICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgX3VwbG9hZDIuZGVmYXVsdCxcblx0ICAgICAgICB1cGxvYWRQcm9wcyxcblx0ICAgICAgICBtdWx0aXBsZSA9PT0gdHJ1ZSA/IHVwbG9hZEJ1dHRvbiA6IGZpbGVMaXN0Lmxlbmd0aCA+PSBtdWx0aXBsZSA/IG51bGwgOiB1cGxvYWRCdXR0b25cblx0ICAgICAgKSxcblx0ICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgX21vZGFsMi5kZWZhdWx0LFxuXHQgICAgICAgIG1vZGFsUHJvcHMsXG5cdCAgICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHsgY2xhc3NOYW1lOiBfVXBsb2FkRmlsZTIuZGVmYXVsdC5wcmV2aWV3SW1hZ2UsIGFsdDogJycsIHNyYzogcHJldmlld0ltYWdlIH0pXG5cdCAgICAgIClcblx0ICAgICk7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIFVwbG9hZEZpbGVzO1xuXHR9KF9yZWFjdDIuZGVmYXVsdC5Db21wb25lbnQpLCBfY2xhc3MucHJvcFR5cGVzID0ge1xuXHQgIGZpbGVMaXN0OiBfcmVhY3QuUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0LlByb3BUeXBlcy5hcnJheSwgX3JlYWN0LlByb3BUeXBlcy5zdHJpbmddKS5pc1JlcXVpcmVkLFxuXHQgIG9uVXBsb2FkOiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCxcblx0ICBtdWx0aXBsZTogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMuYm9vbCwgX3JlYWN0LlByb3BUeXBlcy5udW1iZXJdKVxuXHR9LCBfdGVtcCk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFVwbG9hZEZpbGVzO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcblxuLyoqKi8gNzE2OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3N0eWxlMyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9idXR0b24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBfYnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2J1dHRvbik7XG5cdFxuXHR2YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cdFxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cdFxuXHR2YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cdFxuXHR2YXIgX2luaGVyaXRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHR2YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cdFxuXHR2YXIgX3N0eWxlNCA9IF9fd2VicGFja19yZXF1aXJlX18oODcpO1xuXHRcblx0dmFyIF9mb3JtID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Nik7XG5cdFxuXHR2YXIgX2Zvcm0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZm9ybSk7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9VcGxvYWRGaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2ODApO1xuXHRcblx0dmFyIF9VcGxvYWRGaWxlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1VwbG9hZEZpbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBGb3JtSXRlbSA9IF9mb3JtMi5kZWZhdWx0Lkl0ZW07XG5cdFxuXHR2YXIgZm9ybUl0ZW1MYXlvdXQgPSB7XG5cdCAgbGFiZWxDb2w6IHtcblx0ICAgIHNwYW46IDZcblx0ICB9LFxuXHQgIHdyYXBwZXJDb2w6IHtcblx0ICAgIHNwYW46IDE0XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIERlbW8gPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuXHQgICgwLCBfaW5oZXJpdHMzLmRlZmF1bHQpKERlbW8sIF9Db21wb25lbnQpO1xuXHRcblx0ICBmdW5jdGlvbiBEZW1vKCkge1xuXHQgICAgKDAsIF9jbGFzc0NhbGxDaGVjazMuZGVmYXVsdCkodGhpcywgRGVtbyk7XG5cdCAgICByZXR1cm4gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMy5kZWZhdWx0KSh0aGlzLCBfQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgRGVtby5wcm90b3R5cGUuaGFuZGxlVXBsb2FkID0gZnVuY3Rpb24gaGFuZGxlVXBsb2FkKGZpbGVzKSB7fTtcblx0XG5cdCAgRGVtby5wcm90b3R5cGUuaGFuZGxlT2sgPSBmdW5jdGlvbiBoYW5kbGVPayhlKSB7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgfTtcblx0XG5cdCAgRGVtby5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuXHRcblx0ICAgIC8vIGNvbnN0IGZpbGVzID0gJ2h0dHBzOi8vem9zLmFsaXBheW9iamVjdHMuY29tL3Jtc3BvcnRhbC9qa2pna0VmdnBVUFZ5UmpVSW1uaVZzbFpmV1BuSnV1Wi5wbmcnXG5cdCAgICB2YXIgZmlsZXMgPSBbJ2h0dHBzOi8vem9zLmFsaXBheW9iamVjdHMuY29tL3Jtc3BvcnRhbC9qa2pna0VmdnBVUFZ5UmpVSW1uaVZzbFpmV1BuSnV1Wi5wbmcnXTtcblx0XG5cdCAgICByZXR1cm4gX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgIF9mb3JtMi5kZWZhdWx0LFxuXHQgICAgICB7IGhvcml6b250YWw6IHRydWUsIG9uU3VibWl0OiB0aGlzLmhhbmRsZU9rLmJpbmQodGhpcykgfSxcblx0ICAgICAgX3JlYWN0Mi5kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgICAgRm9ybUl0ZW0sXG5cdCAgICAgICAgKDAsIF9leHRlbmRzMy5kZWZhdWx0KSh7IGxhYmVsOiAnXFx1NzUyOFxcdTYyMzdcXHU1NDBEXFx1RkYxQScsIGhhc0ZlZWRiYWNrOiB0cnVlIH0sIGZvcm1JdGVtTGF5b3V0KSxcblx0ICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChfVXBsb2FkRmlsZTIuZGVmYXVsdCwgeyBmaWxlTGlzdDogZmlsZXMsIG9uVXBsb2FkOiB0aGlzLmhhbmRsZVVwbG9hZC5iaW5kKHRoaXMpLCBtdWx0aXBsZTogdHJ1ZSB9KVxuXHQgICAgICApLFxuXHQgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICBGb3JtSXRlbSxcblx0ICAgICAgICBmb3JtSXRlbUxheW91dCxcblx0ICAgICAgICBfcmVhY3QyLmRlZmF1bHQuY3JlYXRlRWxlbWVudChcblx0ICAgICAgICAgIF9idXR0b24yLmRlZmF1bHQsXG5cdCAgICAgICAgICB7IHR5cGU6ICdwcmltYXJ5JywgaHRtbFR5cGU6ICdzdWJtaXQnLCBzaXplOiAnbGFyZ2UnIH0sXG5cdCAgICAgICAgICAnXFx1Nzg2RVxcdThCQTRcXHU2M0QwXFx1NEVBNCdcblx0ICAgICAgICApXG5cdCAgICAgIClcblx0ICAgICk7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIERlbW87XG5cdH0oX3JlYWN0LkNvbXBvbmVudCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBfZm9ybTIuZGVmYXVsdC5jcmVhdGUoKShEZW1vKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG5cbi8qKiovIDg1MTpcbjEwLFxuXG4vKioqLyA4NTU6XG4xMCxcblxuLyoqKi8gODYxOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XCJwcmV2aWV3SW1hZ2VcIjpcInByZXZpZXdJbWFnZV9fX1J3c0FwXCJ9O1xuXG4vKioqLyB9LFxuXG4vKioqLyAxMDQ4OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfbWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyMSk7XG5cdFxuXHR2YXIgX21peGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGluKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfSAvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovXG5cdFxuXHRcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7XG5cdCAgZGlzcGxheU5hbWU6ICdDaXJjbGUnLFxuXHRcblx0ICBtaXhpbnM6IFtfbWl4aW4yW1wiZGVmYXVsdFwiXV0sXG5cdCAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuXHQgICAgdmFyIHByZWZpeENscyA9IF9wcm9wcy5wcmVmaXhDbHM7XG5cdCAgICB2YXIgc3Ryb2tlV2lkdGggPSBfcHJvcHMuc3Ryb2tlV2lkdGg7XG5cdCAgICB2YXIgdHJhaWxXaWR0aCA9IF9wcm9wcy50cmFpbFdpZHRoO1xuXHQgICAgdmFyIHN0cm9rZUNvbG9yID0gX3Byb3BzLnN0cm9rZUNvbG9yO1xuXHQgICAgdmFyIHRyYWlsQ29sb3IgPSBfcHJvcHMudHJhaWxDb2xvcjtcblx0ICAgIHZhciBzdHJva2VMaW5lY2FwID0gX3Byb3BzLnN0cm9rZUxpbmVjYXA7XG5cdCAgICB2YXIgcGVyY2VudCA9IF9wcm9wcy5wZXJjZW50O1xuXHQgICAgdmFyIHN0eWxlID0gX3Byb3BzLnN0eWxlO1xuXHQgICAgdmFyIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWU7XG5cdFxuXHQgICAgdmFyIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsncHJlZml4Q2xzJywgJ3N0cm9rZVdpZHRoJywgJ3RyYWlsV2lkdGgnLCAnc3Ryb2tlQ29sb3InLCAndHJhaWxDb2xvcicsICdzdHJva2VMaW5lY2FwJywgJ3BlcmNlbnQnLCAnc3R5bGUnLCAnY2xhc3NOYW1lJ10pO1xuXHRcblx0ICAgIHZhciByYWRpdXMgPSA1MCAtIHN0cm9rZVdpZHRoIC8gMjtcblx0ICAgIHZhciBwYXRoU3RyaW5nID0gJ00gNTAsNTAgbSAwLC0nICsgcmFkaXVzICsgJ1xcbiAgICAgYSAnICsgcmFkaXVzICsgJywnICsgcmFkaXVzICsgJyAwIDEgMSAwLCcgKyAyICogcmFkaXVzICsgJ1xcbiAgICAgYSAnICsgcmFkaXVzICsgJywnICsgcmFkaXVzICsgJyAwIDEgMSAwLC0nICsgMiAqIHJhZGl1cztcblx0ICAgIHZhciBsZW4gPSBNYXRoLlBJICogMiAqIHJhZGl1cztcblx0ICAgIHZhciBwYXRoU3R5bGUgPSB7XG5cdCAgICAgIHN0cm9rZURhc2hhcnJheTogbGVuICsgJ3B4ICcgKyBsZW4gKyAncHgnLFxuXHQgICAgICBzdHJva2VEYXNob2Zmc2V0OiAoMTAwIC0gcGVyY2VudCkgLyAxMDAgKiBsZW4gKyAncHgnLFxuXHQgICAgICB0cmFuc2l0aW9uOiAnc3Ryb2tlLWRhc2hvZmZzZXQgMC4zcyBlYXNlIDBzLCBzdHJva2UgMC4zcyBlYXNlJ1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcblx0ICAgICAgJ3N2ZycsXG5cdCAgICAgIF9leHRlbmRzKHtcblx0ICAgICAgICBjbGFzc05hbWU6IHByZWZpeENscyArICctY2lyY2xlICcgKyBjbGFzc05hbWUsXG5cdCAgICAgICAgdmlld0JveDogJzAgMCAxMDAgMTAwJyxcblx0ICAgICAgICBzdHlsZTogc3R5bGVcblx0ICAgICAgfSwgcmVzdFByb3BzKSxcblx0ICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgncGF0aCcsIHtcblx0ICAgICAgICBjbGFzc05hbWU6IHByZWZpeENscyArICctY2lyY2xlLXRyYWlsJyxcblx0ICAgICAgICBkOiBwYXRoU3RyaW5nLFxuXHQgICAgICAgIHN0cm9rZTogdHJhaWxDb2xvcixcblx0ICAgICAgICBzdHJva2VXaWR0aDogdHJhaWxXaWR0aCB8fCBzdHJva2VXaWR0aCxcblx0ICAgICAgICBmaWxsT3BhY2l0eTogJzAnXG5cdCAgICAgIH0pLFxuXHQgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdwYXRoJywge1xuXHQgICAgICAgIGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1jaXJjbGUtcGF0aCcsXG5cdCAgICAgICAgZDogcGF0aFN0cmluZyxcblx0ICAgICAgICBzdHJva2VMaW5lY2FwOiBzdHJva2VMaW5lY2FwLFxuXHQgICAgICAgIHN0cm9rZTogc3Ryb2tlQ29sb3IsXG5cdCAgICAgICAgc3Ryb2tlV2lkdGg6IHN0cm9rZVdpZHRoLFxuXHQgICAgICAgIGZpbGxPcGFjaXR5OiAnMCcsXG5cdCAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYocGF0aCkge1xuXHQgICAgICAgICAgX3RoaXMucGF0aCA9IHBhdGg7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzdHlsZTogcGF0aFN0eWxlXG5cdCAgICAgIH0pXG5cdCAgICApO1xuXHQgIH1cblx0fSk7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAxMDQ5OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfbWl4aW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyMSk7XG5cdFxuXHR2YXIgX21peGluMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGluKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKG9iaiwga2V5cykgeyB2YXIgdGFyZ2V0ID0ge307IGZvciAodmFyIGkgaW4gb2JqKSB7IGlmIChrZXlzLmluZGV4T2YoaSkgPj0gMCkgY29udGludWU7IGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaSkpIGNvbnRpbnVlOyB0YXJnZXRbaV0gPSBvYmpbaV07IH0gcmV0dXJuIHRhcmdldDsgfSAvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9wcm9wLXR5cGVzICovXG5cdFxuXHRcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7XG5cdCAgZGlzcGxheU5hbWU6ICdMaW5lJyxcblx0XG5cdCAgbWl4aW5zOiBbX21peGluMltcImRlZmF1bHRcIl1dLFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcztcblx0ICAgIHZhciBwcmVmaXhDbHMgPSBfcHJvcHMucHJlZml4Q2xzO1xuXHQgICAgdmFyIHN0cm9rZVdpZHRoID0gX3Byb3BzLnN0cm9rZVdpZHRoO1xuXHQgICAgdmFyIHRyYWlsV2lkdGggPSBfcHJvcHMudHJhaWxXaWR0aDtcblx0ICAgIHZhciBzdHJva2VDb2xvciA9IF9wcm9wcy5zdHJva2VDb2xvcjtcblx0ICAgIHZhciB0cmFpbENvbG9yID0gX3Byb3BzLnRyYWlsQ29sb3I7XG5cdCAgICB2YXIgc3Ryb2tlTGluZWNhcCA9IF9wcm9wcy5zdHJva2VMaW5lY2FwO1xuXHQgICAgdmFyIHBlcmNlbnQgPSBfcHJvcHMucGVyY2VudDtcblx0ICAgIHZhciBzdHlsZSA9IF9wcm9wcy5zdHlsZTtcblx0ICAgIHZhciBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lO1xuXHRcblx0ICAgIHZhciByZXN0UHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoX3Byb3BzLCBbJ3ByZWZpeENscycsICdzdHJva2VXaWR0aCcsICd0cmFpbFdpZHRoJywgJ3N0cm9rZUNvbG9yJywgJ3RyYWlsQ29sb3InLCAnc3Ryb2tlTGluZWNhcCcsICdwZXJjZW50JywgJ3N0eWxlJywgJ2NsYXNzTmFtZSddKTtcblx0XG5cdCAgICB2YXIgcGF0aFN0eWxlID0ge1xuXHQgICAgICBzdHJva2VEYXNoYXJyYXk6ICcxMDBweCwgMTAwcHgnLFxuXHQgICAgICBzdHJva2VEYXNob2Zmc2V0OiAxMDAgLSBwZXJjZW50ICsgJ3B4Jyxcblx0ICAgICAgdHJhbnNpdGlvbjogJ3N0cm9rZS1kYXNob2Zmc2V0IDAuM3MgZWFzZSAwcywgc3Ryb2tlIDAuM3MgbGluZWFyJ1xuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgY2VudGVyID0gc3Ryb2tlV2lkdGggLyAyO1xuXHQgICAgdmFyIHJpZ2h0ID0gMTAwIC0gc3Ryb2tlV2lkdGggLyAyO1xuXHQgICAgdmFyIHBhdGhTdHJpbmcgPSAnTSAnICsgY2VudGVyICsgJywnICsgY2VudGVyICsgJyBMICcgKyByaWdodCArICcsJyArIGNlbnRlcjtcblx0ICAgIHZhciB2aWV3Qm94U3RyaW5nID0gJzAgMCAxMDAgJyArIHN0cm9rZVdpZHRoO1xuXHRcblx0ICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuXHQgICAgICAnc3ZnJyxcblx0ICAgICAgX2V4dGVuZHMoe1xuXHQgICAgICAgIGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saW5lICcgKyBjbGFzc05hbWUsXG5cdCAgICAgICAgdmlld0JveDogdmlld0JveFN0cmluZyxcblx0ICAgICAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiAnbm9uZScsXG5cdCAgICAgICAgc3R5bGU6IHN0eWxlXG5cdCAgICAgIH0sIHJlc3RQcm9wcyksXG5cdCAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7XG5cdCAgICAgICAgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWxpbmUtdHJhaWwnLFxuXHQgICAgICAgIGQ6IHBhdGhTdHJpbmcsXG5cdCAgICAgICAgc3Ryb2tlTGluZWNhcDogc3Ryb2tlTGluZWNhcCxcblx0ICAgICAgICBzdHJva2U6IHRyYWlsQ29sb3IsXG5cdCAgICAgICAgc3Ryb2tlV2lkdGg6IHRyYWlsV2lkdGggfHwgc3Ryb2tlV2lkdGgsXG5cdCAgICAgICAgZmlsbE9wYWNpdHk6ICcwJ1xuXHQgICAgICB9KSxcblx0ICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgncGF0aCcsIHtcblx0ICAgICAgICBjbGFzc05hbWU6IHByZWZpeENscyArICctbGluZS1wYXRoJyxcblx0ICAgICAgICBkOiBwYXRoU3RyaW5nLFxuXHQgICAgICAgIHN0cm9rZUxpbmVjYXA6IHN0cm9rZUxpbmVjYXAsXG5cdCAgICAgICAgc3Ryb2tlOiBzdHJva2VDb2xvcixcblx0ICAgICAgICBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsXG5cdCAgICAgICAgZmlsbE9wYWNpdHk6ICcwJyxcblx0ICAgICAgICByZWY6IGZ1bmN0aW9uIHJlZihwYXRoKSB7XG5cdCAgICAgICAgICBfdGhpcy5wYXRoID0gcGF0aDtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHN0eWxlOiBwYXRoU3R5bGVcblx0ICAgICAgfSlcblx0ICAgICk7XG5cdCAgfVxuXHR9KTtcblx0bW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cbi8qKiovIH0sXG5cbi8qKiovIDEwNTA6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfTGluZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA0OSk7XG5cdFxuXHR2YXIgX0xpbmUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTGluZSk7XG5cdFxuXHR2YXIgX0NpcmNsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA0OCk7XG5cdFxuXHR2YXIgX0NpcmNsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9DaXJjbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzW1wiZGVmYXVsdFwiXSA9IHtcblx0ICBMaW5lOiBfTGluZTJbXCJkZWZhdWx0XCJdLFxuXHQgIENpcmNsZTogX0NpcmNsZTJbXCJkZWZhdWx0XCJdXG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAxMDYyOlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5MiA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgX2RlZmluZVByb3BlcnR5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5Mik7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblx0XG5cdHZhciBfcmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2Nik7XG5cdFxuXHR2YXIgX3JlcXVlc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVxdWVzdCk7XG5cdFxuXHR2YXIgX3VpZCA9IF9fd2VicGFja19yZXF1aXJlX18oNTI0KTtcblx0XG5cdHZhciBfdWlkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3VpZCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblx0XG5cdC8qIGVzbGludCByZWFjdC9uby1pcy1tb3VudGVkOjAqL1xuXHRcblx0dmFyIEFqYXhVcGxvYWRlciA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUNsYXNzKHtcblx0ICBkaXNwbGF5TmFtZTogJ0FqYXhVcGxvYWRlcicsXG5cdFxuXHQgIHByb3BUeXBlczoge1xuXHQgICAgY29tcG9uZW50OiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIHN0eWxlOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcblx0ICAgIHByZWZpeENsczogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBjbGFzc05hbWU6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgbXVsdGlwbGU6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIGRpc2FibGVkOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBhY2NlcHQ6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgY2hpbGRyZW46IF9yZWFjdC5Qcm9wVHlwZXMuYW55LFxuXHQgICAgb25TdGFydDogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuXHQgICAgZGF0YTogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMub2JqZWN0LCBfcmVhY3QuUHJvcFR5cGVzLmZ1bmNdKSxcblx0ICAgIGhlYWRlcnM6IF9yZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuXHQgICAgYmVmb3JlVXBsb2FkOiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICBjdXN0b21SZXF1ZXN0OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICB3aXRoQ3JlZGVudGlhbHM6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbFxuXHQgIH0sXG5cdFxuXHQgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuXHQgICAgdGhpcy5yZXFzID0ge307XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB1aWQ6ICgwLCBfdWlkMltcImRlZmF1bHRcIl0pKClcblx0ICAgIH07XG5cdCAgfSxcblx0ICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG5cdCAgICB0aGlzLmFib3J0KCk7XG5cdCAgfSxcblx0ICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSkge1xuXHQgICAgdmFyIGZpbGVzID0gZS50YXJnZXQuZmlsZXM7XG5cdCAgICB0aGlzLnVwbG9hZEZpbGVzKGZpbGVzKTtcblx0ICAgIHRoaXMucmVzZXQoKTtcblx0ICB9LFxuXHQgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLnJlZnMuZmlsZTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwuY2xpY2soKTtcblx0ICB9LFxuXHQgIG9uS2V5RG93bjogZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcblx0ICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykge1xuXHQgICAgICB0aGlzLm9uQ2xpY2soKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIG9uRmlsZURyb3A6IGZ1bmN0aW9uIG9uRmlsZURyb3AoZSkge1xuXHQgICAgaWYgKGUudHlwZSA9PT0gJ2RyYWdvdmVyJykge1xuXHQgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlcztcblx0ICAgIHRoaXMudXBsb2FkRmlsZXMoZmlsZXMpO1xuXHRcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICB9LFxuXHQgIHVwbG9hZEZpbGVzOiBmdW5jdGlvbiB1cGxvYWRGaWxlcyhmaWxlcykge1xuXHQgICAgdmFyIHBvc3RGaWxlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZpbGVzKTtcblx0ICAgIHZhciBsZW4gPSBwb3N0RmlsZXMubGVuZ3RoO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICB2YXIgZmlsZSA9IHBvc3RGaWxlc1tpXTtcblx0ICAgICAgZmlsZS51aWQgPSAoMCwgX3VpZDJbXCJkZWZhdWx0XCJdKSgpO1xuXHQgICAgICB0aGlzLnVwbG9hZChmaWxlLCBwb3N0RmlsZXMpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdXBsb2FkOiBmdW5jdGlvbiB1cGxvYWQoZmlsZSwgZmlsZUxpc3QpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblx0XG5cdCAgICBpZiAoIXByb3BzLmJlZm9yZVVwbG9hZCkge1xuXHQgICAgICAvLyBhbHdheXMgYXN5bmMgaW4gY2FzZSB1c2UgcmVhY3Qgc3RhdGUgdG8ga2VlcCBmaWxlTGlzdFxuXHQgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLnBvc3QoZmlsZSk7XG5cdCAgICAgIH0sIDApO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBiZWZvcmUgPSBwcm9wcy5iZWZvcmVVcGxvYWQoZmlsZSwgZmlsZUxpc3QpO1xuXHQgICAgaWYgKGJlZm9yZSAmJiBiZWZvcmUudGhlbikge1xuXHQgICAgICBiZWZvcmUudGhlbihmdW5jdGlvbiAocHJvY2Vzc2VkRmlsZSkge1xuXHQgICAgICAgIHZhciBwcm9jZXNzZWRGaWxlVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzZWRGaWxlKTtcblx0ICAgICAgICBpZiAocHJvY2Vzc2VkRmlsZVR5cGUgPT09ICdbb2JqZWN0IEZpbGVdJyB8fCBwcm9jZXNzZWRGaWxlVHlwZSA9PT0gJ1tvYmplY3QgQmxvYl0nKSB7XG5cdCAgICAgICAgICBfdGhpcy5wb3N0KHByb2Nlc3NlZEZpbGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfdGhpcy5wb3N0KGZpbGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGlmIChiZWZvcmUgIT09IGZhbHNlKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5wb3N0KGZpbGUpO1xuXHQgICAgICB9LCAwKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHBvc3Q6IGZ1bmN0aW9uIHBvc3QoZmlsZSkge1xuXHQgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgaWYgKCF0aGlzLmlzTW91bnRlZCgpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG5cdCAgICB2YXIgZGF0YSA9IHByb3BzLmRhdGE7XG5cdCAgICB2YXIgb25TdGFydCA9IHByb3BzLm9uU3RhcnQ7XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGRhdGEgPSBkYXRhKGZpbGUpO1xuXHQgICAgfVxuXHQgICAgdmFyIHVpZCA9IGZpbGUudWlkO1xuXHRcblx0ICAgIHZhciByZXF1ZXN0ID0gcHJvcHMuY3VzdG9tUmVxdWVzdCB8fCBfcmVxdWVzdDJbXCJkZWZhdWx0XCJdO1xuXHQgICAgdGhpcy5yZXFzW3VpZF0gPSByZXF1ZXN0KHtcblx0ICAgICAgYWN0aW9uOiBwcm9wcy5hY3Rpb24sXG5cdCAgICAgIGZpbGVuYW1lOiBwcm9wcy5uYW1lLFxuXHQgICAgICBmaWxlOiBmaWxlLFxuXHQgICAgICBkYXRhOiBkYXRhLFxuXHQgICAgICBoZWFkZXJzOiBwcm9wcy5oZWFkZXJzLFxuXHQgICAgICB3aXRoQ3JlZGVudGlhbHM6IHByb3BzLndpdGhDcmVkZW50aWFscyxcblx0ICAgICAgb25Qcm9ncmVzczogZnVuY3Rpb24gb25Qcm9ncmVzcyhlKSB7XG5cdCAgICAgICAgcHJvcHMub25Qcm9ncmVzcyhlLCBmaWxlKTtcblx0ICAgICAgfSxcblx0ICAgICAgb25TdWNjZXNzOiBmdW5jdGlvbiBvblN1Y2Nlc3MocmV0KSB7XG5cdCAgICAgICAgZGVsZXRlIF90aGlzMi5yZXFzW3VpZF07XG5cdCAgICAgICAgcHJvcHMub25TdWNjZXNzKHJldCwgZmlsZSk7XG5cdCAgICAgIH0sXG5cdCAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIG9uRXJyb3IoZXJyLCByZXQpIHtcblx0ICAgICAgICBkZWxldGUgX3RoaXMyLnJlcXNbdWlkXTtcblx0ICAgICAgICBwcm9wcy5vbkVycm9yKGVyciwgcmV0LCBmaWxlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICBvblN0YXJ0KGZpbGUpO1xuXHQgIH0sXG5cdCAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHQgICAgdGhpcy5zZXRTdGF0ZSh7XG5cdCAgICAgIHVpZDogKDAsIF91aWQyW1wiZGVmYXVsdFwiXSkoKVxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBhYm9ydDogZnVuY3Rpb24gYWJvcnQoZmlsZSkge1xuXHQgICAgdmFyIHJlcXMgPSB0aGlzLnJlcXM7XG5cdFxuXHQgICAgaWYgKGZpbGUpIHtcblx0ICAgICAgdmFyIHVpZCA9IGZpbGU7XG5cdCAgICAgIGlmIChmaWxlICYmIGZpbGUudWlkKSB7XG5cdCAgICAgICAgdWlkID0gZmlsZS51aWQ7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlcXNbdWlkXSkge1xuXHQgICAgICAgIHJlcXNbdWlkXS5hYm9ydCgpO1xuXHQgICAgICAgIGRlbGV0ZSByZXFzW3VpZF07XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIE9iamVjdC5rZXlzKHJlcXMpLmZvckVhY2goZnVuY3Rpb24gKHVpZCkge1xuXHQgICAgICAgIGlmIChyZXFzW3VpZF0pIHJlcXNbdWlkXS5hYm9ydCgpO1xuXHQgICAgICAgIGRlbGV0ZSByZXFzW3VpZF07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICB2YXIgX2NsYXNzTmFtZXM7XG5cdFxuXHQgICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG5cdCAgICAgICAgVGFnID0gX3Byb3BzLmNvbXBvbmVudCxcblx0ICAgICAgICBwcmVmaXhDbHMgPSBfcHJvcHMucHJlZml4Q2xzLFxuXHQgICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG5cdCAgICAgICAgZGlzYWJsZWQgPSBfcHJvcHMuZGlzYWJsZWQsXG5cdCAgICAgICAgc3R5bGUgPSBfcHJvcHMuc3R5bGUsXG5cdCAgICAgICAgbXVsdGlwbGUgPSBfcHJvcHMubXVsdGlwbGUsXG5cdCAgICAgICAgYWNjZXB0ID0gX3Byb3BzLmFjY2VwdCxcblx0ICAgICAgICBjaGlsZHJlbiA9IF9wcm9wcy5jaGlsZHJlbjtcblx0XG5cdCAgICB2YXIgY2xzID0gKDAsIF9jbGFzc25hbWVzMltcImRlZmF1bHRcIl0pKChfY2xhc3NOYW1lcyA9IHt9LCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzLCBwcmVmaXhDbHMsIHRydWUpLCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzLCBwcmVmaXhDbHMgKyAnLWRpc2FibGVkJywgZGlzYWJsZWQpLCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzLCBjbGFzc05hbWUsIGNsYXNzTmFtZSksIF9jbGFzc05hbWVzKSk7XG5cdCAgICB2YXIgZXZlbnRzID0gZGlzYWJsZWQgPyB7fSA6IHtcblx0ICAgICAgb25DbGljazogdGhpcy5vbkNsaWNrLFxuXHQgICAgICBvbktleURvd246IHRoaXMub25LZXlEb3duLFxuXHQgICAgICBvbkRyb3A6IHRoaXMub25GaWxlRHJvcCxcblx0ICAgICAgb25EcmFnT3ZlcjogdGhpcy5vbkZpbGVEcm9wLFxuXHQgICAgICB0YWJJbmRleDogJzAnXG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgIFRhZyxcblx0ICAgICAgKDAsIF9leHRlbmRzM1tcImRlZmF1bHRcIl0pKHt9LCBldmVudHMsIHtcblx0ICAgICAgICBjbGFzc05hbWU6IGNscyxcblx0ICAgICAgICByb2xlOiAnYnV0dG9uJyxcblx0ICAgICAgICBzdHlsZTogc3R5bGVcblx0ICAgICAgfSksXG5cdCAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jywge1xuXHQgICAgICAgIHR5cGU6ICdmaWxlJyxcblx0ICAgICAgICByZWY6ICdmaWxlJyxcblx0ICAgICAgICBrZXk6IHRoaXMuc3RhdGUudWlkLFxuXHQgICAgICAgIHN0eWxlOiB7IGRpc3BsYXk6ICdub25lJyB9LFxuXHQgICAgICAgIGFjY2VwdDogYWNjZXB0LFxuXHQgICAgICAgIG11bHRpcGxlOiBtdWx0aXBsZSxcblx0ICAgICAgICBvbkNoYW5nZTogdGhpcy5vbkNoYW5nZVxuXHQgICAgICB9KSxcblx0ICAgICAgY2hpbGRyZW5cblx0ICAgICk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQWpheFVwbG9hZGVyO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMTA2Mzpcbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0dmFyIF9kZWZpbmVQcm9wZXJ0eTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eTIpO1xuXHRcblx0dmFyIF9leHRlbmRzMiA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXHRcblx0dmFyIF9yZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblx0XG5cdHZhciBfcmVhY3REb20gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0dmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cdFxuXHR2YXIgX2NsYXNzbmFtZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXHRcblx0dmFyIF91aWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUyNCk7XG5cdFxuXHR2YXIgX3VpZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91aWQpO1xuXHRcblx0dmFyIF93YXJuaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDY3KTtcblx0XG5cdHZhciBfd2FybmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93YXJuaW5nKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXHRcblx0dmFyIElGUkFNRV9TVFlMRSA9IHtcblx0ICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcblx0ICB0b3A6IDAsXG5cdCAgb3BhY2l0eTogMCxcblx0ICBmaWx0ZXI6ICdhbHBoYShvcGFjaXR5PTApJyxcblx0ICBsZWZ0OiAwLFxuXHQgIHpJbmRleDogOTk5OVxuXHR9O1xuXHRcblx0Ly8gZGlmZXJlbnQgZnJvbSBBamF4VXBsb2FkLCBjYW4gb25seSB1cGxvYWQgb24gYXQgb25lIHRpbWUsIHNlcmlhbCBzZXJpb3VzbHlcblx0dmFyIElmcmFtZVVwbG9hZGVyID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlQ2xhc3Moe1xuXHQgIGRpc3BsYXlOYW1lOiAnSWZyYW1lVXBsb2FkZXInLFxuXHRcblx0ICBwcm9wVHlwZXM6IHtcblx0ICAgIGNvbXBvbmVudDogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBzdHlsZTogX3JlYWN0LlByb3BUeXBlcy5vYmplY3QsXG5cdCAgICBkaXNhYmxlZDogX3JlYWN0LlByb3BUeXBlcy5ib29sLFxuXHQgICAgcHJlZml4Q2xzOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIGNsYXNzTmFtZTogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBhY2NlcHQ6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgb25TdGFydDogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuXHQgICAgbXVsdGlwbGU6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIGNoaWxkcmVuOiBfcmVhY3QuUHJvcFR5cGVzLmFueSxcblx0ICAgIGRhdGE6IF9yZWFjdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCwgX3JlYWN0LlByb3BUeXBlcy5mdW5jXSksXG5cdCAgICBhY3Rpb246IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgbmFtZTogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmdcblx0ICB9LFxuXHRcblx0ICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcblx0ICAgIHRoaXMuZmlsZSA9IHt9O1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdXBsb2FkaW5nOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9LFxuXHQgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcblx0ICAgIHRoaXMudXBkYXRlSWZyYW1lV0goKTtcblx0ICAgIHRoaXMuaW5pdElmcmFtZSgpO1xuXHQgIH0sXG5cdCAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUoKSB7XG5cdCAgICB0aGlzLnVwZGF0ZUlmcmFtZVdIKCk7XG5cdCAgfSxcblx0ICBvbkxvYWQ6IGZ1bmN0aW9uIG9uTG9hZCgpIHtcblx0ICAgIGlmICghdGhpcy5zdGF0ZS51cGxvYWRpbmcpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcyxcblx0ICAgICAgICBmaWxlID0gdGhpcy5maWxlO1xuXHRcblx0ICAgIHZhciByZXNwb25zZSA9IHZvaWQgMDtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBkb2MgPSB0aGlzLmdldElmcmFtZURvY3VtZW50KCk7XG5cdCAgICAgIHZhciBzY3JpcHQgPSBkb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuXHQgICAgICBpZiAoc2NyaXB0ICYmIHNjcmlwdC5wYXJlbnROb2RlID09PSBkb2MuYm9keSkge1xuXHQgICAgICAgIGRvYy5ib2R5LnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmVzcG9uc2UgPSBkb2MuYm9keS5pbm5lckhUTUw7XG5cdCAgICAgIHByb3BzLm9uU3VjY2VzcyhyZXNwb25zZSwgZmlsZSk7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgKDAsIF93YXJuaW5nMltcImRlZmF1bHRcIl0pKGZhbHNlLCAnY3Jvc3MgZG9tYWluIGVycm9yIGZvciBVcGxvYWQuIE1heWJlIHNlcnZlciBzaG91bGQgcmV0dXJuIGRvY3VtZW50LmRvbWFpbiBzY3JpcHQuIHNlZSBOb3RlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC91cGxvYWQnKTtcblx0ICAgICAgcmVzcG9uc2UgPSAnY3Jvc3MtZG9tYWluJztcblx0ICAgICAgcHJvcHMub25FcnJvcihlcnIsIG51bGwsIGZpbGUpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5lbmRVcGxvYWQoKTtcblx0ICB9LFxuXHQgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0Rm9ybUlucHV0Tm9kZSgpO1xuXHQgICAgLy8gaWU4LzkgZG9uJ3Qgc3VwcG9ydCBGaWxlTGlzdCBPYmplY3Rcblx0ICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTI4MzAwNTgvaWU4LWlucHV0LXR5cGUtZmlsZS1nZXQtZmlsZXNcblx0ICAgIHZhciBmaWxlID0gdGhpcy5maWxlID0ge1xuXHQgICAgICB1aWQ6ICgwLCBfdWlkMltcImRlZmF1bHRcIl0pKCksXG5cdCAgICAgIG5hbWU6IHRhcmdldC52YWx1ZVxuXHQgICAgfTtcblx0ICAgIHRoaXMuc3RhcnRVcGxvYWQoKTtcblx0ICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG5cdFxuXHQgICAgaWYgKCFwcm9wcy5iZWZvcmVVcGxvYWQpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucG9zdChmaWxlKTtcblx0ICAgIH1cblx0ICAgIHZhciBiZWZvcmUgPSBwcm9wcy5iZWZvcmVVcGxvYWQoZmlsZSk7XG5cdCAgICBpZiAoYmVmb3JlICYmIGJlZm9yZS50aGVuKSB7XG5cdCAgICAgIGJlZm9yZS50aGVuKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfdGhpcy5wb3N0KGZpbGUpO1xuXHQgICAgICB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMuZW5kVXBsb2FkKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGlmIChiZWZvcmUgIT09IGZhbHNlKSB7XG5cdCAgICAgIHRoaXMucG9zdChmaWxlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZW5kVXBsb2FkKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBnZXRJZnJhbWVOb2RlOiBmdW5jdGlvbiBnZXRJZnJhbWVOb2RlKCkge1xuXHQgICAgcmV0dXJuIHRoaXMucmVmcy5pZnJhbWU7XG5cdCAgfSxcblx0ICBnZXRJZnJhbWVEb2N1bWVudDogZnVuY3Rpb24gZ2V0SWZyYW1lRG9jdW1lbnQoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5nZXRJZnJhbWVOb2RlKCkuY29udGVudERvY3VtZW50O1xuXHQgIH0sXG5cdCAgZ2V0Rm9ybU5vZGU6IGZ1bmN0aW9uIGdldEZvcm1Ob2RlKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuZ2V0SWZyYW1lRG9jdW1lbnQoKS5nZXRFbGVtZW50QnlJZCgnZm9ybScpO1xuXHQgIH0sXG5cdCAgZ2V0Rm9ybUlucHV0Tm9kZTogZnVuY3Rpb24gZ2V0Rm9ybUlucHV0Tm9kZSgpIHtcblx0ICAgIHJldHVybiB0aGlzLmdldElmcmFtZURvY3VtZW50KCkuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0Jyk7XG5cdCAgfSxcblx0ICBnZXRGb3JtRGF0YU5vZGU6IGZ1bmN0aW9uIGdldEZvcm1EYXRhTm9kZSgpIHtcblx0ICAgIHJldHVybiB0aGlzLmdldElmcmFtZURvY3VtZW50KCkuZ2V0RWxlbWVudEJ5SWQoJ2RhdGEnKTtcblx0ICB9LFxuXHQgIGdldEZpbGVGb3JNdWx0aXBsZTogZnVuY3Rpb24gZ2V0RmlsZUZvck11bHRpcGxlKGZpbGUpIHtcblx0ICAgIHJldHVybiB0aGlzLnByb3BzLm11bHRpcGxlID8gW2ZpbGVdIDogZmlsZTtcblx0ICB9LFxuXHQgIGdldElmcmFtZUhUTUw6IGZ1bmN0aW9uIGdldElmcmFtZUhUTUwoZG9tYWluKSB7XG5cdCAgICB2YXIgZG9tYWluU2NyaXB0ID0gJyc7XG5cdCAgICB2YXIgZG9tYWluSW5wdXQgPSAnJztcblx0ICAgIGlmIChkb21haW4pIHtcblx0ICAgICAgdmFyIHNjcmlwdCA9ICdzY3JpcHQnO1xuXHQgICAgICBkb21haW5TY3JpcHQgPSAnPCcgKyBzY3JpcHQgKyAnPmRvY3VtZW50LmRvbWFpbj1cIicgKyBkb21haW4gKyAnXCI7PC8nICsgc2NyaXB0ICsgJz4nO1xuXHQgICAgICBkb21haW5JbnB1dCA9ICc8aW5wdXQgbmFtZT1cIl9kb2N1bWVudERvbWFpblwiIHZhbHVlPVwiJyArIGRvbWFpbiArICdcIiAvPic7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJ1xcbiAgICA8IURPQ1RZUEUgaHRtbD5cXG4gICAgPGh0bWw+XFxuICAgIDxoZWFkPlxcbiAgICA8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIiAvPlxcbiAgICA8c3R5bGU+XFxuICAgIGJvZHksaHRtbCB7cGFkZGluZzowO21hcmdpbjowO2JvcmRlcjowO292ZXJmbG93OmhpZGRlbjt9XFxuICAgIDwvc3R5bGU+XFxuICAgICcgKyBkb21haW5TY3JpcHQgKyAnXFxuICAgIDwvaGVhZD5cXG4gICAgPGJvZHk+XFxuICAgIDxmb3JtIG1ldGhvZD1cInBvc3RcIlxcbiAgICBlbmNUeXBlPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiXFxuICAgIGFjdGlvbj1cIicgKyB0aGlzLnByb3BzLmFjdGlvbiArICdcIiBpZD1cImZvcm1cIlxcbiAgICBzdHlsZT1cImRpc3BsYXk6YmxvY2s7aGVpZ2h0Ojk5OTlweDtwb3NpdGlvbjpyZWxhdGl2ZTtvdmVyZmxvdzpoaWRkZW47XCI+XFxuICAgIDxpbnB1dCBpZD1cImlucHV0XCIgdHlwZT1cImZpbGVcIlxcbiAgICAgbmFtZT1cIicgKyB0aGlzLnByb3BzLm5hbWUgKyAnXCJcXG4gICAgIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtoZWlnaHQ6OTk5OXB4O2ZvbnQtc2l6ZTo5OTk5cHg7Y3Vyc29yOnBvaW50ZXI7XCIvPlxcbiAgICAnICsgZG9tYWluSW5wdXQgKyAnXFxuICAgIDxzcGFuIGlkPVwiZGF0YVwiPjwvc3Bhbj5cXG4gICAgPC9mb3JtPlxcbiAgICA8L2JvZHk+XFxuICAgIDwvaHRtbD5cXG4gICAgJztcblx0ICB9LFxuXHQgIGluaXRJZnJhbWVTcmM6IGZ1bmN0aW9uIGluaXRJZnJhbWVTcmMoKSB7XG5cdCAgICBpZiAodGhpcy5kb21haW4pIHtcblx0ICAgICAgdGhpcy5nZXRJZnJhbWVOb2RlKCkuc3JjID0gJ2phdmFzY3JpcHQ6dm9pZCgoZnVuY3Rpb24oKXtcXG4gICAgICAgIHZhciBkID0gZG9jdW1lbnQ7XFxuICAgICAgICBkLm9wZW4oKTtcXG4gICAgICAgIGQuZG9tYWluPVxcJycgKyB0aGlzLmRvbWFpbiArICdcXCc7XFxuICAgICAgICBkLndyaXRlKFxcJ1xcJyk7XFxuICAgICAgICBkLmNsb3NlKCk7XFxuICAgICAgfSkoKSknO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgaW5pdElmcmFtZTogZnVuY3Rpb24gaW5pdElmcmFtZSgpIHtcblx0ICAgIHZhciBpZnJhbWVOb2RlID0gdGhpcy5nZXRJZnJhbWVOb2RlKCk7XG5cdCAgICB2YXIgd2luID0gaWZyYW1lTm9kZS5jb250ZW50V2luZG93O1xuXHQgICAgdmFyIGRvYyA9IHZvaWQgMDtcblx0ICAgIHRoaXMuZG9tYWluID0gdGhpcy5kb21haW4gfHwgJyc7XG5cdCAgICB0aGlzLmluaXRJZnJhbWVTcmMoKTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGRvYyA9IHdpbi5kb2N1bWVudDtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdGhpcy5kb21haW4gPSBkb2N1bWVudC5kb21haW47XG5cdCAgICAgIHRoaXMuaW5pdElmcmFtZVNyYygpO1xuXHQgICAgICB3aW4gPSBpZnJhbWVOb2RlLmNvbnRlbnRXaW5kb3c7XG5cdCAgICAgIGRvYyA9IHdpbi5kb2N1bWVudDtcblx0ICAgIH1cblx0ICAgIGRvYy5vcGVuKCd0ZXh0L2h0bWwnLCAncmVwbGFjZScpO1xuXHQgICAgZG9jLndyaXRlKHRoaXMuZ2V0SWZyYW1lSFRNTCh0aGlzLmRvbWFpbikpO1xuXHQgICAgZG9jLmNsb3NlKCk7XG5cdCAgICB0aGlzLmdldEZvcm1JbnB1dE5vZGUoKS5vbmNoYW5nZSA9IHRoaXMub25DaGFuZ2U7XG5cdCAgfSxcblx0ICBlbmRVcGxvYWQ6IGZ1bmN0aW9uIGVuZFVwbG9hZCgpIHtcblx0ICAgIGlmICh0aGlzLnN0YXRlLnVwbG9hZGluZykge1xuXHQgICAgICB0aGlzLmZpbGUgPSB7fTtcblx0ICAgICAgLy8gaGFjayBhdm9pZCBiYXRjaFxuXHQgICAgICB0aGlzLnN0YXRlLnVwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICB1cGxvYWRpbmc6IGZhbHNlXG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLmluaXRJZnJhbWUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHN0YXJ0VXBsb2FkOiBmdW5jdGlvbiBzdGFydFVwbG9hZCgpIHtcblx0ICAgIGlmICghdGhpcy5zdGF0ZS51cGxvYWRpbmcpIHtcblx0ICAgICAgdGhpcy5zdGF0ZS51cGxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICB0aGlzLnNldFN0YXRlKHtcblx0ICAgICAgICB1cGxvYWRpbmc6IHRydWVcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICB1cGRhdGVJZnJhbWVXSDogZnVuY3Rpb24gdXBkYXRlSWZyYW1lV0goKSB7XG5cdCAgICB2YXIgcm9vdE5vZGUgPSBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS5maW5kRE9NTm9kZSh0aGlzKTtcblx0ICAgIHZhciBpZnJhbWVOb2RlID0gdGhpcy5nZXRJZnJhbWVOb2RlKCk7XG5cdCAgICBpZnJhbWVOb2RlLnN0eWxlLmhlaWdodCA9IHJvb3ROb2RlLm9mZnNldEhlaWdodCArICdweCc7XG5cdCAgICBpZnJhbWVOb2RlLnN0eWxlLndpZHRoID0gcm9vdE5vZGUub2Zmc2V0V2lkdGggKyAncHgnO1xuXHQgIH0sXG5cdCAgYWJvcnQ6IGZ1bmN0aW9uIGFib3J0KGZpbGUpIHtcblx0ICAgIGlmIChmaWxlKSB7XG5cdCAgICAgIHZhciB1aWQgPSBmaWxlO1xuXHQgICAgICBpZiAoZmlsZSAmJiBmaWxlLnVpZCkge1xuXHQgICAgICAgIHVpZCA9IGZpbGUudWlkO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh1aWQgPT09IHRoaXMuZmlsZS51aWQpIHtcblx0ICAgICAgICB0aGlzLmVuZFVwbG9hZCgpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmVuZFVwbG9hZCgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcG9zdDogZnVuY3Rpb24gcG9zdChmaWxlKSB7XG5cdCAgICB2YXIgZm9ybU5vZGUgPSB0aGlzLmdldEZvcm1Ob2RlKCk7XG5cdCAgICB2YXIgZGF0YVNwYW4gPSB0aGlzLmdldEZvcm1EYXRhTm9kZSgpO1xuXHQgICAgdmFyIGRhdGEgPSB0aGlzLnByb3BzLmRhdGE7XG5cdCAgICB2YXIgb25TdGFydCA9IHRoaXMucHJvcHMub25TdGFydDtcblx0XG5cdCAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgZGF0YSA9IGRhdGEoZmlsZSk7XG5cdCAgICB9XG5cdCAgICB2YXIgaW5wdXRzID0gW107XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuXHQgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgaW5wdXRzLnB1c2goJzxpbnB1dCBuYW1lPVwiJyArIGtleSArICdcIiB2YWx1ZT1cIicgKyBkYXRhW2tleV0gKyAnXCIvPicpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBkYXRhU3Bhbi5pbm5lckhUTUwgPSBpbnB1dHMuam9pbignJyk7XG5cdCAgICBmb3JtTm9kZS5zdWJtaXQoKTtcblx0ICAgIGRhdGFTcGFuLmlubmVySFRNTCA9ICcnO1xuXHQgICAgb25TdGFydChmaWxlKTtcblx0ICB9LFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgdmFyIF9jbGFzc05hbWVzO1xuXHRcblx0ICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuXHQgICAgICAgIFRhZyA9IF9wcm9wcy5jb21wb25lbnQsXG5cdCAgICAgICAgZGlzYWJsZWQgPSBfcHJvcHMuZGlzYWJsZWQsXG5cdCAgICAgICAgY2xhc3NOYW1lID0gX3Byb3BzLmNsYXNzTmFtZSxcblx0ICAgICAgICBwcmVmaXhDbHMgPSBfcHJvcHMucHJlZml4Q2xzLFxuXHQgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuXHQgICAgICAgIHN0eWxlID0gX3Byb3BzLnN0eWxlO1xuXHRcblx0ICAgIHZhciBpZnJhbWVTdHlsZSA9ICgwLCBfZXh0ZW5kczNbXCJkZWZhdWx0XCJdKSh7fSwgSUZSQU1FX1NUWUxFLCB7XG5cdCAgICAgIGRpc3BsYXk6IHRoaXMuc3RhdGUudXBsb2FkaW5nIHx8IGRpc2FibGVkID8gJ25vbmUnIDogJydcblx0ICAgIH0pO1xuXHQgICAgdmFyIGNscyA9ICgwLCBfY2xhc3NuYW1lczJbXCJkZWZhdWx0XCJdKSgoX2NsYXNzTmFtZXMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kaXNhYmxlZCcsIGRpc2FibGVkKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgY2xhc3NOYW1lLCBjbGFzc05hbWUpLCBfY2xhc3NOYW1lcykpO1xuXHQgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG5cdCAgICAgIFRhZyxcblx0ICAgICAge1xuXHQgICAgICAgIGNsYXNzTmFtZTogY2xzLFxuXHQgICAgICAgIHN0eWxlOiAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoeyBwb3NpdGlvbjogJ3JlbGF0aXZlJywgekluZGV4OiAwIH0sIHN0eWxlKVxuXHQgICAgICB9LFxuXHQgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdpZnJhbWUnLCB7XG5cdCAgICAgICAgcmVmOiAnaWZyYW1lJyxcblx0ICAgICAgICBvbkxvYWQ6IHRoaXMub25Mb2FkLFxuXHQgICAgICAgIHN0eWxlOiBpZnJhbWVTdHlsZVxuXHQgICAgICB9KSxcblx0ICAgICAgY2hpbGRyZW5cblx0ICAgICk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdGV4cG9ydHNbXCJkZWZhdWx0XCJdID0gSWZyYW1lVXBsb2FkZXI7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAxMDY0OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cdFxuXHR2YXIgX3JlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXHRcblx0dmFyIF9BamF4VXBsb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNjIpO1xuXHRcblx0dmFyIF9BamF4VXBsb2FkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWpheFVwbG9hZGVyKTtcblx0XG5cdHZhciBfSWZyYW1lVXBsb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNjMpO1xuXHRcblx0dmFyIF9JZnJhbWVVcGxvYWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JZnJhbWVVcGxvYWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIGVtcHR5KCkge31cblx0XG5cdHZhciBVcGxvYWQgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7XG5cdCAgZGlzcGxheU5hbWU6ICdVcGxvYWQnLFxuXHRcblx0ICBwcm9wVHlwZXM6IHtcblx0ICAgIGNvbXBvbmVudDogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBzdHlsZTogX3JlYWN0LlByb3BUeXBlcy5vYmplY3QsXG5cdCAgICBwcmVmaXhDbHM6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgYWN0aW9uOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcblx0ICAgIG5hbWU6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuXHQgICAgbXVsdGlwYXJ0OiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBvbkVycm9yOiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG5cdCAgICBvblN1Y2Nlc3M6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIG9uUHJvZ3Jlc3M6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIG9uU3RhcnQ6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcblx0ICAgIGRhdGE6IF9yZWFjdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCwgX3JlYWN0LlByb3BUeXBlcy5mdW5jXSksXG5cdCAgICBoZWFkZXJzOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcblx0ICAgIGFjY2VwdDogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG5cdCAgICBtdWx0aXBsZTogX3JlYWN0LlByb3BUeXBlcy5ib29sLFxuXHQgICAgZGlzYWJsZWQ6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbCxcblx0ICAgIGJlZm9yZVVwbG9hZDogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuXHQgICAgY3VzdG9tUmVxdWVzdDogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuXHQgICAgb25SZWFkeTogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuXHQgICAgd2l0aENyZWRlbnRpYWxzOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG5cdCAgICBzdXBwb3J0U2VydmVyUmVuZGVyOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2xcblx0ICB9LFxuXHRcblx0ICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGNvbXBvbmVudDogJ3NwYW4nLFxuXHQgICAgICBwcmVmaXhDbHM6ICdyYy11cGxvYWQnLFxuXHQgICAgICBkYXRhOiB7fSxcblx0ICAgICAgaGVhZGVyczoge30sXG5cdCAgICAgIG5hbWU6ICdmaWxlJyxcblx0ICAgICAgbXVsdGlwYXJ0OiBmYWxzZSxcblx0ICAgICAgb25Qcm9ncmVzczogZW1wdHksXG5cdCAgICAgIG9uUmVhZHk6IGVtcHR5LFxuXHQgICAgICBvblN0YXJ0OiBlbXB0eSxcblx0ICAgICAgb25FcnJvcjogZW1wdHksXG5cdCAgICAgIG9uU3VjY2VzczogZW1wdHksXG5cdCAgICAgIHN1cHBvcnRTZXJ2ZXJSZW5kZXI6IGZhbHNlLFxuXHQgICAgICBtdWx0aXBsZTogZmFsc2UsXG5cdCAgICAgIGJlZm9yZVVwbG9hZDogbnVsbCxcblx0ICAgICAgY3VzdG9tUmVxdWVzdDogbnVsbCxcblx0ICAgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9LFxuXHQgIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24gZ2V0SW5pdGlhbFN0YXRlKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgQ29tcG9uZW50OiBudWxsXG5cdCAgICB9O1xuXHQgIH0sXG5cdCAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuXHQgICAgaWYgKHRoaXMucHJvcHMuc3VwcG9ydFNlcnZlclJlbmRlcikge1xuXHQgICAgICAvKiBlc2xpbnQgcmVhY3Qvbm8tZGlkLW1vdW50LXNldC1zdGF0ZTowICovXG5cdCAgICAgIHRoaXMuc2V0U3RhdGUoe1xuXHQgICAgICAgIENvbXBvbmVudDogdGhpcy5nZXRDb21wb25lbnQoKVxuXHQgICAgICB9LCB0aGlzLnByb3BzLm9uUmVhZHkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZ2V0Q29tcG9uZW50OiBmdW5jdGlvbiBnZXRDb21wb25lbnQoKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJyA/IF9BamF4VXBsb2FkZXIyW1wiZGVmYXVsdFwiXSA6IF9JZnJhbWVVcGxvYWRlcjJbXCJkZWZhdWx0XCJdO1xuXHQgIH0sXG5cdCAgYWJvcnQ6IGZ1bmN0aW9uIGFib3J0KGZpbGUpIHtcblx0ICAgIHRoaXMucmVmcy5pbm5lci5hYm9ydChmaWxlKTtcblx0ICB9LFxuXHQgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgaWYgKHRoaXMucHJvcHMuc3VwcG9ydFNlcnZlclJlbmRlcikge1xuXHQgICAgICB2YXIgX0NvbXBvbmVudCA9IHRoaXMuc3RhdGUuQ29tcG9uZW50O1xuXHRcblx0ICAgICAgaWYgKF9Db21wb25lbnQpIHtcblx0ICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfQ29tcG9uZW50LCAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHRoaXMucHJvcHMsIHsgcmVmOiAnaW5uZXInIH0pKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBDb21wb25lbnQgPSB0aGlzLmdldENvbXBvbmVudCgpO1xuXHQgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHRoaXMucHJvcHMsIHsgcmVmOiAnaW5uZXInIH0pKTtcblx0ICB9XG5cdH0pO1xuXHRcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBVcGxvYWQ7XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG4vKioqLyB9LFxuXG4vKioqLyAxMDY1OlxuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gZXhwb3J0IHRoaXMgcGFja2FnZSdzIGFwaVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTA2NCk7XG5cbi8qKiovIH0sXG5cbi8qKiovIDEwNjY6XG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB1cGxvYWQ7XG5cdGZ1bmN0aW9uIGdldEVycm9yKG9wdGlvbiwgeGhyKSB7XG5cdCAgdmFyIG1zZyA9ICdjYW5ub3QgcG9zdCAnICsgb3B0aW9uLmFjdGlvbiArICcgJyArIHhoci5zdGF0dXMgKyAnXFwnJztcblx0ICB2YXIgZXJyID0gbmV3IEVycm9yKG1zZyk7XG5cdCAgZXJyLnN0YXR1cyA9IHhoci5zdGF0dXM7XG5cdCAgZXJyLm1ldGhvZCA9ICdwb3N0Jztcblx0ICBlcnIudXJsID0gb3B0aW9uLmFjdGlvbjtcblx0ICByZXR1cm4gZXJyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRCb2R5KHhocikge1xuXHQgIHZhciB0ZXh0ID0geGhyLnJlc3BvbnNlVGV4dCB8fCB4aHIucmVzcG9uc2U7XG5cdCAgaWYgKCF0ZXh0KSB7XG5cdCAgICByZXR1cm4gdGV4dDtcblx0ICB9XG5cdFxuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gSlNPTi5wYXJzZSh0ZXh0KTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZXR1cm4gdGV4dDtcblx0ICB9XG5cdH1cblx0XG5cdC8vIG9wdGlvbiB7XG5cdC8vICBvblByb2dyZXNzOiAoZXZlbnQ6IHsgcGVyY2VudDogbnVtYmVyIH0pOiB2b2lkLFxuXHQvLyAgb25FcnJvcjogKGV2ZW50OiBFcnJvciwgYm9keT86IE9iamVjdCk6IHZvaWQsXG5cdC8vICBvblN1Y2Nlc3M6IChib2R5OiBPYmplY3QpOiB2b2lkLFxuXHQvLyAgZGF0YTogT2JqZWN0LFxuXHQvLyAgZmlsZW5hbWU6IFN0cmluZyxcblx0Ly8gIGZpbGU6IEZpbGUsXG5cdC8vICB3aXRoQ3JlZGVudGlhbHM6IEJvb2xlYW4sXG5cdC8vICBhY3Rpb246IFN0cmluZyxcblx0Ly8gIGhlYWRlcnM6IE9iamVjdCxcblx0Ly8gfVxuXHRmdW5jdGlvbiB1cGxvYWQob3B0aW9uKSB7XG5cdCAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgIGlmICh4aHIudXBsb2FkKSB7XG5cdCAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiBwcm9ncmVzcyhlKSB7XG5cdCAgICAgIGlmIChlLnRvdGFsID4gMCkge1xuXHQgICAgICAgIGUucGVyY2VudCA9IGUubG9hZGVkIC8gZS50b3RhbCAqIDEwMDtcblx0ICAgICAgfVxuXHQgICAgICBvcHRpb24ub25Qcm9ncmVzcyhlKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0XG5cdCAgaWYgKG9wdGlvbi5kYXRhKSB7XG5cdCAgICBPYmplY3Qua2V5cyhvcHRpb24uZGF0YSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgZm9ybURhdGEuYXBwZW5kKGtleSwgb3B0aW9uLmRhdGFba2V5XSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGZvcm1EYXRhLmFwcGVuZChvcHRpb24uZmlsZW5hbWUsIG9wdGlvbi5maWxlKTtcblx0XG5cdCAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiBlcnJvcihlKSB7XG5cdCAgICBvcHRpb24ub25FcnJvcihlKTtcblx0ICB9O1xuXHRcblx0ICB4aHIub25sb2FkID0gZnVuY3Rpb24gb25sb2FkKCkge1xuXHQgICAgLy8gYWxsb3cgc3VjY2VzcyB3aGVuIDJ4eCBzdGF0dXNcblx0ICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmVhY3QtY29tcG9uZW50L3VwbG9hZC9pc3N1ZXMvMzRcblx0ICAgIGlmICh4aHIuc3RhdHVzIDwgMjAwIHx8IHhoci5zdGF0dXMgPj0gMzAwKSB7XG5cdCAgICAgIHJldHVybiBvcHRpb24ub25FcnJvcihnZXRFcnJvcihvcHRpb24sIHhociksIGdldEJvZHkoeGhyKSk7XG5cdCAgICB9XG5cdFxuXHQgICAgb3B0aW9uLm9uU3VjY2VzcyhnZXRCb2R5KHhocikpO1xuXHQgIH07XG5cdFxuXHQgIHhoci5vcGVuKCdwb3N0Jywgb3B0aW9uLmFjdGlvbiwgdHJ1ZSk7XG5cdFxuXHQgIC8vIEhhcyB0byBiZSBhZnRlciBgLm9wZW4oKWAuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZW55by9kcm9wem9uZS9pc3N1ZXMvMTc5XG5cdCAgaWYgKG9wdGlvbi53aXRoQ3JlZGVudGlhbHMgJiYgJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSB7XG5cdCAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcblx0ICB9XG5cdFxuXHQgIHZhciBoZWFkZXJzID0gb3B0aW9uLmhlYWRlcnMgfHwge307XG5cdFxuXHQgIC8vIHdoZW4gc2V0IGhlYWRlcnNbJ1gtUmVxdWVzdGVkLVdpdGgnXSA9IG51bGwgLCBjYW4gY2xvc2UgZGVmYXVsdCBYSFIgaGVhZGVyXG5cdCAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1jb21wb25lbnQvdXBsb2FkL2lzc3Vlcy8zM1xuXHQgIGlmIChoZWFkZXJzWydYLVJlcXVlc3RlZC1XaXRoJ10gIT09IG51bGwpIHtcblx0ICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBoIGluIGhlYWRlcnMpIHtcblx0ICAgIGlmIChoZWFkZXJzLmhhc093blByb3BlcnR5KGgpICYmIGhlYWRlcnNbaF0gIT09IG51bGwpIHtcblx0ICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaCwgaGVhZGVyc1toXSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHhoci5zZW5kKGZvcm1EYXRhKTtcblx0XG5cdCAgcmV0dXJuIHtcblx0ICAgIGFib3J0OiBmdW5jdGlvbiBhYm9ydCgpIHtcblx0ICAgICAgeGhyLmFib3J0KCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuLyoqKi8gfSxcblxuLyoqKi8gMTA2NzpcbjgxXG5cbn0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGRlbW8uanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gdW5kZWZpbmVkO1xuXG52YXIgX2V4dGVuZHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmNEaWFsb2cgPSByZXF1aXJlKCdyYy1kaWFsb2cnKTtcblxudmFyIF9yY0RpYWxvZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yY0RpYWxvZyk7XG5cbnZhciBfYWRkRXZlbnRMaXN0ZW5lciA9IHJlcXVpcmUoJ3JjLXV0aWwvbGliL0RvbS9hZGRFdmVudExpc3RlbmVyJyk7XG5cbnZhciBfYWRkRXZlbnRMaXN0ZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hZGRFdmVudExpc3RlbmVyKTtcblxudmFyIF9idXR0b24gPSByZXF1aXJlKCcuLi9idXR0b24nKTtcblxudmFyIF9idXR0b24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYnV0dG9uKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbnZhciBtb3VzZVBvc2l0aW9uID0gdm9pZCAwO1xudmFyIG1vdXNlUG9zaXRpb25FdmVudEJpbmRlZCA9IHZvaWQgMDtcblxudmFyIE1vZGFsID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICAoMCwgX2luaGVyaXRzM1tcImRlZmF1bHRcIl0pKE1vZGFsLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIE1vZGFsKCkge1xuICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrM1tcImRlZmF1bHRcIl0pKHRoaXMsIE1vZGFsKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zW1wiZGVmYXVsdFwiXSkodGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblxuICAgICAgICBfdGhpcy5oYW5kbGVDYW5jZWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG9uQ2FuY2VsID0gX3RoaXMucHJvcHMub25DYW5jZWw7XG4gICAgICAgICAgICBpZiAob25DYW5jZWwpIHtcbiAgICAgICAgICAgICAgICBvbkNhbmNlbChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMuaGFuZGxlT2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG9uT2sgPSBfdGhpcy5wcm9wcy5vbk9rO1xuICAgICAgICAgICAgaWYgKG9uT2spIHtcbiAgICAgICAgICAgICAgICBvbk9rKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgTW9kYWwucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIGlmIChtb3VzZVBvc2l0aW9uRXZlbnRCaW5kZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyDlj6rmnInngrnlh7vkuovku7bmlK/mjIHku47pvKDmoIfkvY3nva7liqjnlLvlsZXlvIBcbiAgICAgICAgKDAsIF9hZGRFdmVudExpc3RlbmVyMltcImRlZmF1bHRcIl0pKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIG1vdXNlUG9zaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgeDogZS5wYWdlWCxcbiAgICAgICAgICAgICAgICB5OiBlLnBhZ2VZXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gMTAwbXMg5YaF5Y+R55Sf6L+H54K55Ye75LqL5Lu277yM5YiZ5LuO54K55Ye75L2N572u5Yqo55S75bGV56S6XG4gICAgICAgICAgICAvLyDlkKbliJnnm7TmjqUgem9vbSDlsZXnpLpcbiAgICAgICAgICAgIC8vIOi/meagt+WPr+S7peWFvOWuuemdnueCueWHu+aWueW8j+WxleW8gFxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vdXNlUG9zaXRpb24gPSBudWxsO1xuICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1vdXNlUG9zaXRpb25FdmVudEJpbmRlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIE1vZGFsLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgb2tUZXh0ID0gX3Byb3BzLm9rVGV4dCxcbiAgICAgICAgICAgIGNhbmNlbFRleHQgPSBfcHJvcHMuY2FuY2VsVGV4dCxcbiAgICAgICAgICAgIGNvbmZpcm1Mb2FkaW5nID0gX3Byb3BzLmNvbmZpcm1Mb2FkaW5nLFxuICAgICAgICAgICAgZm9vdGVyID0gX3Byb3BzLmZvb3RlcixcbiAgICAgICAgICAgIHZpc2libGUgPSBfcHJvcHMudmlzaWJsZTtcblxuICAgICAgICBpZiAodGhpcy5jb250ZXh0LmFudExvY2FsZSAmJiB0aGlzLmNvbnRleHQuYW50TG9jYWxlLk1vZGFsKSB7XG4gICAgICAgICAgICBva1RleHQgPSBva1RleHQgfHwgdGhpcy5jb250ZXh0LmFudExvY2FsZS5Nb2RhbC5va1RleHQ7XG4gICAgICAgICAgICBjYW5jZWxUZXh0ID0gY2FuY2VsVGV4dCB8fCB0aGlzLmNvbnRleHQuYW50TG9jYWxlLk1vZGFsLmNhbmNlbFRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlZmF1bHRGb290ZXIgPSBbX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9idXR0b24yW1wiZGVmYXVsdFwiXSxcbiAgICAgICAgICAgIHsga2V5OiAnY2FuY2VsJywgc2l6ZTogJ2xhcmdlJywgb25DbGljazogdGhpcy5oYW5kbGVDYW5jZWwgfSxcbiAgICAgICAgICAgIGNhbmNlbFRleHQgfHwgJ+WPlua2iCdcbiAgICAgICAgKSwgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9idXR0b24yW1wiZGVmYXVsdFwiXSxcbiAgICAgICAgICAgIHsga2V5OiAnY29uZmlybScsIHR5cGU6ICdwcmltYXJ5Jywgc2l6ZTogJ2xhcmdlJywgbG9hZGluZzogY29uZmlybUxvYWRpbmcsIG9uQ2xpY2s6IHRoaXMuaGFuZGxlT2sgfSxcbiAgICAgICAgICAgIG9rVGV4dCB8fCAn56Gu5a6aJ1xuICAgICAgICApXTtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX3JjRGlhbG9nMltcImRlZmF1bHRcIl0sICgwLCBfZXh0ZW5kczNbXCJkZWZhdWx0XCJdKSh7IG9uQ2xvc2U6IHRoaXMuaGFuZGxlQ2FuY2VsLCBmb290ZXI6IGZvb3RlciB8fCBkZWZhdWx0Rm9vdGVyIH0sIHRoaXMucHJvcHMsIHsgdmlzaWJsZTogdmlzaWJsZSwgbW91c2VQb3NpdGlvbjogbW91c2VQb3NpdGlvbiB9KSk7XG4gICAgfTtcblxuICAgIHJldHVybiBNb2RhbDtcbn0oX3JlYWN0MltcImRlZmF1bHRcIl0uQ29tcG9uZW50KTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBNb2RhbDtcblxuTW9kYWwuZGVmYXVsdFByb3BzID0ge1xuICAgIHByZWZpeENsczogJ2FudC1tb2RhbCcsXG4gICAgd2lkdGg6IDUyMCxcbiAgICB0cmFuc2l0aW9uTmFtZTogJ3pvb20nLFxuICAgIG1hc2tUcmFuc2l0aW9uTmFtZTogJ2ZhZGUnLFxuICAgIGNvbmZpcm1Mb2FkaW5nOiBmYWxzZSxcbiAgICB2aXNpYmxlOiBmYWxzZVxufTtcbk1vZGFsLnByb3BUeXBlcyA9IHtcbiAgICBwcmVmaXhDbHM6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIG9uT2s6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBvbkNhbmNlbDogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIG9rVGV4dDogX3JlYWN0LlByb3BUeXBlcy5ub2RlLFxuICAgIGNhbmNlbFRleHQ6IF9yZWFjdC5Qcm9wVHlwZXMubm9kZSxcbiAgICB3aWR0aDogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMubnVtYmVyLCBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZ10pLFxuICAgIGNvbmZpcm1Mb2FkaW5nOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgdmlzaWJsZTogX3JlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIGFsaWduOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcbiAgICBmb290ZXI6IF9yZWFjdC5Qcm9wVHlwZXMubm9kZSxcbiAgICB0aXRsZTogX3JlYWN0LlByb3BUeXBlcy5ub2RlLFxuICAgIGNsb3NhYmxlOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2xcbn07XG5Nb2RhbC5jb250ZXh0VHlwZXMgPSB7XG4gICAgYW50TG9jYWxlOiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5Qcm9wVHlwZXMub2JqZWN0XG59O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYW50ZC9saWIvbW9kYWwvTW9kYWwuanNcbiAqKiBtb2R1bGUgaWQgPSA4OFxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfTW9kYWwgPSByZXF1aXJlKCcuL01vZGFsJyk7XG5cbnZhciBfTW9kYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9kYWwpO1xuXG52YXIgX2NvbmZpcm0gPSByZXF1aXJlKCcuL2NvbmZpcm0nKTtcblxudmFyIF9jb25maXJtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NvbmZpcm0pO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbl9Nb2RhbDJbXCJkZWZhdWx0XCJdLmluZm8gPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgICB2YXIgY29uZmlnID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHtcbiAgICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgICBpY29uVHlwZTogJ2luZm8tY2lyY2xlJyxcbiAgICAgICAgb2tDYW5jZWw6IGZhbHNlXG4gICAgfSwgcHJvcHMpO1xuICAgIHJldHVybiAoMCwgX2NvbmZpcm0yW1wiZGVmYXVsdFwiXSkoY29uZmlnKTtcbn07XG5fTW9kYWwyW1wiZGVmYXVsdFwiXS5zdWNjZXNzID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIGNvbmZpZyA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCB7XG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgaWNvblR5cGU6ICdjaGVjay1jaXJjbGUnLFxuICAgICAgICBva0NhbmNlbDogZmFsc2VcbiAgICB9LCBwcm9wcyk7XG4gICAgcmV0dXJuICgwLCBfY29uZmlybTJbXCJkZWZhdWx0XCJdKShjb25maWcpO1xufTtcbl9Nb2RhbDJbXCJkZWZhdWx0XCJdLmVycm9yID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIGNvbmZpZyA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCB7XG4gICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICAgIGljb25UeXBlOiAnY3Jvc3MtY2lyY2xlJyxcbiAgICAgICAgb2tDYW5jZWw6IGZhbHNlXG4gICAgfSwgcHJvcHMpO1xuICAgIHJldHVybiAoMCwgX2NvbmZpcm0yW1wiZGVmYXVsdFwiXSkoY29uZmlnKTtcbn07XG5fTW9kYWwyW1wiZGVmYXVsdFwiXS53YXJuaW5nID0gX01vZGFsMltcImRlZmF1bHRcIl0ud2FybiA9IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHZhciBjb25maWcgPSAoMCwgX29iamVjdEFzc2lnbjJbXCJkZWZhdWx0XCJdKSh7fSwge1xuICAgICAgICB0eXBlOiAnd2FybmluZycsXG4gICAgICAgIGljb25UeXBlOiAnZXhjbGFtYXRpb24tY2lyY2xlJyxcbiAgICAgICAgb2tDYW5jZWw6IGZhbHNlXG4gICAgfSwgcHJvcHMpO1xuICAgIHJldHVybiAoMCwgX2NvbmZpcm0yW1wiZGVmYXVsdFwiXSkoY29uZmlnKTtcbn07XG5fTW9kYWwyW1wiZGVmYXVsdFwiXS5jb25maXJtID0gZnVuY3Rpb24gKHByb3BzKSB7XG4gICAgdmFyIGNvbmZpZyA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCB7XG4gICAgICAgIHR5cGU6ICdjb25maXJtJyxcbiAgICAgICAgb2tDYW5jZWw6IHRydWVcbiAgICB9LCBwcm9wcyk7XG4gICAgcmV0dXJuICgwLCBfY29uZmlybTJbXCJkZWZhdWx0XCJdKShjb25maWcpO1xufTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gX01vZGFsMltcImRlZmF1bHRcIl07XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9hbnRkL2xpYi9tb2RhbC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0OFxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5yZXF1aXJlKCcuLi8uLi9zdHlsZS9pbmRleC5sZXNzJyk7XG5cbnJlcXVpcmUoJy4vaW5kZXgubGVzcycpO1xuXG5yZXF1aXJlKCcuLi8uLi9idXR0b24vc3R5bGUnKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9hbnRkL2xpYi9tb2RhbC9zdHlsZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0OVxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHVuZGVmaW5lZDtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfYnV0dG9uID0gcmVxdWlyZSgnLi4vYnV0dG9uJyk7XG5cbnZhciBfYnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2J1dHRvbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG52YXIgQWN0aW9uQnV0dG9uID0gZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgICAoMCwgX2luaGVyaXRzM1tcImRlZmF1bHRcIl0pKEFjdGlvbkJ1dHRvbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBBY3Rpb25CdXR0b24ocHJvcHMpIHtcbiAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazNbXCJkZWZhdWx0XCJdKSh0aGlzLCBBY3Rpb25CdXR0b24pO1xuXG4gICAgICAgIHZhciBfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjNbXCJkZWZhdWx0XCJdKSh0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmNhbGwodGhpcywgcHJvcHMpKTtcblxuICAgICAgICBfdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzJHByb3BzID0gX3RoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgYWN0aW9uRm4gPSBfdGhpcyRwcm9wcy5hY3Rpb25GbixcbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsID0gX3RoaXMkcHJvcHMuY2xvc2VNb2RhbDtcblxuICAgICAgICAgICAgaWYgKGFjdGlvbkZuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uRm4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IGFjdGlvbkZuKGNsb3NlTW9kYWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldCA9IGFjdGlvbkZuKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJldCAmJiByZXQudGhlbikge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRTdGF0ZSh7IGxvYWRpbmc6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgdW5uZWNlc3NhcnkgdG8gc2V0IGxvYWRpbmc9ZmFsc2UsIGZvciB0aGUgTW9kYWwgd2lsbCBiZSB1bm1vdW50ZWQgYWZ0ZXIgY2xvc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNldFN0YXRlKHsgbG9hZGluZzogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZU1vZGFsLmFwcGx5KHVuZGVmaW5lZCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgbG9hZGluZzogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cblxuICAgIEFjdGlvbkJ1dHRvbi5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgICB2YXIgJHRoaXMgPSBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzLmZvY3VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBBY3Rpb25CdXR0b24ucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZCk7XG4gICAgfTtcblxuICAgIEFjdGlvbkJ1dHRvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIHR5cGUgPSBfcHJvcHMudHlwZSxcbiAgICAgICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuO1xuXG4gICAgICAgIHZhciBsb2FkaW5nID0gdGhpcy5zdGF0ZS5sb2FkaW5nO1xuICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgIF9idXR0b24yW1wiZGVmYXVsdFwiXSxcbiAgICAgICAgICAgIHsgdHlwZTogdHlwZSwgc2l6ZTogJ2xhcmdlJywgb25DbGljazogdGhpcy5vbkNsaWNrLCBsb2FkaW5nOiBsb2FkaW5nIH0sXG4gICAgICAgICAgICBjaGlsZHJlblxuICAgICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gQWN0aW9uQnV0dG9uO1xufShfcmVhY3QyW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IEFjdGlvbkJ1dHRvbjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2FudGQvbGliL21vZGFsL0FjdGlvbkJ1dHRvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE4OVxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5Jyk7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkyKTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBjb25maXJtO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcblxudmFyIF9yZWFjdERvbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdERvbSk7XG5cbnZhciBfY2xhc3NuYW1lcyA9IHJlcXVpcmUoJ2NsYXNzbmFtZXMnKTtcblxudmFyIF9jbGFzc25hbWVzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzbmFtZXMpO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxudmFyIF9pY29uID0gcmVxdWlyZSgnLi4vaWNvbicpO1xuXG52YXIgX2ljb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaWNvbik7XG5cbnZhciBfTW9kYWwgPSByZXF1aXJlKCcuL01vZGFsJyk7XG5cbnZhciBfTW9kYWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTW9kYWwpO1xuXG52YXIgX0FjdGlvbkJ1dHRvbiA9IHJlcXVpcmUoJy4vQWN0aW9uQnV0dG9uJyk7XG5cbnZhciBfQWN0aW9uQnV0dG9uMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FjdGlvbkJ1dHRvbik7XG5cbnZhciBfbG9jYWxlID0gcmVxdWlyZSgnLi9sb2NhbGUnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGNvbmZpcm0oY29uZmlnKSB7XG4gICAgdmFyIHByb3BzID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoeyBpY29uVHlwZTogJ3F1ZXN0aW9uLWNpcmNsZScgfSwgY29uZmlnKTtcbiAgICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzIHx8ICdhbnQtY29uZmlybSc7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICB2YXIgd2lkdGggPSBwcm9wcy53aWR0aCB8fCA0MTY7XG4gICAgdmFyIHN0eWxlID0gcHJvcHMuc3R5bGUgfHwge307XG4gICAgLy8g6buY6K6k5Li6IGZhbHNl77yM5L+d5oyB5pen54mI6buY6K6k6KGM5Li6XG4gICAgdmFyIG1hc2tDbG9zYWJsZSA9IHByb3BzLm1hc2tDbG9zYWJsZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBwcm9wcy5tYXNrQ2xvc2FibGU7XG4gICAgLy8g6buY6K6k5Li6IHRydWXvvIzkv53mjIHlkJHkuIvlhbzlrrlcbiAgICBpZiAoISgnb2tDYW5jZWwnIGluIHByb3BzKSkge1xuICAgICAgICBwcm9wcy5va0NhbmNlbCA9IHRydWU7XG4gICAgfVxuICAgIHZhciBydW50aW1lTG9jYWxlID0gKDAsIF9sb2NhbGUuZ2V0Q29uZmlybUxvY2FsZSkoKTtcbiAgICBwcm9wcy5va1RleHQgPSBwcm9wcy5va1RleHQgfHwgKHByb3BzLm9rQ2FuY2VsID8gcnVudGltZUxvY2FsZS5va1RleHQgOiBydW50aW1lTG9jYWxlLmp1c3RPa1RleHQpO1xuICAgIHByb3BzLmNhbmNlbFRleHQgPSBwcm9wcy5jYW5jZWxUZXh0IHx8IHJ1bnRpbWVMb2NhbGUuY2FuY2VsVGV4dDtcbiAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdmFyIHVubW91bnRSZXN1bHQgPSBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS51bm1vdW50Q29tcG9uZW50QXROb2RlKGRpdik7XG4gICAgICAgIGlmICh1bm1vdW50UmVzdWx0ICYmIGRpdi5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBib2R5ID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgJ2RpdicsXG4gICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWJvZHknIH0sXG4gICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiBwcm9wcy5pY29uVHlwZSB9KSxcbiAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLXRpdGxlJyB9LFxuICAgICAgICAgICAgcHJvcHMudGl0bGVcbiAgICAgICAgKSxcbiAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctY29udGVudCcgfSxcbiAgICAgICAgICAgIHByb3BzLmNvbnRlbnRcbiAgICAgICAgKVxuICAgICk7XG4gICAgdmFyIGZvb3RlciA9IG51bGw7XG4gICAgaWYgKHByb3BzLm9rQ2FuY2VsKSB7XG4gICAgICAgIGZvb3RlciA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWJ0bnMnIH0sXG4gICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgIF9BY3Rpb25CdXR0b24yW1wiZGVmYXVsdFwiXSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbkZuOiBwcm9wcy5vbkNhbmNlbCwgY2xvc2VNb2RhbDogY2xvc2UgfSxcbiAgICAgICAgICAgICAgICBwcm9wcy5jYW5jZWxUZXh0XG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICBfQWN0aW9uQnV0dG9uMltcImRlZmF1bHRcIl0sXG4gICAgICAgICAgICAgICAgeyB0eXBlOiAncHJpbWFyeScsIGFjdGlvbkZuOiBwcm9wcy5vbk9rLCBjbG9zZU1vZGFsOiBjbG9zZSwgYXV0b0ZvY3VzOiB0cnVlIH0sXG4gICAgICAgICAgICAgICAgcHJvcHMub2tUZXh0XG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9vdGVyID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctYnRucycgfSxcbiAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgX0FjdGlvbkJ1dHRvbjJbXCJkZWZhdWx0XCJdLFxuICAgICAgICAgICAgICAgIHsgdHlwZTogJ3ByaW1hcnknLCBhY3Rpb25GbjogcHJvcHMub25PaywgY2xvc2VNb2RhbDogY2xvc2UsIGF1dG9Gb2N1czogdHJ1ZSB9LFxuICAgICAgICAgICAgICAgIHByb3BzLm9rVGV4dFxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgIH1cbiAgICB2YXIgY2xhc3NTdHJpbmcgPSAoMCwgX2NsYXNzbmFtZXMyW1wiZGVmYXVsdFwiXSkocHJlZml4Q2xzLCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKHt9LCBwcmVmaXhDbHMgKyAnLScgKyBwcm9wcy50eXBlLCB0cnVlKSwgcHJvcHMuY2xhc3NOYW1lKTtcbiAgICBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS5yZW5kZXIoX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgX01vZGFsMltcImRlZmF1bHRcIl0sXG4gICAgICAgIHsgY2xhc3NOYW1lOiBjbGFzc1N0cmluZywgb25DYW5jZWw6IGNsb3NlLCB2aXNpYmxlOiB0cnVlLCB0aXRsZTogJycsIHRyYW5zaXRpb25OYW1lOiAnem9vbScsIGZvb3RlcjogJycsIG1hc2tUcmFuc2l0aW9uTmFtZTogJ2ZhZGUnLCBtYXNrQ2xvc2FibGU6IG1hc2tDbG9zYWJsZSwgc3R5bGU6IHN0eWxlLCB3aWR0aDogd2lkdGggfSxcbiAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctYm9keS13cmFwcGVyJyB9LFxuICAgICAgICAgICAgYm9keSxcbiAgICAgICAgICAgICcgJyxcbiAgICAgICAgICAgIGZvb3RlclxuICAgICAgICApXG4gICAgKSwgZGl2KTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkZXN0cm95OiBjbG9zZVxuICAgIH07XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9hbnRkL2xpYi9tb2RhbC9jb25maXJtLmpzXG4gKiogbW9kdWxlIGlkID0gMTkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDQgNSA2IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY2hhbmdlQ29uZmlybUxvY2FsZSA9IGNoYW5nZUNvbmZpcm1Mb2NhbGU7XG5leHBvcnRzLmdldENvbmZpcm1Mb2NhbGUgPSBnZXRDb25maXJtTG9jYWxlO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0TG9jYWxlID0ge1xuICAgIG9rVGV4dDogJ+ehruWumicsXG4gICAgY2FuY2VsVGV4dDogJ+WPlua2iCcsXG4gICAganVzdE9rVGV4dDogJ+efpemBk+S6hidcbn07XG52YXIgcnVudGltZUxvY2FsZSA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCBkZWZhdWx0TG9jYWxlKTtcbmZ1bmN0aW9uIGNoYW5nZUNvbmZpcm1Mb2NhbGUobmV3TG9jYWxlKSB7XG4gICAgaWYgKG5ld0xvY2FsZSkge1xuICAgICAgICBydW50aW1lTG9jYWxlID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHJ1bnRpbWVMb2NhbGUsIG5ld0xvY2FsZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcnVudGltZUxvY2FsZSA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCBkZWZhdWx0TG9jYWxlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRDb25maXJtTG9jYWxlKCkge1xuICAgIHJldHVybiBydW50aW1lTG9jYWxlO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2FudGQvbGliL21vZGFsL2xvY2FsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE5MVxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9LZXlDb2RlID0gcmVxdWlyZSgncmMtdXRpbC9saWIvS2V5Q29kZScpO1xuXG52YXIgX0tleUNvZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfS2V5Q29kZSk7XG5cbnZhciBfcmNBbmltYXRlID0gcmVxdWlyZSgncmMtYW5pbWF0ZScpO1xuXG52YXIgX3JjQW5pbWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yY0FuaW1hdGUpO1xuXG52YXIgX0xhenlSZW5kZXJCb3ggPSByZXF1aXJlKCcuL0xhenlSZW5kZXJCb3gnKTtcblxudmFyIF9MYXp5UmVuZGVyQm94MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xhenlSZW5kZXJCb3gpO1xuXG52YXIgX2dldFNjcm9sbEJhclNpemUgPSByZXF1aXJlKCdyYy11dGlsL2xpYi9nZXRTY3JvbGxCYXJTaXplJyk7XG5cbnZhciBfZ2V0U2Nyb2xsQmFyU2l6ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRTY3JvbGxCYXJTaXplKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG52YXIgX19hc3NpZ24gPSB1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXNzaWduIHx8IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHQpIHtcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBzKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5cbnZhciB1dWlkID0gMDtcbnZhciBvcGVuQ291bnQgPSAwO1xuLyogZXNsaW50IHJlYWN0L25vLWlzLW1vdW50ZWQ6MCAqL1xuZnVuY3Rpb24gbm9vcCgpIHt9XG5mdW5jdGlvbiBnZXRTY3JvbGwodywgdG9wKSB7XG4gICAgdmFyIHJldCA9IHdbJ3BhZ2UnICsgKHRvcCA/ICdZJyA6ICdYJykgKyAnT2Zmc2V0J107XG4gICAgdmFyIG1ldGhvZCA9ICdzY3JvbGwnICsgKHRvcCA/ICdUb3AnIDogJ0xlZnQnKTtcbiAgICBpZiAodHlwZW9mIHJldCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdmFyIGQgPSB3LmRvY3VtZW50O1xuICAgICAgICByZXQgPSBkLmRvY3VtZW50RWxlbWVudFttZXRob2RdO1xuICAgICAgICBpZiAodHlwZW9mIHJldCAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldCA9IGQuYm9keVttZXRob2RdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBzZXRUcmFuc2Zvcm1PcmlnaW4obm9kZSwgdmFsdWUpIHtcbiAgICB2YXIgc3R5bGUgPSBub2RlLnN0eWxlO1xuICAgIFsnV2Via2l0JywgJ01veicsICdNcycsICdtcyddLmZvckVhY2goZnVuY3Rpb24gKHByZWZpeCkge1xuICAgICAgICBzdHlsZVtwcmVmaXggKyAnVHJhbnNmb3JtT3JpZ2luJ10gPSB2YWx1ZTtcbiAgICB9KTtcbiAgICBzdHlsZVsndHJhbnNmb3JtT3JpZ2luJ10gPSB2YWx1ZTtcbn1cbmZ1bmN0aW9uIG9mZnNldChlbCkge1xuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIHBvcyA9IHtcbiAgICAgICAgbGVmdDogcmVjdC5sZWZ0LFxuICAgICAgICB0b3A6IHJlY3QudG9wXG4gICAgfTtcbiAgICB2YXIgZG9jID0gZWwub3duZXJEb2N1bWVudDtcbiAgICB2YXIgdyA9IGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICAgIHBvcy5sZWZ0ICs9IGdldFNjcm9sbCh3KTtcbiAgICBwb3MudG9wICs9IGdldFNjcm9sbCh3LCB0cnVlKTtcbiAgICByZXR1cm4gcG9zO1xufVxudmFyIERpYWxvZyA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUNsYXNzKHtcbiAgICBkaXNwbGF5TmFtZTogJ0RpYWxvZycsXG4gICAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhZnRlckNsb3NlOiBub29wLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnJyxcbiAgICAgICAgICAgIG1hc2s6IHRydWUsXG4gICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIGtleWJvYXJkOiB0cnVlLFxuICAgICAgICAgICAgY2xvc2FibGU6IHRydWUsXG4gICAgICAgICAgICBtYXNrQ2xvc2FibGU6IHRydWUsXG4gICAgICAgICAgICBwcmVmaXhDbHM6ICdyYy1kaWFsb2cnLFxuICAgICAgICAgICAgb25DbG9zZTogbm9vcFxuICAgICAgICB9O1xuICAgIH0sXG4gICAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgIHRoaXMuaW5UcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGl0bGVJZCA9ICdyY0RpYWxvZ1RpdGxlJyArIHV1aWQrKztcbiAgICB9LFxuICAgIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnREaWRVcGRhdGUoe30pO1xuICAgIH0sXG4gICAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbiBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICAgIHZhciBtb3VzZVBvc2l0aW9uID0gdGhpcy5wcm9wcy5tb3VzZVBvc2l0aW9uO1xuICAgICAgICBpZiAocHJvcHMudmlzaWJsZSkge1xuICAgICAgICAgICAgLy8gZmlyc3Qgc2hvd1xuICAgICAgICAgICAgaWYgKCFwcmV2UHJvcHMudmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlblRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdE91dFNpZGVGb2N1c05vZGUgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkU2Nyb2xsaW5nRWZmZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWZzLndyYXAuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGlhbG9nTm9kZSA9IF9yZWFjdERvbTJbXCJkZWZhdWx0XCJdLmZpbmRET01Ob2RlKHRoaXMucmVmcy5kaWFsb2cpO1xuICAgICAgICAgICAgICAgIGlmIChtb3VzZVBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbE9mZnNldCA9IG9mZnNldChkaWFsb2dOb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNmb3JtT3JpZ2luKGRpYWxvZ05vZGUsIG1vdXNlUG9zaXRpb24ueCAtIGVsT2Zmc2V0LmxlZnQgKyAncHggJyArIChtb3VzZVBvc2l0aW9uLnkgLSBlbE9mZnNldC50b3ApICsgJ3B4Jyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VHJhbnNmb3JtT3JpZ2luKGRpYWxvZ05vZGUsICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocHJldlByb3BzLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuaW5UcmFuc2l0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChwcm9wcy5tYXNrICYmIHRoaXMubGFzdE91dFNpZGVGb2N1c05vZGUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RPdXRTaWRlRm9jdXNOb2RlLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RPdXRTaWRlRm9jdXNOb2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0T3V0U2lkZUZvY3VzTm9kZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMudmlzaWJsZSB8fCB0aGlzLmluVHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVTY3JvbGxpbmdFZmZlY3QoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25BbmltYXRlTGVhdmU6IGZ1bmN0aW9uIG9uQW5pbWF0ZUxlYXZlKCkge1xuICAgICAgICAvLyBuZWVkIGRlbW8/XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdC1jb21wb25lbnQvZGlhbG9nL3B1bGwvMjhcbiAgICAgICAgaWYgKHRoaXMucmVmcy53cmFwKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnMud3JhcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5UcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVtb3ZlU2Nyb2xsaW5nRWZmZWN0KCk7XG4gICAgICAgIHRoaXMucHJvcHMuYWZ0ZXJDbG9zZSgpO1xuICAgIH0sXG4gICAgb25NYXNrQ2xpY2s6IGZ1bmN0aW9uIG9uTWFza0NsaWNrKGUpIHtcbiAgICAgICAgLy8gYW5kcm9pZCB0cmlnZ2VyIGNsaWNrIG9uIG9wZW4gKGZhc3RjbGljaz8/KVxuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMub3BlblRpbWUgPCAzMDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuICAgICAgICAgICAgdGhpcy5jbG9zZShlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25LZXlEb3duOiBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAocHJvcHMua2V5Ym9hcmQgJiYgZS5rZXlDb2RlID09PSBfS2V5Q29kZTJbXCJkZWZhdWx0XCJdLkVTQykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZShlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBrZWVwIGZvY3VzIGluc2lkZSBkaWFsb2dcbiAgICAgICAgaWYgKHByb3BzLnZpc2libGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IF9LZXlDb2RlMltcImRlZmF1bHRcIl0uVEFCKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgICAgICAgICAgIHZhciBkaWFsb2dSb290ID0gdGhpcy5yZWZzLndyYXA7XG4gICAgICAgICAgICAgICAgdmFyIHNlbnRpbmVsID0gdGhpcy5yZWZzLnNlbnRpbmVsO1xuICAgICAgICAgICAgICAgIGlmIChlLnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmVFbGVtZW50ID09PSBkaWFsb2dSb290KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW50aW5lbC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhY3RpdmVFbGVtZW50ID09PSB0aGlzLnJlZnMuc2VudGluZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nUm9vdC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgZ2V0RGlhbG9nRWxlbWVudDogZnVuY3Rpb24gZ2V0RGlhbG9nRWxlbWVudCgpIHtcbiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgICAgdmFyIGNsb3NhYmxlID0gcHJvcHMuY2xvc2FibGU7XG4gICAgICAgIHZhciBwcmVmaXhDbHMgPSBwcm9wcy5wcmVmaXhDbHM7XG4gICAgICAgIHZhciBkZXN0ID0ge307XG4gICAgICAgIGlmIChwcm9wcy53aWR0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZXN0LndpZHRoID0gcHJvcHMud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BzLmhlaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZXN0LmhlaWdodCA9IHByb3BzLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZm9vdGVyID0gdm9pZCAwO1xuICAgICAgICBpZiAocHJvcHMuZm9vdGVyKSB7XG4gICAgICAgICAgICBmb290ZXIgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWZvb3RlcicsIHJlZjogXCJmb290ZXJcIiB9LCBwcm9wcy5mb290ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoZWFkZXIgPSB2b2lkIDA7XG4gICAgICAgIGlmIChwcm9wcy50aXRsZSkge1xuICAgICAgICAgICAgaGVhZGVyID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1oZWFkZXInLCByZWY6IFwiaGVhZGVyXCIgfSwgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy10aXRsZScsIGlkOiB0aGlzLnRpdGxlSWQgfSwgcHJvcHMudGl0bGUpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xvc2VyID0gdm9pZCAwO1xuICAgICAgICBpZiAoY2xvc2FibGUpIHtcbiAgICAgICAgICAgIGNsb3NlciA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBvbkNsaWNrOiB0aGlzLmNsb3NlLCBcImFyaWEtbGFiZWxcIjogXCJDbG9zZVwiLCBjbGFzc05hbWU6IHByZWZpeENscyArICctY2xvc2UnIH0sIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWNsb3NlLXgnIH0pKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3R5bGUgPSAoMCwgX29iamVjdEFzc2lnbjJbXCJkZWZhdWx0XCJdKSh7fSwgcHJvcHMuc3R5bGUsIGRlc3QpO1xuICAgICAgICB2YXIgdHJhbnNpdGlvbk5hbWUgPSB0aGlzLmdldFRyYW5zaXRpb25OYW1lKCk7XG4gICAgICAgIHZhciBkaWFsb2dFbGVtZW50ID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfTGF6eVJlbmRlckJveDJbXCJkZWZhdWx0XCJdLCB7IGtleTogXCJkaWFsb2ctZWxlbWVudFwiLCByb2xlOiBcImRvY3VtZW50XCIsIHJlZjogXCJkaWFsb2dcIiwgc3R5bGU6IHN0eWxlLCBjbGFzc05hbWU6IHByZWZpeENscyArICcgJyArIChwcm9wcy5jbGFzc05hbWUgfHwgJycpLCB2aXNpYmxlOiBwcm9wcy52aXNpYmxlIH0sIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctY29udGVudCcgfSwgY2xvc2VyLCBoZWFkZXIsIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19hc3NpZ24oeyBjbGFzc05hbWU6IHByZWZpeENscyArICctYm9keScsIHN0eWxlOiBwcm9wcy5ib2R5U3R5bGUsIHJlZjogXCJib2R5XCIgfSwgcHJvcHMuYm9keVByb3BzKSwgcHJvcHMuY2hpbGRyZW4pLCBmb290ZXIpLCBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgdGFiSW5kZXg6IDAsIHJlZjogXCJzZW50aW5lbFwiLCBzdHlsZTogeyB3aWR0aDogMCwgaGVpZ2h0OiAwLCBvdmVyZmxvdzogJ2hpZGRlbicgfSB9LCBcInNlbnRpbmVsXCIpKTtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX3JjQW5pbWF0ZTJbXCJkZWZhdWx0XCJdLCB7IGtleTogXCJkaWFsb2dcIiwgc2hvd1Byb3A6IFwidmlzaWJsZVwiLCBvbkxlYXZlOiB0aGlzLm9uQW5pbWF0ZUxlYXZlLCB0cmFuc2l0aW9uTmFtZTogdHJhbnNpdGlvbk5hbWUsIGNvbXBvbmVudDogXCJcIiwgdHJhbnNpdGlvbkFwcGVhcjogdHJ1ZSB9LCBkaWFsb2dFbGVtZW50KTtcbiAgICB9LFxuICAgIGdldFpJbmRleFN0eWxlOiBmdW5jdGlvbiBnZXRaSW5kZXhTdHlsZSgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0ge307XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChwcm9wcy56SW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3R5bGUuekluZGV4ID0gcHJvcHMuekluZGV4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9LFxuICAgIGdldFdyYXBTdHlsZTogZnVuY3Rpb24gZ2V0V3JhcFN0eWxlKCkge1xuICAgICAgICByZXR1cm4gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHRoaXMuZ2V0WkluZGV4U3R5bGUoKSwgdGhpcy5wcm9wcy53cmFwU3R5bGUpO1xuICAgIH0sXG4gICAgZ2V0TWFza1N0eWxlOiBmdW5jdGlvbiBnZXRNYXNrU3R5bGUoKSB7XG4gICAgICAgIHJldHVybiAoMCwgX29iamVjdEFzc2lnbjJbXCJkZWZhdWx0XCJdKSh7fSwgdGhpcy5nZXRaSW5kZXhTdHlsZSgpLCB0aGlzLnByb3BzLm1hc2tTdHlsZSk7XG4gICAgfSxcbiAgICBnZXRNYXNrRWxlbWVudDogZnVuY3Rpb24gZ2V0TWFza0VsZW1lbnQoKSB7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMucHJvcHM7XG4gICAgICAgIHZhciBtYXNrRWxlbWVudCA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHByb3BzLm1hc2spIHtcbiAgICAgICAgICAgIHZhciBtYXNrVHJhbnNpdGlvbiA9IHRoaXMuZ2V0TWFza1RyYW5zaXRpb25OYW1lKCk7XG4gICAgICAgICAgICBtYXNrRWxlbWVudCA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX0xhenlSZW5kZXJCb3gyW1wiZGVmYXVsdFwiXSwgX19hc3NpZ24oeyBzdHlsZTogdGhpcy5nZXRNYXNrU3R5bGUoKSwga2V5OiBcIm1hc2tcIiwgY2xhc3NOYW1lOiBwcm9wcy5wcmVmaXhDbHMgKyAnLW1hc2snLCBoaWRkZW5DbGFzc05hbWU6IHByb3BzLnByZWZpeENscyArICctbWFzay1oaWRkZW4nLCB2aXNpYmxlOiBwcm9wcy52aXNpYmxlIH0sIHByb3BzLm1hc2tQcm9wcykpO1xuICAgICAgICAgICAgaWYgKG1hc2tUcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgbWFza0VsZW1lbnQgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9yY0FuaW1hdGUyW1wiZGVmYXVsdFwiXSwgeyBrZXk6IFwibWFza1wiLCBzaG93UHJvcDogXCJ2aXNpYmxlXCIsIHRyYW5zaXRpb25BcHBlYXI6IHRydWUsIGNvbXBvbmVudDogXCJcIiwgdHJhbnNpdGlvbk5hbWU6IG1hc2tUcmFuc2l0aW9uIH0sIG1hc2tFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFza0VsZW1lbnQ7XG4gICAgfSxcbiAgICBnZXRNYXNrVHJhbnNpdGlvbk5hbWU6IGZ1bmN0aW9uIGdldE1hc2tUcmFuc2l0aW9uTmFtZSgpIHtcbiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgICAgdmFyIHRyYW5zaXRpb25OYW1lID0gcHJvcHMubWFza1RyYW5zaXRpb25OYW1lO1xuICAgICAgICB2YXIgYW5pbWF0aW9uID0gcHJvcHMubWFza0FuaW1hdGlvbjtcbiAgICAgICAgaWYgKCF0cmFuc2l0aW9uTmFtZSAmJiBhbmltYXRpb24pIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb25OYW1lID0gcHJvcHMucHJlZml4Q2xzICsgJy0nICsgYW5pbWF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2l0aW9uTmFtZTtcbiAgICB9LFxuICAgIGdldFRyYW5zaXRpb25OYW1lOiBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uTmFtZSgpIHtcbiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICAgICAgdmFyIHRyYW5zaXRpb25OYW1lID0gcHJvcHMudHJhbnNpdGlvbk5hbWU7XG4gICAgICAgIHZhciBhbmltYXRpb24gPSBwcm9wcy5hbmltYXRpb247XG4gICAgICAgIGlmICghdHJhbnNpdGlvbk5hbWUgJiYgYW5pbWF0aW9uKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uTmFtZSA9IHByb3BzLnByZWZpeENscyArICctJyArIGFuaW1hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJhbnNpdGlvbk5hbWU7XG4gICAgfSxcbiAgICBnZXRFbGVtZW50OiBmdW5jdGlvbiBnZXRFbGVtZW50KHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmc1twYXJ0XTtcbiAgICB9LFxuICAgIHNldFNjcm9sbGJhcjogZnVuY3Rpb24gc2V0U2Nyb2xsYmFyKCkge1xuICAgICAgICBpZiAodGhpcy5ib2R5SXNPdmVyZmxvd2luZyAmJiB0aGlzLnNjcm9sbGJhcldpZHRoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gdGhpcy5zY3JvbGxiYXJXaWR0aCArICdweCc7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGFkZFNjcm9sbGluZ0VmZmVjdDogZnVuY3Rpb24gYWRkU2Nyb2xsaW5nRWZmZWN0KCkge1xuICAgICAgICBvcGVuQ291bnQrKztcbiAgICAgICAgaWYgKG9wZW5Db3VudCAhPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hlY2tTY3JvbGxiYXIoKTtcbiAgICAgICAgdGhpcy5zZXRTY3JvbGxiYXIoKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICAvLyB0aGlzLmFkanVzdERpYWxvZygpO1xuICAgIH0sXG4gICAgcmVtb3ZlU2Nyb2xsaW5nRWZmZWN0OiBmdW5jdGlvbiByZW1vdmVTY3JvbGxpbmdFZmZlY3QoKSB7XG4gICAgICAgIG9wZW5Db3VudC0tO1xuICAgICAgICBpZiAob3BlbkNvdW50ICE9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICB0aGlzLnJlc2V0U2Nyb2xsYmFyKCk7XG4gICAgICAgIC8vIHRoaXMucmVzZXRBZGp1c3RtZW50cygpO1xuICAgIH0sXG4gICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKGUpIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkNsb3NlKGUpO1xuICAgIH0sXG4gICAgY2hlY2tTY3JvbGxiYXI6IGZ1bmN0aW9uIGNoZWNrU2Nyb2xsYmFyKCkge1xuICAgICAgICB2YXIgZnVsbFdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGlmICghZnVsbFdpbmRvd1dpZHRoKSB7XG4gICAgICAgICAgICB2YXIgZG9jdW1lbnRFbGVtZW50UmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGZ1bGxXaW5kb3dXaWR0aCA9IGRvY3VtZW50RWxlbWVudFJlY3QucmlnaHQgLSBNYXRoLmFicyhkb2N1bWVudEVsZW1lbnRSZWN0LmxlZnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYm9keUlzT3ZlcmZsb3dpbmcgPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoIDwgZnVsbFdpbmRvd1dpZHRoO1xuICAgICAgICBpZiAodGhpcy5ib2R5SXNPdmVyZmxvd2luZykge1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxiYXJXaWR0aCA9ICgwLCBfZ2V0U2Nyb2xsQmFyU2l6ZTJbXCJkZWZhdWx0XCJdKSgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICByZXNldFNjcm9sbGJhcjogZnVuY3Rpb24gcmVzZXRTY3JvbGxiYXIoKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gJyc7XG4gICAgfSxcbiAgICBhZGp1c3REaWFsb2c6IGZ1bmN0aW9uIGFkanVzdERpYWxvZygpIHtcbiAgICAgICAgaWYgKHRoaXMucmVmcy53cmFwICYmIHRoaXMuc2Nyb2xsYmFyV2lkdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG1vZGFsSXNPdmVyZmxvd2luZyA9IHRoaXMucmVmcy53cmFwLnNjcm9sbEhlaWdodCA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLnJlZnMud3JhcC5zdHlsZS5wYWRkaW5nTGVmdCA9ICghdGhpcy5ib2R5SXNPdmVyZmxvd2luZyAmJiBtb2RhbElzT3ZlcmZsb3dpbmcgPyB0aGlzLnNjcm9sbGJhcldpZHRoIDogJycpICsgJ3B4JztcbiAgICAgICAgICAgIHRoaXMucmVmcy53cmFwLnN0eWxlLnBhZGRpbmdSaWdodCA9ICh0aGlzLmJvZHlJc092ZXJmbG93aW5nICYmICFtb2RhbElzT3ZlcmZsb3dpbmcgPyB0aGlzLnNjcm9sbGJhcldpZHRoIDogJycpICsgJ3B4JztcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVzZXRBZGp1c3RtZW50czogZnVuY3Rpb24gcmVzZXRBZGp1c3RtZW50cygpIHtcbiAgICAgICAgaWYgKHRoaXMucmVmcy53cmFwKSB7XG4gICAgICAgICAgICB0aGlzLnJlZnMud3JhcC5zdHlsZS5wYWRkaW5nTGVmdCA9IHRoaXMucmVmcy53cmFwLnN0eWxlLnBhZGRpbmdMZWZ0ID0gJyc7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgICAgICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgICAgICAgbWFza0Nsb3NhYmxlID0gcHJvcHMubWFza0Nsb3NhYmxlO1xuXG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZ2V0V3JhcFN0eWxlKCk7XG4gICAgICAgIC8vIGNsZWFyIGhpZGUgZGlzcGxheVxuICAgICAgICAvLyBhbmQgb25seSBzZXQgZGlzcGxheSBhZnRlciBhc3luYyBhbmltLCBub3QgaGVyZSBmb3IgaGlkZVxuICAgICAgICBpZiAocHJvcHMudmlzaWJsZSkge1xuICAgICAgICAgICAgc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgbnVsbCwgdGhpcy5nZXRNYXNrRWxlbWVudCgpLCBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9fYXNzaWduKHsgdGFiSW5kZXg6IC0xLCBvbktleURvd246IHRoaXMub25LZXlEb3duLCBjbGFzc05hbWU6IHByZWZpeENscyArICctd3JhcCAnICsgKHByb3BzLndyYXBDbGFzc05hbWUgfHwgJycpLCByZWY6IFwid3JhcFwiLCBvbkNsaWNrOiBtYXNrQ2xvc2FibGUgPyB0aGlzLm9uTWFza0NsaWNrIDogdW5kZWZpbmVkLCByb2xlOiBcImRpYWxvZ1wiLCBcImFyaWEtbGFiZWxsZWRieVwiOiBwcm9wcy50aXRsZSA/IHRoaXMudGl0bGVJZCA6IG51bGwsIHN0eWxlOiBzdHlsZSB9LCBwcm9wcy53cmFwUHJvcHMpLCB0aGlzLmdldERpYWxvZ0VsZW1lbnQoKSkpO1xuICAgIH1cbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBEaWFsb2c7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yYy1kaWFsb2cvbGliL0RpYWxvZy5qc1xuICoqIG1vZHVsZSBpZCA9IDIwOVxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9EaWFsb2cgPSByZXF1aXJlKCcuL0RpYWxvZycpO1xuXG52YXIgX0RpYWxvZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9EaWFsb2cpO1xuXG52YXIgX2dldENvbnRhaW5lclJlbmRlck1peGluID0gcmVxdWlyZSgncmMtdXRpbC9saWIvZ2V0Q29udGFpbmVyUmVuZGVyTWl4aW4nKTtcblxudmFyIF9nZXRDb250YWluZXJSZW5kZXJNaXhpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZXRDb250YWluZXJSZW5kZXJNaXhpbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG52YXIgX19hc3NpZ24gPSB1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXNzaWduIHx8IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHQpIHtcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBzKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG5cbnZhciBEaWFsb2dXcmFwID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlQ2xhc3Moe1xuICAgIGRpc3BsYXlOYW1lOiAnRGlhbG9nV3JhcCcsXG5cbiAgICBtaXhpbnM6IFsoMCwgX2dldENvbnRhaW5lclJlbmRlck1peGluMltcImRlZmF1bHRcIl0pKHtcbiAgICAgICAgaXNWaXNpYmxlOiBmdW5jdGlvbiBpc1Zpc2libGUoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5wcm9wcy52aXNpYmxlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGF1dG9EZXN0cm95OiBmYWxzZSxcbiAgICAgICAgZ2V0Q29tcG9uZW50OiBmdW5jdGlvbiBnZXRDb21wb25lbnQoaW5zdGFuY2UsIGV4dHJhKSB7XG4gICAgICAgICAgICByZXR1cm4gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfRGlhbG9nMltcImRlZmF1bHRcIl0sIF9fYXNzaWduKHt9LCBpbnN0YW5jZS5wcm9wcywgZXh0cmEsIHsga2V5OiBcImRpYWxvZ1wiIH0pKTtcbiAgICAgICAgfVxuICAgIH0pXSxcbiAgICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIGdldERlZmF1bHRQcm9wcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfSxcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShfcmVmKSB7XG4gICAgICAgIHZhciB2aXNpYmxlID0gX3JlZi52aXNpYmxlO1xuXG4gICAgICAgIHJldHVybiAhISh0aGlzLnByb3BzLnZpc2libGUgfHwgdmlzaWJsZSk7XG4gICAgfSxcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ29tcG9uZW50KHtcbiAgICAgICAgICAgICAgICBhZnRlckNsb3NlOiB0aGlzLnJlbW92ZUNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbiBvbkNsb3NlKCkge30sXG5cbiAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUNvbnRhaW5lcigpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRFbGVtZW50OiBmdW5jdGlvbiBnZXRFbGVtZW50KHBhcnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudC5nZXRFbGVtZW50KHBhcnQpO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBEaWFsb2dXcmFwO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmMtZGlhbG9nL2xpYi9EaWFsb2dXcmFwLmpzXG4gKiogbW9kdWxlIGlkID0gMjEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDQgNSA2IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX29iamVjdEFzc2lnbiA9IHJlcXVpcmUoJ29iamVjdC1hc3NpZ24nKTtcblxudmFyIF9vYmplY3RBc3NpZ24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb2JqZWN0QXNzaWduKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbnZhciBfX2Fzc2lnbiA9IHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hc3NpZ24gfHwgT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodCkge1xuICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBmb3IgKHZhciBwIGluIHMpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufTtcblxudmFyIExhenlSZW5kZXJCb3ggPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7XG4gICAgZGlzcGxheU5hbWU6ICdMYXp5UmVuZGVyQm94JyxcbiAgICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uIHNob3VsZENvbXBvbmVudFVwZGF0ZShuZXh0UHJvcHMpIHtcbiAgICAgICAgcmV0dXJuICEhbmV4dFByb3BzLmhpZGRlbkNsYXNzTmFtZSB8fCAhIW5leHRQcm9wcy52aXNpYmxlO1xuICAgIH0sXG4gICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLnByb3BzLmNsYXNzTmFtZTtcbiAgICAgICAgaWYgKCEhdGhpcy5wcm9wcy5oaWRkZW5DbGFzc05hbWUgJiYgIXRoaXMucHJvcHMudmlzaWJsZSkge1xuICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgJyArIHRoaXMucHJvcHMuaGlkZGVuQ2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcm9wcyA9ICgwLCBfb2JqZWN0QXNzaWduMltcImRlZmF1bHRcIl0pKHt9LCB0aGlzLnByb3BzKTtcbiAgICAgICAgZGVsZXRlIHByb3BzLmhpZGRlbkNsYXNzTmFtZTtcbiAgICAgICAgZGVsZXRlIHByb3BzLnZpc2libGU7XG4gICAgICAgIHByb3BzLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX19hc3NpZ24oe30sIHByb3BzKSk7XG4gICAgfVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IExhenlSZW5kZXJCb3g7XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yYy1kaWFsb2cvbGliL0xhenlSZW5kZXJCb3guanNcbiAqKiBtb2R1bGUgaWQgPSAyMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gNCA1IDYgN1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBnZXRDb250YWluZXJSZW5kZXJNaXhpbjtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIGRlZmF1bHRHZXRDb250YWluZXIoKSB7XG4gIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICByZXR1cm4gY29udGFpbmVyO1xufVxuXG5mdW5jdGlvbiBnZXRDb250YWluZXJSZW5kZXJNaXhpbihjb25maWcpIHtcbiAgdmFyIF9jb25maWckYXV0b01vdW50ID0gY29uZmlnLmF1dG9Nb3VudDtcbiAgdmFyIGF1dG9Nb3VudCA9IF9jb25maWckYXV0b01vdW50ID09PSB1bmRlZmluZWQgPyB0cnVlIDogX2NvbmZpZyRhdXRvTW91bnQ7XG4gIHZhciBfY29uZmlnJGF1dG9EZXN0cm95ID0gY29uZmlnLmF1dG9EZXN0cm95O1xuICB2YXIgYXV0b0Rlc3Ryb3kgPSBfY29uZmlnJGF1dG9EZXN0cm95ID09PSB1bmRlZmluZWQgPyB0cnVlIDogX2NvbmZpZyRhdXRvRGVzdHJveTtcbiAgdmFyIGlzVmlzaWJsZSA9IGNvbmZpZy5pc1Zpc2libGU7XG4gIHZhciBnZXRDb21wb25lbnQgPSBjb25maWcuZ2V0Q29tcG9uZW50O1xuICB2YXIgX2NvbmZpZyRnZXRDb250YWluZXIgPSBjb25maWcuZ2V0Q29udGFpbmVyO1xuICB2YXIgZ2V0Q29udGFpbmVyID0gX2NvbmZpZyRnZXRDb250YWluZXIgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRHZXRDb250YWluZXIgOiBfY29uZmlnJGdldENvbnRhaW5lcjtcblxuXG4gIHZhciBtaXhpbiA9IHZvaWQgMDtcblxuICBmdW5jdGlvbiBfcmVuZGVyQ29tcG9uZW50KGluc3RhbmNlLCBjb21wb25lbnRBcmcsIHJlYWR5KSB7XG4gICAgaWYgKCFpc1Zpc2libGUgfHwgaW5zdGFuY2UuX2NvbXBvbmVudCB8fCBpc1Zpc2libGUoaW5zdGFuY2UpKSB7XG4gICAgICBpZiAoIWluc3RhbmNlLl9jb250YWluZXIpIHtcbiAgICAgICAgaW5zdGFuY2UuX2NvbnRhaW5lciA9IGdldENvbnRhaW5lcihpbnN0YW5jZSk7XG4gICAgICB9XG4gICAgICBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS51bnN0YWJsZV9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcihpbnN0YW5jZSwgZ2V0Q29tcG9uZW50KGluc3RhbmNlLCBjb21wb25lbnRBcmcpLCBpbnN0YW5jZS5fY29udGFpbmVyLCBmdW5jdGlvbiBjYWxsYmFjaygpIHtcbiAgICAgICAgaW5zdGFuY2UuX2NvbXBvbmVudCA9IHRoaXM7XG4gICAgICAgIGlmIChyZWFkeSkge1xuICAgICAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChhdXRvTW91bnQpIHtcbiAgICBtaXhpbiA9IF9leHRlbmRzKHt9LCBtaXhpbiwge1xuICAgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgICBfcmVuZGVyQ29tcG9uZW50KHRoaXMpO1xuICAgICAgfSxcbiAgICAgIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICBfcmVuZGVyQ29tcG9uZW50KHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaWYgKCFhdXRvTW91bnQgfHwgIWF1dG9EZXN0cm95KSB7XG4gICAgbWl4aW4gPSBfZXh0ZW5kcyh7fSwgbWl4aW4sIHtcbiAgICAgIHJlbmRlckNvbXBvbmVudDogZnVuY3Rpb24gcmVuZGVyQ29tcG9uZW50KGNvbXBvbmVudEFyZywgcmVhZHkpIHtcbiAgICAgICAgX3JlbmRlckNvbXBvbmVudCh0aGlzLCBjb21wb25lbnRBcmcsIHJlYWR5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9yZW1vdmVDb250YWluZXIoaW5zdGFuY2UpIHtcbiAgICBpZiAoaW5zdGFuY2UuX2NvbnRhaW5lcikge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IGluc3RhbmNlLl9jb250YWluZXI7XG4gICAgICBfcmVhY3REb20yW1wiZGVmYXVsdFwiXS51bm1vdW50Q29tcG9uZW50QXROb2RlKGNvbnRhaW5lcik7XG4gICAgICBjb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuICAgICAgaW5zdGFuY2UuX2NvbnRhaW5lciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgaWYgKGF1dG9EZXN0cm95KSB7XG4gICAgbWl4aW4gPSBfZXh0ZW5kcyh7fSwgbWl4aW4sIHtcbiAgICAgIGNvbXBvbmVudFdpbGxVbm1vdW50OiBmdW5jdGlvbiBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgX3JlbW92ZUNvbnRhaW5lcih0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBtaXhpbiA9IF9leHRlbmRzKHt9LCBtaXhpbiwge1xuICAgICAgcmVtb3ZlQ29udGFpbmVyOiBmdW5jdGlvbiByZW1vdmVDb250YWluZXIoKSB7XG4gICAgICAgIF9yZW1vdmVDb250YWluZXIodGhpcyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gbWl4aW47XG59XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yYy1kaWFsb2cvfi9yYy11dGlsL2xpYi9nZXRDb250YWluZXJSZW5kZXJNaXhpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIxM1xuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGVkID0gdm9pZCAwO1xuXG5mdW5jdGlvbiBnZXRTY3JvbGxCYXJTaXplKGZyZXNoKSB7XG4gIGlmIChmcmVzaCB8fCBjYWNoZWQgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGlubmVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIGlubmVyLnN0eWxlLmhlaWdodCA9ICcyMDBweCc7XG5cbiAgICB2YXIgb3V0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB2YXIgb3V0ZXJTdHlsZSA9IG91dGVyLnN0eWxlO1xuXG4gICAgb3V0ZXJTdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgb3V0ZXJTdHlsZS50b3AgPSAwO1xuICAgIG91dGVyU3R5bGUubGVmdCA9IDA7XG4gICAgb3V0ZXJTdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIG91dGVyU3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIG91dGVyU3R5bGUud2lkdGggPSAnMjAwcHgnO1xuICAgIG91dGVyU3R5bGUuaGVpZ2h0ID0gJzE1MHB4JztcbiAgICBvdXRlclN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cbiAgICBvdXRlci5hcHBlbmRDaGlsZChpbm5lcik7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG91dGVyKTtcblxuICAgIHZhciB3aWR0aENvbnRhaW5lZCA9IGlubmVyLm9mZnNldFdpZHRoO1xuICAgIG91dGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG4gICAgdmFyIHdpZHRoU2Nyb2xsID0gaW5uZXIub2Zmc2V0V2lkdGg7XG5cbiAgICBpZiAod2lkdGhDb250YWluZWQgPT09IHdpZHRoU2Nyb2xsKSB7XG4gICAgICB3aWR0aFNjcm9sbCA9IG91dGVyLmNsaWVudFdpZHRoO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQob3V0ZXIpO1xuXG4gICAgY2FjaGVkID0gd2lkdGhDb250YWluZWQgLSB3aWR0aFNjcm9sbDtcbiAgfVxuICByZXR1cm4gY2FjaGVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFNjcm9sbEJhclNpemU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmMtZGlhbG9nL34vcmMtdXRpbC9saWIvZ2V0U2Nyb2xsQmFyU2l6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIxNFxuICoqIG1vZHVsZSBjaHVua3MgPSA0IDUgNiA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB7XG4gIHByb3BUeXBlczoge1xuICAgIHByZWZpeENsczogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgc3Ryb2tlV2lkdGg6IF9yZWFjdC5Qcm9wVHlwZXMub25lT2ZUeXBlKFtfcmVhY3QuUHJvcFR5cGVzLm51bWJlciwgX3JlYWN0LlByb3BUeXBlcy5zdHJpbmddKSxcbiAgICBzdHJva2VDb2xvcjogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgdHJhaWxXaWR0aDogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMubnVtYmVyLCBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZ10pLFxuICAgIHRyYWlsQ29sb3I6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIHN0cm9rZUxpbmVjYXA6IF9yZWFjdC5Qcm9wVHlwZXMub25lT2YoWydyb3VuZCcsICdzcXVhcmUnXSksXG4gICAgc3R5bGU6IF9yZWFjdC5Qcm9wVHlwZXMub2JqZWN0LFxuICAgIGNsYXNzTmFtZTogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmdcbiAgfSxcbiAgZ2V0RGVmYXVsdFByb3BzOiBmdW5jdGlvbiBnZXREZWZhdWx0UHJvcHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByZWZpeENsczogJ3JjLXByb2dyZXNzJyxcbiAgICAgIHN0cm9rZVdpZHRoOiAxLFxuICAgICAgc3Ryb2tlQ29sb3I6ICcjMmRiN2Y1JyxcbiAgICAgIHRyYWlsV2lkdGg6IDEsXG4gICAgICB0cmFpbENvbG9yOiAnI0Q5RDlEOScsXG4gICAgICBzdHJva2VMaW5lY2FwOiAncm91bmQnLFxuICAgICAgY2xhc3NOYW1lOiAnJ1xuICAgIH07XG4gIH0sXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMucGF0aC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMC4zcywgMC4zcyc7XG4gICAgaWYgKHRoaXMucHJldlRpbWVTdGFtcCAmJiBub3cgLSB0aGlzLnByZXZUaW1lU3RhbXAgPCAxMDApIHtcbiAgICAgIHRoaXMucGF0aC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSAnMHMsIDBzJztcbiAgICB9XG4gICAgdGhpcy5wcmV2VGltZVN0YW1wID0gRGF0ZS5ub3coKTtcbiAgfVxufTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JjLXByb2dyZXNzL2xpYi9taXhpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDUyMVxuICoqIG1vZHVsZSBjaHVua3MgPSA3XG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHVpZDtcbnZhciBub3cgPSArbmV3IERhdGUoKTtcbnZhciBpbmRleCA9IDA7XG5cbmZ1bmN0aW9uIHVpZCgpIHtcbiAgcmV0dXJuIFwicmMtdXBsb2FkLVwiICsgbm93ICsgXCItXCIgKyArK2luZGV4O1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmMtdXBsb2FkL2xpYi91aWQuanNcbiAqKiBtb2R1bGUgaWQgPSA1MjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gN1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9wcm9ncmVzcyA9IHJlcXVpcmUoJy4vcHJvZ3Jlc3MnKTtcblxudmFyIF9wcm9ncmVzczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm9ncmVzcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IF9wcm9ncmVzczJbXCJkZWZhdWx0XCJdO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYW50ZC9saWIvcHJvZ3Jlc3MvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA2MTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gN1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB1bmRlZmluZWQ7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eScpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5Mik7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2syID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrJyk7XG5cbnZhciBfY2xhc3NDYWxsQ2hlY2szID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NDYWxsQ2hlY2syKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuJyk7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMik7XG5cbnZhciBfaW5oZXJpdHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2luaGVyaXRzJyk7XG5cbnZhciBfaW5oZXJpdHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5oZXJpdHMyKTtcblxudmFyIF9yZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5cbnZhciBfcmVhY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVhY3QpO1xuXG52YXIgX2ljb24gPSByZXF1aXJlKCcuLi9pY29uJyk7XG5cbnZhciBfaWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pY29uKTtcblxudmFyIF9yY1Byb2dyZXNzID0gcmVxdWlyZSgncmMtcHJvZ3Jlc3MnKTtcblxudmFyIF9jbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG52YXIgX19yZXN0ID0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX3Jlc3QgfHwgZnVuY3Rpb24gKHMsIGUpIHtcbiAgICB2YXIgdCA9IHt9O1xuICAgIGZvciAodmFyIHAgaW4gcykge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApIHRbcF0gPSBzW3BdO1xuICAgIH1pZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgIH1yZXR1cm4gdDtcbn07XG5cbnZhciBzdGF0dXNDb2xvck1hcCA9IHtcbiAgICBub3JtYWw6ICcjMTA4ZWU5JyxcbiAgICBleGNlcHRpb246ICcjZmY1NTAwJyxcbiAgICBzdWNjZXNzOiAnIzg3ZDA2OCdcbn07XG5cbnZhciBQcm9ncmVzcyA9IGZ1bmN0aW9uIChfUmVhY3QkQ29tcG9uZW50KSB7XG4gICAgKDAsIF9pbmhlcml0czNbXCJkZWZhdWx0XCJdKShQcm9ncmVzcywgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBQcm9ncmVzcygpIHtcbiAgICAgICAgKDAsIF9jbGFzc0NhbGxDaGVjazNbXCJkZWZhdWx0XCJdKSh0aGlzLCBQcm9ncmVzcyk7XG4gICAgICAgIHJldHVybiAoMCwgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zW1wiZGVmYXVsdFwiXSkodGhpcywgX1JlYWN0JENvbXBvbmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBQcm9ncmVzcy5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgICAgICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblxuICAgICAgICB2YXIgcHJlZml4Q2xzID0gcHJvcHMucHJlZml4Q2xzLFxuICAgICAgICAgICAgY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lLFxuICAgICAgICAgICAgX3Byb3BzJHBlcmNlbnQgPSBwcm9wcy5wZXJjZW50LFxuICAgICAgICAgICAgcGVyY2VudCA9IF9wcm9wcyRwZXJjZW50ID09PSB1bmRlZmluZWQgPyAwIDogX3Byb3BzJHBlcmNlbnQsXG4gICAgICAgICAgICBzdGF0dXMgPSBwcm9wcy5zdGF0dXMsXG4gICAgICAgICAgICBmb3JtYXQgPSBwcm9wcy5mb3JtYXQsXG4gICAgICAgICAgICB0cmFpbENvbG9yID0gcHJvcHMudHJhaWxDb2xvcixcbiAgICAgICAgICAgIHR5cGUgPSBwcm9wcy50eXBlLFxuICAgICAgICAgICAgc3Ryb2tlV2lkdGggPSBwcm9wcy5zdHJva2VXaWR0aCxcbiAgICAgICAgICAgIHdpZHRoID0gcHJvcHMud2lkdGgsXG4gICAgICAgICAgICBzaG93SW5mbyA9IHByb3BzLnNob3dJbmZvLFxuICAgICAgICAgICAgcmVzdFByb3BzID0gX19yZXN0KHByb3BzLCBbXCJwcmVmaXhDbHNcIiwgXCJjbGFzc05hbWVcIiwgXCJwZXJjZW50XCIsIFwic3RhdHVzXCIsIFwiZm9ybWF0XCIsIFwidHJhaWxDb2xvclwiLCBcInR5cGVcIiwgXCJzdHJva2VXaWR0aFwiLCBcIndpZHRoXCIsIFwic2hvd0luZm9cIl0pO1xuXG4gICAgICAgIHZhciBwcm9ncmVzc1N0YXR1cyA9IHBhcnNlSW50KHBlcmNlbnQudG9TdHJpbmcoKSwgMTApID49IDEwMCAmJiAhKCdzdGF0dXMnIGluIHByb3BzKSA/ICdzdWNjZXNzJyA6IHN0YXR1cyB8fCAnbm9ybWFsJztcbiAgICAgICAgdmFyIHByb2dyZXNzSW5mbyA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHByb2dyZXNzID0gdm9pZCAwO1xuICAgICAgICB2YXIgdGV4dEZvcm1hdHRlciA9IGZvcm1hdCB8fCBmdW5jdGlvbiAocGVyY2VudE51bWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIHBlcmNlbnROdW1iZXIgKyAnJSc7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzaG93SW5mbykge1xuICAgICAgICAgICAgdmFyIHRleHQgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgaWNvblR5cGUgPSB0eXBlID09PSAnY2lyY2xlJyA/ICcnIDogJy1jaXJjbGUnO1xuICAgICAgICAgICAgaWYgKHByb2dyZXNzU3RhdHVzID09PSAnZXhjZXB0aW9uJykge1xuICAgICAgICAgICAgICAgIHRleHQgPSBmb3JtYXQgPyB0ZXh0Rm9ybWF0dGVyKHBlcmNlbnQpIDogX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfaWNvbjJbXCJkZWZhdWx0XCJdLCB7IHR5cGU6ICdjcm9zcycgKyBpY29uVHlwZSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3NTdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgICAgICAgIHRleHQgPSBmb3JtYXQgPyB0ZXh0Rm9ybWF0dGVyKHBlcmNlbnQpIDogX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfaWNvbjJbXCJkZWZhdWx0XCJdLCB7IHR5cGU6ICdjaGVjaycgKyBpY29uVHlwZSB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGV4dCA9IHRleHRGb3JtYXR0ZXIocGVyY2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcm9ncmVzc0luZm8gPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy10ZXh0JyB9LFxuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09ICdsaW5lJykge1xuICAgICAgICAgICAgdmFyIHBlcmNlbnRTdHlsZSA9IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogcGVyY2VudCArICclJyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHN0cm9rZVdpZHRoIHx8IDEwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcHJvZ3Jlc3MgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLW91dGVyJyB9LFxuICAgICAgICAgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1pbm5lcicgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWJnJywgc3R5bGU6IHBlcmNlbnRTdHlsZSB9KVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0luZm9cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NpcmNsZScpIHtcbiAgICAgICAgICAgIHZhciBjaXJjbGVTaXplID0gd2lkdGggfHwgMTMyO1xuICAgICAgICAgICAgdmFyIGNpcmNsZVN0eWxlID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBjaXJjbGVTaXplLFxuICAgICAgICAgICAgICAgIGhlaWdodDogY2lyY2xlU2l6ZSxcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogY2lyY2xlU2l6ZSAqIDAuMTYgKyA2XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGNpcmNsZVdpZHRoID0gc3Ryb2tlV2lkdGggfHwgNjtcbiAgICAgICAgICAgIHByb2dyZXNzID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1pbm5lcicsIHN0eWxlOiBjaXJjbGVTdHlsZSB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX3JjUHJvZ3Jlc3MuQ2lyY2xlLCB7IHBlcmNlbnQ6IHBlcmNlbnQsIHN0cm9rZVdpZHRoOiBjaXJjbGVXaWR0aCwgdHJhaWxXaWR0aDogY2lyY2xlV2lkdGgsIHN0cm9rZUNvbG9yOiBzdGF0dXNDb2xvck1hcFtwcm9ncmVzc1N0YXR1c10sIHRyYWlsQ29sb3I6IHRyYWlsQ29sb3IsIHByZWZpeENsczogcHJlZml4Q2xzIH0pLFxuICAgICAgICAgICAgICAgIHByb2dyZXNzSW5mb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xhc3NTdHJpbmcgPSAoMCwgX2NsYXNzbmFtZXMyW1wiZGVmYXVsdFwiXSkocHJlZml4Q2xzLCAoX2NsYXNzTmFtZXMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy0nICsgdHlwZSwgdHJ1ZSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMsIHByZWZpeENscyArICctc3RhdHVzLScgKyBwcm9ncmVzc1N0YXR1cywgdHJ1ZSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMsIHByZWZpeENscyArICctc2hvdy1pbmZvJywgc2hvd0luZm8pLCBfY2xhc3NOYW1lcyksIGNsYXNzTmFtZSk7XG4gICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHJlc3RQcm9wcywgeyBjbGFzc05hbWU6IGNsYXNzU3RyaW5nIH0pLFxuICAgICAgICAgICAgcHJvZ3Jlc3NcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFByb2dyZXNzO1xufShfcmVhY3QyW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IFByb2dyZXNzO1xuXG5Qcm9ncmVzcy5kZWZhdWx0UHJvcHMgPSB7XG4gICAgdHlwZTogJ2xpbmUnLFxuICAgIHBlcmNlbnQ6IDAsXG4gICAgc2hvd0luZm86IHRydWUsXG4gICAgdHJhaWxDb2xvcjogJyNmM2YzZjMnLFxuICAgIHByZWZpeENsczogJ2FudC1wcm9ncmVzcydcbn07XG5Qcm9ncmVzcy5wcm9wVHlwZXMgPSB7XG4gICAgc3RhdHVzOiBfcmVhY3QuUHJvcFR5cGVzLm9uZU9mKFsnbm9ybWFsJywgJ2V4Y2VwdGlvbicsICdhY3RpdmUnLCAnc3VjY2VzcyddKSxcbiAgICB0eXBlOiBfcmVhY3QuUHJvcFR5cGVzLm9uZU9mKFsnbGluZScsICdjaXJjbGUnXSksXG4gICAgc2hvd0luZm86IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBwZXJjZW50OiBfcmVhY3QuUHJvcFR5cGVzLm51bWJlcixcbiAgICB3aWR0aDogX3JlYWN0LlByb3BUeXBlcy5udW1iZXIsXG4gICAgc3Ryb2tlV2lkdGg6IF9yZWFjdC5Qcm9wVHlwZXMubnVtYmVyLFxuICAgIHRyYWlsQ29sb3I6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIGZvcm1hdDogX3JlYWN0LlByb3BUeXBlcy5mdW5jXG59O1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYW50ZC9saWIvcHJvZ3Jlc3MvcHJvZ3Jlc3MuanNcbiAqKiBtb2R1bGUgaWQgPSA2MTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gN1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBnZXRGaWxlSXRlbTtcbmZ1bmN0aW9uIGdldEZpbGVJdGVtKGZpbGUsIGZpbGVMaXN0KSB7XG4gICAgdmFyIG1hdGNoV2F5ID0gIWZpbGUudWlkID8gJ2J5TmFtZScgOiAnYnlVaWQnO1xuICAgIHZhciB0YXJnZXQgPSBmaWxlTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKG1hdGNoV2F5ID09PSAnYnlOYW1lJykge1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gZmlsZS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpdGVtLnVpZCA9PT0gZmlsZS51aWQ7XG4gICAgfSlbMF07XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2FudGQvbGliL3VwbG9hZC9nZXRGaWxlSXRlbS5qc1xuICoqIG1vZHVsZSBpZCA9IDYyMFxuICoqIG1vZHVsZSBjaHVua3MgPSA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHVuZGVmaW5lZDtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknKTtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eTIpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9jbGFzc0NhbGxDaGVjaycpO1xuXG52YXIgX2NsYXNzQ2FsbENoZWNrMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2NsYXNzQ2FsbENoZWNrMik7XG5cbnZhciBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvcG9zc2libGVDb25zdHJ1Y3RvclJldHVybicpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIpO1xuXG52YXIgX2luaGVyaXRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9pbmhlcml0cycpO1xuXG52YXIgX2luaGVyaXRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luaGVyaXRzMik7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG5leHBvcnRzLkRyYWdnZXIgPSBEcmFnZ2VyO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmNVcGxvYWQgPSByZXF1aXJlKCdyYy11cGxvYWQnKTtcblxudmFyIF9yY1VwbG9hZDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yY1VwbG9hZCk7XG5cbnZhciBfdXBsb2FkTGlzdCA9IHJlcXVpcmUoJy4vdXBsb2FkTGlzdCcpO1xuXG52YXIgX3VwbG9hZExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXBsb2FkTGlzdCk7XG5cbnZhciBfZ2V0RmlsZUl0ZW0gPSByZXF1aXJlKCcuL2dldEZpbGVJdGVtJyk7XG5cbnZhciBfZ2V0RmlsZUl0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0RmlsZUl0ZW0pO1xuXG52YXIgX2NsYXNzbmFtZXMgPSByZXF1aXJlKCdjbGFzc25hbWVzJyk7XG5cbnZhciBfY2xhc3NuYW1lczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc25hbWVzKTtcblxudmFyIF9vYmplY3RBc3NpZ24gPSByZXF1aXJlKCdvYmplY3QtYXNzaWduJyk7XG5cbnZhciBfb2JqZWN0QXNzaWduMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29iamVjdEFzc2lnbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBUKCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuLy8gRml4IElFIGZpbGUuc3RhdHVzIHByb2JsZW1cbi8vIHZpYSBjb3BpbmcgYSBuZXcgT2JqZWN0XG5mdW5jdGlvbiBmaWxlVG9PYmplY3QoZmlsZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGxhc3RNb2RpZmllZDogZmlsZS5sYXN0TW9kaWZpZWQsXG4gICAgICAgIGxhc3RNb2RpZmllZERhdGU6IGZpbGUubGFzdE1vZGlmaWVkRGF0ZSxcbiAgICAgICAgbmFtZTogZmlsZS5maWxlbmFtZSB8fCBmaWxlLm5hbWUsXG4gICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICB1aWQ6IGZpbGUudWlkLFxuICAgICAgICByZXNwb25zZTogZmlsZS5yZXNwb25zZSxcbiAgICAgICAgZXJyb3I6IGZpbGUuZXJyb3IsXG4gICAgICAgIHBlcmNlbnQ6IDAsXG4gICAgICAgIG9yaWdpbkZpbGVPYmo6IGZpbGUsXG4gICAgICAgIHN0YXR1czogbnVsbFxuICAgIH07XG59XG4vKipcbiAqIOeUn+aIkFByb2dyZXNzIHBlcmNlbnQ6IDAuMSAtPiAwLjk4XG4gKiAgIC0gZm9yIGllXG4gKi9cbmZ1bmN0aW9uIGdlblBlcmNlbnRBZGQoKSB7XG4gICAgdmFyIGsgPSAwLjE7XG4gICAgdmFyIGkgPSAwLjAxO1xuICAgIHZhciBlbmQgPSAwLjk4O1xuICAgIHJldHVybiBmdW5jdGlvbiAocykge1xuICAgICAgICB2YXIgc3RhcnQgPSBzO1xuICAgICAgICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgc3RhcnQgKz0gaztcbiAgICAgICAgayA9IGsgLSBpO1xuICAgICAgICBpZiAoayA8IDAuMDAxKSB7XG4gICAgICAgICAgICBrID0gMC4wMDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXJ0ICogMTAwO1xuICAgIH07XG59XG5mdW5jdGlvbiBEcmFnZ2VyKHByb3BzKSB7XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoVXBsb2FkLCAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHByb3BzLCB7IHR5cGU6ICdkcmFnJywgc3R5bGU6IHsgaGVpZ2h0OiBwcm9wcy5oZWlnaHQgfSB9KSk7XG59XG5cbnZhciBVcGxvYWQgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgICgwLCBfaW5oZXJpdHMzW1wiZGVmYXVsdFwiXSkoVXBsb2FkLCBfUmVhY3QkQ29tcG9uZW50KTtcblxuICAgIGZ1bmN0aW9uIFVwbG9hZChwcm9wcykge1xuICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrM1tcImRlZmF1bHRcIl0pKHRoaXMsIFVwbG9hZCk7XG5cbiAgICAgICAgdmFyIF90aGlzID0gKDAsIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuM1tcImRlZmF1bHRcIl0pKHRoaXMsIF9SZWFjdCRDb21wb25lbnQuY2FsbCh0aGlzLCBwcm9wcykpO1xuXG4gICAgICAgIF90aGlzLm9uU3RhcnQgPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEl0ZW0gPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgbmV4dEZpbGVMaXN0ID0gX3RoaXMuc3RhdGUuZmlsZUxpc3QuY29uY2F0KCk7XG4gICAgICAgICAgICBpZiAoZmlsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0SXRlbSA9IGZpbGUubWFwKGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaWxlT2JqZWN0ID0gZmlsZVRvT2JqZWN0KGYpO1xuICAgICAgICAgICAgICAgICAgICBmaWxlT2JqZWN0LnN0YXR1cyA9ICd1cGxvYWRpbmcnO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZU9iamVjdDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBuZXh0RmlsZUxpc3QgPSBuZXh0RmlsZUxpc3QuY29uY2F0KHRhcmdldEl0ZW0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRJdGVtID0gZmlsZVRvT2JqZWN0KGZpbGUpO1xuICAgICAgICAgICAgICAgIHRhcmdldEl0ZW0uc3RhdHVzID0gJ3VwbG9hZGluZyc7XG4gICAgICAgICAgICAgICAgbmV4dEZpbGVMaXN0LnB1c2godGFyZ2V0SXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5vbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgZmlsZTogdGFyZ2V0SXRlbSxcbiAgICAgICAgICAgICAgICBmaWxlTGlzdDogbmV4dEZpbGVMaXN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGZpeCBpZSBwcm9ncmVzc1xuICAgICAgICAgICAgaWYgKCF3aW5kb3cuRm9ybURhdGEpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hdXRvVXBkYXRlUHJvZ3Jlc3MoMCwgdGFyZ2V0SXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLm9uU3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSwgZmlsZSkge1xuICAgICAgICAgICAgX3RoaXMuY2xlYXJQcm9ncmVzc1RpbWVyKCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IF90aGlzLnN0YXRlLmZpbGVMaXN0O1xuICAgICAgICAgICAgdmFyIHRhcmdldEl0ZW0gPSAoMCwgX2dldEZpbGVJdGVtMltcImRlZmF1bHRcIl0pKGZpbGUsIGZpbGVMaXN0KTtcbiAgICAgICAgICAgIC8vIHJlbW92ZWRcbiAgICAgICAgICAgIGlmICghdGFyZ2V0SXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhcmdldEl0ZW0uc3RhdHVzID0gJ2RvbmUnO1xuICAgICAgICAgICAgdGFyZ2V0SXRlbS5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgX3RoaXMub25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgIGZpbGU6IHRhcmdldEl0ZW0sXG4gICAgICAgICAgICAgICAgZmlsZUxpc3Q6IGZpbGVMaXN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgX3RoaXMub25Qcm9ncmVzcyA9IGZ1bmN0aW9uIChlLCBmaWxlKSB7XG4gICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBfdGhpcy5zdGF0ZS5maWxlTGlzdDtcbiAgICAgICAgICAgIHZhciB0YXJnZXRJdGVtID0gKDAsIF9nZXRGaWxlSXRlbTJbXCJkZWZhdWx0XCJdKShmaWxlLCBmaWxlTGlzdCk7XG4gICAgICAgICAgICAvLyByZW1vdmVkXG4gICAgICAgICAgICBpZiAoIXRhcmdldEl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXRJdGVtLnBlcmNlbnQgPSBlLnBlcmNlbnQ7XG4gICAgICAgICAgICBfdGhpcy5vbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IGUsXG4gICAgICAgICAgICAgICAgZmlsZTogdGFyZ2V0SXRlbSxcbiAgICAgICAgICAgICAgICBmaWxlTGlzdDogX3RoaXMuc3RhdGUuZmlsZUxpc3RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5vbkVycm9yID0gZnVuY3Rpb24gKGVycm9yLCByZXNwb25zZSwgZmlsZSkge1xuICAgICAgICAgICAgX3RoaXMuY2xlYXJQcm9ncmVzc1RpbWVyKCk7XG4gICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBfdGhpcy5zdGF0ZS5maWxlTGlzdDtcbiAgICAgICAgICAgIHZhciB0YXJnZXRJdGVtID0gKDAsIF9nZXRGaWxlSXRlbTJbXCJkZWZhdWx0XCJdKShmaWxlLCBmaWxlTGlzdCk7XG4gICAgICAgICAgICAvLyByZW1vdmVkXG4gICAgICAgICAgICBpZiAoIXRhcmdldEl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXRJdGVtLmVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICB0YXJnZXRJdGVtLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgICAgICB0YXJnZXRJdGVtLnN0YXR1cyA9ICdlcnJvcic7XG4gICAgICAgICAgICBfdGhpcy5vbkNoYW5nZSh7XG4gICAgICAgICAgICAgICAgZmlsZTogdGFyZ2V0SXRlbSxcbiAgICAgICAgICAgICAgICBmaWxlTGlzdDogZmlsZUxpc3RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5oYW5kbGVNYW51YWxSZW1vdmUgPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgX3RoaXMucmVmcy51cGxvYWQuYWJvcnQoZmlsZSk7XG4gICAgICAgICAgICBmaWxlLnN0YXR1cyA9ICdyZW1vdmVkJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlUmVtb3ZlKGZpbGUpO1xuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5vbkNoYW5nZSA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICBpZiAoISgnZmlsZUxpc3QnIGluIF90aGlzLnByb3BzKSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHsgZmlsZUxpc3Q6IGluZm8uZmlsZUxpc3QgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb25DaGFuZ2UgPSBfdGhpcy5wcm9wcy5vbkNoYW5nZTtcbiAgICAgICAgICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGluZm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBfdGhpcy5vbkZpbGVEcm9wID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgICAgICBkcmFnU3RhdGU6IGUudHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZmlsZUxpc3Q6IF90aGlzLnByb3BzLmZpbGVMaXN0IHx8IF90aGlzLnByb3BzLmRlZmF1bHRGaWxlTGlzdCB8fCBbXSxcbiAgICAgICAgICAgIGRyYWdTdGF0ZTogJ2Ryb3AnXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG5cbiAgICBVcGxvYWQucHJvdG90eXBlLmF1dG9VcGRhdGVQcm9ncmVzcyA9IGZ1bmN0aW9uIGF1dG9VcGRhdGVQcm9ncmVzcyhfLCBmaWxlKSB7XG4gICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBnZXRQZXJjZW50ID0gZ2VuUGVyY2VudEFkZCgpO1xuICAgICAgICB2YXIgY3VyUGVyY2VudCA9IDA7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NUaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGN1clBlcmNlbnQgPSBnZXRQZXJjZW50KGN1clBlcmNlbnQpO1xuICAgICAgICAgICAgX3RoaXMyLm9uUHJvZ3Jlc3Moe1xuICAgICAgICAgICAgICAgIHBlcmNlbnQ6IGN1clBlcmNlbnRcbiAgICAgICAgICAgIH0sIGZpbGUpO1xuICAgICAgICB9LCAyMDApO1xuICAgIH07XG5cbiAgICBVcGxvYWQucHJvdG90eXBlLnJlbW92ZUZpbGUgPSBmdW5jdGlvbiByZW1vdmVGaWxlKGZpbGUpIHtcbiAgICAgICAgdmFyIGZpbGVMaXN0ID0gdGhpcy5zdGF0ZS5maWxlTGlzdDtcbiAgICAgICAgdmFyIHRhcmdldEl0ZW0gPSAoMCwgX2dldEZpbGVJdGVtMltcImRlZmF1bHRcIl0pKGZpbGUsIGZpbGVMaXN0KTtcbiAgICAgICAgdmFyIGluZGV4ID0gZmlsZUxpc3QuaW5kZXhPZih0YXJnZXRJdGVtKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgZmlsZUxpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHJldHVybiBmaWxlTGlzdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gICAgVXBsb2FkLnByb3RvdHlwZS5oYW5kbGVSZW1vdmUgPSBmdW5jdGlvbiBoYW5kbGVSZW1vdmUoZmlsZSkge1xuICAgICAgICB2YXIgb25SZW1vdmUgPSB0aGlzLnByb3BzLm9uUmVtb3ZlO1xuICAgICAgICAvLyBQcmV2ZW50IHJlbW92aW5nIGZpbGVcblxuICAgICAgICB2YXIgb25SZW1vdmVSZXR1cm5WYWx1ZSA9IG9uUmVtb3ZlICYmIG9uUmVtb3ZlKGZpbGUpO1xuICAgICAgICBpZiAob25SZW1vdmVSZXR1cm5WYWx1ZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciBmaWxlTGlzdCA9IHRoaXMucmVtb3ZlRmlsZShmaWxlKTtcbiAgICAgICAgICAgIGlmIChmaWxlTGlzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBmaWxlOiBmaWxlLFxuICAgICAgICAgICAgICAgICAgICBmaWxlTGlzdDogZmlsZUxpc3RcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBVcGxvYWQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgPSBmdW5jdGlvbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICBpZiAoJ2ZpbGVMaXN0JyBpbiBuZXh0UHJvcHMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGZpbGVMaXN0OiBuZXh0UHJvcHMuZmlsZUxpc3QgfHwgW11cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIFVwbG9hZC5wcm90b3R5cGUuY2xlYXJQcm9ncmVzc1RpbWVyID0gZnVuY3Rpb24gY2xlYXJQcm9ncmVzc1RpbWVyKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMucHJvZ3Jlc3NUaW1lcik7XG4gICAgfTtcblxuICAgIFVwbG9hZC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX2NsYXNzTmFtZXMyO1xuXG4gICAgICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICAgICAgX3Byb3BzJHByZWZpeENscyA9IF9wcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgICAgICBwcmVmaXhDbHMgPSBfcHJvcHMkcHJlZml4Q2xzID09PSB1bmRlZmluZWQgPyAnJyA6IF9wcm9wcyRwcmVmaXhDbHMsXG4gICAgICAgICAgICBzaG93VXBsb2FkTGlzdCA9IF9wcm9wcy5zaG93VXBsb2FkTGlzdCxcbiAgICAgICAgICAgIGxpc3RUeXBlID0gX3Byb3BzLmxpc3RUeXBlLFxuICAgICAgICAgICAgb25QcmV2aWV3ID0gX3Byb3BzLm9uUHJldmlldyxcbiAgICAgICAgICAgIHR5cGUgPSBfcHJvcHMudHlwZSxcbiAgICAgICAgICAgIGRpc2FibGVkID0gX3Byb3BzLmRpc2FibGVkLFxuICAgICAgICAgICAgY2hpbGRyZW4gPSBfcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgICAgICBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lO1xuXG4gICAgICAgIHZhciByY1VwbG9hZFByb3BzID0gKDAsIF9vYmplY3RBc3NpZ24yW1wiZGVmYXVsdFwiXSkoe30sIHRoaXMucHJvcHMsIHtcbiAgICAgICAgICAgIG9uU3RhcnQ6IHRoaXMub25TdGFydCxcbiAgICAgICAgICAgIG9uRXJyb3I6IHRoaXMub25FcnJvcixcbiAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IHRoaXMub25Qcm9ncmVzcyxcbiAgICAgICAgICAgIG9uU3VjY2VzczogdGhpcy5vblN1Y2Nlc3NcbiAgICAgICAgfSk7XG4gICAgICAgIGRlbGV0ZSByY1VwbG9hZFByb3BzLmNsYXNzTmFtZTtcbiAgICAgICAgdmFyIHNob3dSZW1vdmVJY29uID0gc2hvd1VwbG9hZExpc3Quc2hvd1JlbW92ZUljb24sXG4gICAgICAgICAgICBzaG93UHJldmlld0ljb24gPSBzaG93VXBsb2FkTGlzdC5zaG93UHJldmlld0ljb247XG5cbiAgICAgICAgdmFyIHVwbG9hZExpc3QgPSBzaG93VXBsb2FkTGlzdCA/IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX3VwbG9hZExpc3QyW1wiZGVmYXVsdFwiXSwgeyBsaXN0VHlwZTogbGlzdFR5cGUsIGl0ZW1zOiB0aGlzLnN0YXRlLmZpbGVMaXN0LCBvblByZXZpZXc6IG9uUHJldmlldywgb25SZW1vdmU6IHRoaXMuaGFuZGxlTWFudWFsUmVtb3ZlLCBzaG93UmVtb3ZlSWNvbjogc2hvd1JlbW92ZUljb24sIHNob3dQcmV2aWV3SWNvbjogc2hvd1ByZXZpZXdJY29uIH0pIDogbnVsbDtcbiAgICAgICAgaWYgKHR5cGUgPT09ICdkcmFnJykge1xuICAgICAgICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXG4gICAgICAgICAgICB2YXIgZHJhZ0NscyA9ICgwLCBfY2xhc3NuYW1lczJbXCJkZWZhdWx0XCJdKShwcmVmaXhDbHMsIChfY2xhc3NOYW1lcyA9IHt9LCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzLCBwcmVmaXhDbHMgKyAnLWRyYWcnLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kcmFnLXVwbG9hZGluZycsIHRoaXMuc3RhdGUuZmlsZUxpc3Quc29tZShmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlLnN0YXR1cyA9PT0gJ3VwbG9hZGluZyc7XG4gICAgICAgICAgICB9KSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMsIHByZWZpeENscyArICctZHJhZy1ob3ZlcicsIHRoaXMuc3RhdGUuZHJhZ1N0YXRlID09PSAnZHJhZ292ZXInKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kaXNhYmxlZCcsIGRpc2FibGVkKSwgX2NsYXNzTmFtZXMpKTtcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG4gICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBkcmFnQ2xzLCBvbkRyb3A6IHRoaXMub25GaWxlRHJvcCwgb25EcmFnT3ZlcjogdGhpcy5vbkZpbGVEcm9wLCBvbkRyYWdMZWF2ZTogdGhpcy5vbkZpbGVEcm9wIH0sXG4gICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBfcmNVcGxvYWQyW1wiZGVmYXVsdFwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBfZXh0ZW5kczNbXCJkZWZhdWx0XCJdKSh7fSwgcmNVcGxvYWRQcm9wcywgeyByZWY6ICd1cGxvYWQnLCBjbGFzc05hbWU6IHByZWZpeENscyArICctYnRuJyB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IHByZWZpeENscyArICctZHJhZy1jb250YWluZXInIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgdXBsb2FkTGlzdFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXBsb2FkQnV0dG9uQ2xzID0gKDAsIF9jbGFzc25hbWVzMltcImRlZmF1bHRcIl0pKHByZWZpeENscywgKF9jbGFzc05hbWVzMiA9IHt9LCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzMiwgcHJlZml4Q2xzICsgJy1zZWxlY3QnLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lczIsIHByZWZpeENscyArICctc2VsZWN0LScgKyBsaXN0VHlwZSwgdHJ1ZSksICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMyLCBwcmVmaXhDbHMgKyAnLWRpc2FibGVkJywgZGlzYWJsZWQpLCBfY2xhc3NOYW1lczIpKTtcbiAgICAgICAgdmFyIHVwbG9hZEJ1dHRvbiA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgIHsgY2xhc3NOYW1lOiB1cGxvYWRCdXR0b25DbHMsIHN0eWxlOiB7IGRpc3BsYXk6IGNoaWxkcmVuID8gJycgOiAnbm9uZScgfSB9LFxuICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfcmNVcGxvYWQyW1wiZGVmYXVsdFwiXSwgKDAsIF9leHRlbmRzM1tcImRlZmF1bHRcIl0pKHt9LCByY1VwbG9hZFByb3BzLCB7IHJlZjogJ3VwbG9hZCcgfSkpXG4gICAgICAgICk7XG4gICAgICAgIGlmIChsaXN0VHlwZSA9PT0gJ3BpY3R1cmUtY2FyZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG4gICAgICAgICAgICAgICAgdXBsb2FkTGlzdCxcbiAgICAgICAgICAgICAgICB1cGxvYWRCdXR0b25cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAnc3BhbicsXG4gICAgICAgICAgICB7IGNsYXNzTmFtZTogY2xhc3NOYW1lIH0sXG4gICAgICAgICAgICB1cGxvYWRCdXR0b24sXG4gICAgICAgICAgICB1cGxvYWRMaXN0XG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBVcGxvYWQ7XG59KF9yZWFjdDJbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gVXBsb2FkO1xuXG5VcGxvYWQuRHJhZ2dlciA9IERyYWdnZXI7XG5VcGxvYWQuZGVmYXVsdFByb3BzID0ge1xuICAgIHByZWZpeENsczogJ2FudC11cGxvYWQnLFxuICAgIHR5cGU6ICdzZWxlY3QnLFxuICAgIG11bHRpcGxlOiBmYWxzZSxcbiAgICBhY3Rpb246ICcnLFxuICAgIGRhdGE6IHt9LFxuICAgIGFjY2VwdDogJycsXG4gICAgYmVmb3JlVXBsb2FkOiBULFxuICAgIHNob3dVcGxvYWRMaXN0OiB0cnVlLFxuICAgIGxpc3RUeXBlOiAndGV4dCcsXG4gICAgY2xhc3NOYW1lOiAnJyxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgc3VwcG9ydFNlcnZlclJlbmRlcjogdHJ1ZVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9hbnRkL2xpYi91cGxvYWQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA2MjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gN1xuICoqLyIsIid1c2Ugc3RyaWN0JztcblxucmVxdWlyZSgnLi4vLi4vc3R5bGUvaW5kZXgubGVzcycpO1xuXG5yZXF1aXJlKCcuL2luZGV4Lmxlc3MnKTtcblxucmVxdWlyZSgnLi4vLi4vcHJvZ3Jlc3Mvc3R5bGUnKTtcblxucmVxdWlyZSgnLi4vLi4vdG9vbHRpcC9zdHlsZScpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2FudGQvbGliL3VwbG9hZC9zdHlsZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDYyMlxuICoqIG1vZHVsZSBjaHVua3MgPSA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHVuZGVmaW5lZDtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZGVmaW5lUHJvcGVydHknKTtcblxudmFyIF9kZWZpbmVQcm9wZXJ0eTMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWZpbmVQcm9wZXJ0eTIpO1xuXG52YXIgX2V4dGVuZHMyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2V4dGVuZHMnKTtcblxudmFyIF9leHRlbmRzMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2V4dGVuZHMyKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2snKTtcblxudmFyIF9jbGFzc0NhbGxDaGVjazMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jbGFzc0NhbGxDaGVjazIpO1xuXG52YXIgX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4nKTtcblxudmFyIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yKTtcblxudmFyIF9pbmhlcml0czIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvaW5oZXJpdHMnKTtcblxudmFyIF9pbmhlcml0czMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmhlcml0czIpO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfcmNBbmltYXRlID0gcmVxdWlyZSgncmMtYW5pbWF0ZScpO1xuXG52YXIgX3JjQW5pbWF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yY0FuaW1hdGUpO1xuXG52YXIgX2ljb24gPSByZXF1aXJlKCcuLi9pY29uJyk7XG5cbnZhciBfaWNvbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pY29uKTtcblxudmFyIF90b29sdGlwID0gcmVxdWlyZSgnLi4vdG9vbHRpcCcpO1xuXG52YXIgX3Rvb2x0aXAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdG9vbHRpcCk7XG5cbnZhciBfcHJvZ3Jlc3MgPSByZXF1aXJlKCcuLi9wcm9ncmVzcycpO1xuXG52YXIgX3Byb2dyZXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb2dyZXNzKTtcblxudmFyIF9jbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmlsZVJlYWRlci9yZWFkQXNEYXRhVVJMXG52YXIgcHJldmlld0ZpbGUgPSBmdW5jdGlvbiBwcmV2aWV3RmlsZShmaWxlLCBjYWxsYmFjaykge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhyZWFkZXIucmVzdWx0KTtcbiAgICB9O1xuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xufTtcblxudmFyIFVwbG9hZExpc3QgPSBmdW5jdGlvbiAoX1JlYWN0JENvbXBvbmVudCkge1xuICAgICgwLCBfaW5oZXJpdHMzW1wiZGVmYXVsdFwiXSkoVXBsb2FkTGlzdCwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgICBmdW5jdGlvbiBVcGxvYWRMaXN0KCkge1xuICAgICAgICAoMCwgX2NsYXNzQ2FsbENoZWNrM1tcImRlZmF1bHRcIl0pKHRoaXMsIFVwbG9hZExpc3QpO1xuXG4gICAgICAgIHZhciBfdGhpcyA9ICgwLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjNbXCJkZWZhdWx0XCJdKSh0aGlzLCBfUmVhY3QkQ29tcG9uZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXG4gICAgICAgIF90aGlzLmhhbmRsZUNsb3NlID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgIHZhciBvblJlbW92ZSA9IF90aGlzLnByb3BzLm9uUmVtb3ZlO1xuICAgICAgICAgICAgaWYgKG9uUmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgb25SZW1vdmUoZmlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIF90aGlzLmhhbmRsZVByZXZpZXcgPSBmdW5jdGlvbiAoZmlsZSwgZSkge1xuICAgICAgICAgICAgdmFyIG9uUHJldmlldyA9IF90aGlzLnByb3BzLm9uUHJldmlldztcblxuICAgICAgICAgICAgaWYgKCFvblByZXZpZXcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm4gb25QcmV2aWV3KGZpbGUpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuXG4gICAgVXBsb2FkTGlzdC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5saXN0VHlwZSAhPT0gJ3BpY3R1cmUnICYmIHRoaXMucHJvcHMubGlzdFR5cGUgIT09ICdwaWN0dXJlLWNhcmQnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgKHRoaXMucHJvcHMuaXRlbXMgfHwgW10pLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8ICF3aW5kb3cuRmlsZVJlYWRlciB8fCAhd2luZG93LkZpbGUgfHwgIShmaWxlLm9yaWdpbkZpbGVPYmogaW5zdGFuY2VvZiBGaWxlKSB8fCBmaWxlLnRodW1iVXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKmVzbGludC1kaXNhYmxlICovXG4gICAgICAgICAgICBmaWxlLnRodW1iVXJsID0gJyc7XG4gICAgICAgICAgICAvKmVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICAgIHByZXZpZXdGaWxlKGZpbGUub3JpZ2luRmlsZU9iaiwgZnVuY3Rpb24gKHByZXZpZXdEYXRhVXJsKSB7XG4gICAgICAgICAgICAgICAgLyplc2xpbnQtZGlzYWJsZSAqL1xuICAgICAgICAgICAgICAgIGZpbGUudGh1bWJVcmwgPSBwcmV2aWV3RGF0YVVybDtcbiAgICAgICAgICAgICAgICAvKmVzbGludC1lbmFibGUgKi9cbiAgICAgICAgICAgICAgICBfdGhpczIuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgVXBsb2FkTGlzdC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgICB2YXIgX3RoaXMzID0gdGhpcyxcbiAgICAgICAgICAgIF9jbGFzc05hbWVzMjtcblxuICAgICAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgICAgIHByZWZpeENscyA9IF9wcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgICAgICBfcHJvcHMkaXRlbXMgPSBfcHJvcHMuaXRlbXMsXG4gICAgICAgICAgICBpdGVtcyA9IF9wcm9wcyRpdGVtcyA9PT0gdW5kZWZpbmVkID8gW10gOiBfcHJvcHMkaXRlbXMsXG4gICAgICAgICAgICBsaXN0VHlwZSA9IF9wcm9wcy5saXN0VHlwZSxcbiAgICAgICAgICAgIHNob3dQcmV2aWV3SWNvbiA9IF9wcm9wcy5zaG93UHJldmlld0ljb24sXG4gICAgICAgICAgICBzaG93UmVtb3ZlSWNvbiA9IF9wcm9wcy5zaG93UmVtb3ZlSWNvbjtcblxuICAgICAgICB2YXIgbGlzdCA9IGl0ZW1zLm1hcChmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICAgICAgdmFyIF9jbGFzc05hbWVzO1xuXG4gICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgaWNvbiA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiAncGFwZXItY2xpcCcgfSk7XG4gICAgICAgICAgICBpZiAobGlzdFR5cGUgPT09ICdwaWN0dXJlJyB8fCBsaXN0VHlwZSA9PT0gJ3BpY3R1cmUtY2FyZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5zdGF0dXMgPT09ICd1cGxvYWRpbmcnIHx8ICFmaWxlLnRodW1iVXJsICYmICFmaWxlLnVybCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFR5cGUgPT09ICdwaWN0dXJlLWNhcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tdXBsb2FkaW5nLXRleHQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1VwbG9hZGluZy4uLidcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfaWNvbjJbXCJkZWZhdWx0XCJdLCB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tdGh1bWJuYWlsJywgdHlwZTogJ3BpY3R1cmUnIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbiA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAnYScsXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0tdGh1bWJuYWlsJywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuaGFuZGxlUHJldmlldyhmaWxlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBocmVmOiBmaWxlLnVybCB8fCBmaWxlLnRodW1iVXJsLCB0YXJnZXQ6ICdfYmxhbmsnLCByZWw6ICdub29wZW5lciBub3JlZmVycmVyJyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnaW1nJywgeyBzcmM6IGZpbGUudGh1bWJVcmwgfHwgZmlsZS51cmwsIGFsdDogZmlsZS5uYW1lIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpbGUuc3RhdHVzID09PSAndXBsb2FkaW5nJykge1xuICAgICAgICAgICAgICAgIHByb2dyZXNzID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWxpc3QtaXRlbS1wcm9ncmVzcycgfSxcbiAgICAgICAgICAgICAgICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfcHJvZ3Jlc3MyW1wiZGVmYXVsdFwiXSwgKDAsIF9leHRlbmRzM1tcImRlZmF1bHRcIl0pKHsgdHlwZTogJ2xpbmUnIH0sIF90aGlzMy5wcm9wcy5wcm9ncmVzc0F0dHIsIHsgcGVyY2VudDogZmlsZS5wZXJjZW50IH0pKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5mb1VwbG9hZGluZ0NsYXNzID0gKDAsIF9jbGFzc25hbWVzMltcImRlZmF1bHRcIl0pKChfY2xhc3NOYW1lcyA9IHt9LCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzLCBwcmVmaXhDbHMgKyAnLWxpc3QtaXRlbScsIHRydWUpLCAoMCwgX2RlZmluZVByb3BlcnR5M1tcImRlZmF1bHRcIl0pKF9jbGFzc05hbWVzLCBwcmVmaXhDbHMgKyAnLWxpc3QtaXRlbS0nICsgZmlsZS5zdGF0dXMsIHRydWUpLCBfY2xhc3NOYW1lcykpO1xuICAgICAgICAgICAgdmFyIHByZXZpZXcgPSBmaWxlLnVybCA/IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2EnLFxuICAgICAgICAgICAgICAgIHsgaHJlZjogZmlsZS51cmwsIHRhcmdldDogJ19ibGFuaycsIHJlbDogJ25vb3BlbmVyIG5vcmVmZXJyZXInLCBjbGFzc05hbWU6IHByZWZpeENscyArICctbGlzdC1pdGVtLW5hbWUnLCBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuaGFuZGxlUHJldmlldyhmaWxlLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgfSB9LFxuICAgICAgICAgICAgICAgIGZpbGUubmFtZVxuICAgICAgICAgICAgKSA6IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWxpc3QtaXRlbS1uYW1lJywgb25DbGljazogZnVuY3Rpb24gb25DbGljayhlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLmhhbmRsZVByZXZpZXcoZmlsZSwgZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gfSxcbiAgICAgICAgICAgICAgICBmaWxlLm5hbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBmaWxlLnVybCB8fCBmaWxlLnRodW1iVXJsID8gdW5kZWZpbmVkIDoge1xuICAgICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgcHJldmlld0ljb24gPSBzaG93UHJldmlld0ljb24gPyBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICAgICdhJyxcbiAgICAgICAgICAgICAgICB7IGhyZWY6IGZpbGUudXJsIHx8IGZpbGUudGh1bWJVcmwsIHRhcmdldDogJ19ibGFuaycsIHJlbDogJ25vb3BlbmVyIG5vcmVmZXJyZXInLCBzdHlsZTogc3R5bGUsIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5oYW5kbGVQcmV2aWV3KGZpbGUsIGUpO1xuICAgICAgICAgICAgICAgICAgICB9LCB0aXRsZTogJ1ByZXZpZXcgZmlsZScgfSxcbiAgICAgICAgICAgICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KF9pY29uMltcImRlZmF1bHRcIl0sIHsgdHlwZTogJ2V5ZS1vJyB9KVxuICAgICAgICAgICAgKSA6IG51bGw7XG4gICAgICAgICAgICB2YXIgcmVtb3ZlSWNvbiA9IHNob3dSZW1vdmVJY29uID8gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChfaWNvbjJbXCJkZWZhdWx0XCJdLCB7IHR5cGU6ICdkZWxldGUnLCB0aXRsZTogJ1JlbW92ZSBmaWxlJywgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5oYW5kbGVDbG9zZShmaWxlKTtcbiAgICAgICAgICAgICAgICB9IH0pIDogbnVsbDtcbiAgICAgICAgICAgIHZhciByZW1vdmVJY29uQ3Jvc3MgPSBzaG93UmVtb3ZlSWNvbiA/IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX2ljb24yW1wiZGVmYXVsdFwiXSwgeyB0eXBlOiAnY3Jvc3MnLCB0aXRsZTogJ1JlbW92ZSBmaWxlJywgb25DbGljazogZnVuY3Rpb24gb25DbGljaygpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5oYW5kbGVDbG9zZShmaWxlKTtcbiAgICAgICAgICAgICAgICB9IH0pIDogbnVsbDtcbiAgICAgICAgICAgIHZhciBhY3Rpb25zID0gbGlzdFR5cGUgPT09ICdwaWN0dXJlLWNhcmQnICYmIGZpbGUuc3RhdHVzICE9PSAndXBsb2FkaW5nJyA/IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ3NwYW4nLFxuICAgICAgICAgICAgICAgIHsgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWxpc3QtaXRlbS1hY3Rpb25zJyB9LFxuICAgICAgICAgICAgICAgIHByZXZpZXdJY29uLFxuICAgICAgICAgICAgICAgIHJlbW92ZUljb25cbiAgICAgICAgICAgICkgOiByZW1vdmVJY29uQ3Jvc3M7XG4gICAgICAgICAgICB2YXIgaXRlbSA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgeyBjbGFzc05hbWU6IGluZm9VcGxvYWRpbmdDbGFzcywga2V5OiBmaWxlLnVpZCB9LFxuICAgICAgICAgICAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICB7IGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saXN0LWl0ZW0taW5mbycgfSxcbiAgICAgICAgICAgICAgICAgICAgaWNvbixcbiAgICAgICAgICAgICAgICAgICAgcHJldmlldyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uc1xuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZmlsZS5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IGZpbGUucmVzcG9uc2UgfHwgZmlsZS5lcnJvciAmJiBmaWxlLmVycm9yLnN0YXR1c1RleHQgfHwgJ1VwbG9hZCBFcnJvcic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgIF90b29sdGlwMltcImRlZmF1bHRcIl0sXG4gICAgICAgICAgICAgICAgICAgIHsgdGl0bGU6IG1lc3NhZ2UsIGtleTogZmlsZS51aWQgfSxcbiAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBsaXN0Q2xhc3NOYW1lcyA9ICgwLCBfY2xhc3NuYW1lczJbXCJkZWZhdWx0XCJdKSgoX2NsYXNzTmFtZXMyID0ge30sICgwLCBfZGVmaW5lUHJvcGVydHkzW1wiZGVmYXVsdFwiXSkoX2NsYXNzTmFtZXMyLCBwcmVmaXhDbHMgKyAnLWxpc3QnLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lczIsIHByZWZpeENscyArICctbGlzdC0nICsgbGlzdFR5cGUsIHRydWUpLCBfY2xhc3NOYW1lczIpKTtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBfcmNBbmltYXRlMltcImRlZmF1bHRcIl0sXG4gICAgICAgICAgICB7IHRyYW5zaXRpb25OYW1lOiBwcmVmaXhDbHMgKyAnLW1hcmdpbi10b3AnLCBjb21wb25lbnQ6ICdkaXYnLCBjbGFzc05hbWU6IGxpc3RDbGFzc05hbWVzIH0sXG4gICAgICAgICAgICBsaXN0XG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBVcGxvYWRMaXN0O1xufShfcmVhY3QyW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpO1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IFVwbG9hZExpc3Q7XG5cblVwbG9hZExpc3QuZGVmYXVsdFByb3BzID0ge1xuICAgIGxpc3RUeXBlOiAndGV4dCcsXG4gICAgcHJvZ3Jlc3NBdHRyOiB7XG4gICAgICAgIHN0cm9rZVdpZHRoOiAzLFxuICAgICAgICBzaG93SW5mbzogZmFsc2VcbiAgICB9LFxuICAgIHByZWZpeENsczogJ2FudC11cGxvYWQnLFxuICAgIHNob3dSZW1vdmVJY29uOiB0cnVlLFxuICAgIHNob3dQcmV2aWV3SWNvbjogdHJ1ZVxufTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2FudGQvbGliL3VwbG9hZC91cGxvYWRMaXN0LmpzXG4gKiogbW9kdWxlIGlkID0gNjIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDdcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgVXBsb2FkLCBCdXR0b24sIEljb24sIE1vZGFsLCBtZXNzYWdlIH0gZnJvbSAnYW50ZCdcclxuaW1wb3J0IHN0eWxlcyBmcm9tICcuL1VwbG9hZEZpbGUubGVzcydcclxuaW1wb3J0IENvb2tpZSBmcm9tICcuLi8uLi91dGlscy9jb29raWUnXHJcblxyXG5jbGFzcyBVcGxvYWRGaWxlcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcblxyXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICBmaWxlTGlzdDogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmFycmF5LCBQcm9wVHlwZXMuc3RyaW5nXSkuaXNSZXF1aXJlZCxcclxuICAgIG9uVXBsb2FkOiBQcm9wVHlwZXMuZnVuYy5pc1JlcXVpcmVkLFxyXG4gICAgbXVsdGlwbGU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5ib29sLCBQcm9wVHlwZXMubnVtYmVyXSlcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcylcclxuXHJcbiAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICBwcmV2aWV3VmlzaWJsZTogZmFsc2UsXHJcbiAgICAgIHByZXZpZXdJbWFnZTogJycsXHJcbiAgICAgIGZpbGVMaXN0OiBBcnJheS5pc0FycmF5KHByb3BzLmZpbGVMaXN0KSA/IHByb3BzLmZpbGVMaXN0Lm1hcCgodXJsLCBrZXkpID0+IHtcclxuICAgICAgICBjb25zdCB1cmxBcnIgPSB1cmwuc3BsaXQoJy8nKVxyXG4gICAgICAgIHJldHVybiB7IHVybDogdXJsLCB1aWQ6IGtleSwgbmFtZTogdXJsQXJyW3VybEFyci5sZW5ndGggLSAxXSwgc3RhdHVzOiAnZG9uZScgfVxyXG4gICAgICB9KSA6IFt7IHVpZDogLTEsIHVybDogcHJvcHMuZmlsZUxpc3QsIG5hbWU6IHByb3BzLmZpbGVMaXN0LnNwbGl0KCcvJylbcHJvcHMuZmlsZUxpc3Quc3BsaXQoJy8nKS5sZW5ndGggLSAxXSwgc3RhdHVzOiAnZG9uZScgfV1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuXHJcbiAgICBjb25zdCB7IHByZXZpZXdWaXNpYmxlLCBwcmV2aWV3SW1hZ2UsIGZpbGVMaXN0IH0gPSB0aGlzLnN0YXRlXHJcblxyXG4gICAgY29uc3QgeyBtdWx0aXBsZSA9IDEsIG9uVXBsb2FkIH0gPSB0aGlzLnByb3BzXHJcblxyXG4gICAgY29uc3QgcmVuZGVyRmlsZXMgPSAoZmlsZXMpID0+IHtcclxuICAgICAgY29uc3QgZmlsZUxpc3QgPSBmaWxlcy5tYXAoZmlsZSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZpbGUudXJsIHx8IGZpbGUudGh1bWJVcmxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGlmKG11bHRpcGxlID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbGVMaXN0WzBdXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZpbGVMaXN0XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBsb2FkUHJvcHMgPSB7XHJcbiAgICAgIGFjdGlvbjogJ3Rlc3QuZG8nLC8vbmV3YmFuZC5hcHAuYWRtaW4uQVBJX0hPU1QgKyAnP2FjY2Vzc190b2tlbj0nICsgQ29va2llLmdldCgnYWNjZXNzX3Rva2VuJyksXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgfSxcclxuICAgICAgbGlzdFR5cGU6ICdwaWN0dXJlLWNhcmQnLFxyXG4gICAgICBmaWxlTGlzdDogZmlsZUxpc3QsXHJcbiAgICAgIG11bHRpcGxlOiBtdWx0aXBsZSA9PT0gdHJ1ZSxcclxuICAgICAgb25QcmV2aWV3OiAoZmlsZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgcHJldmlld0ltYWdlOiBmaWxlLnVybCB8fCBmaWxlLnRodW1iVXJsLFxyXG4gICAgICAgICAgcHJldmlld1Zpc2libGU6IHRydWVcclxuICAgICAgICB9KVxyXG4gICAgICB9LFxyXG4gICAgICBiZWZvcmVVcGxvYWQ6IChmaWxlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgfSxcclxuICAgICAgb25DaGFuZ2U6ICh7IGZpbGUsIGZpbGVMaXN0LCBlIH0pID0+IHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZmlsZUxpc3Q6IGZpbGVMaXN0IH0pXHJcbiAgICAgICAgb25VcGxvYWQocmVuZGVyRmlsZXMoZmlsZUxpc3QpKVxyXG4gICAgICB9LFxyXG4gICAgICBvblJlbW92ZTogKGZpbGUpID0+IHtcclxuICAgICAgICBjb25zdCBmaWxlTGlzdCA9IHRoaXMuc3RhdGUuZmlsZUxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS51aWQgIT09IGZpbGUudWlkKVxyXG4gICAgICAgIG9uVXBsb2FkKHJlbmRlckZpbGVzKGZpbGVMaXN0KSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG1vZGFsUHJvcHMgPSB7XHJcbiAgICAgIHZpc2libGU6IHByZXZpZXdWaXNpYmxlLFxyXG4gICAgICBmb290ZXI6IG51bGwsXHJcbiAgICAgIG9uQ2FuY2VsOiAoKSA9PiB0aGlzLnNldFN0YXRlKHsgcHJldmlld1Zpc2libGU6IGZhbHNlIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdXBsb2FkQnV0dG9uID0gKFxyXG4gICAgICA8ZGl2PlxyXG4gICAgICAgIDxJY29uIHR5cGU9XCJwbHVzXCIgLz5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFudC11cGxvYWQtdGV4dFwiPueCueWHu+S4iuS8oDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIClcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNsZWFyZml4XCI+XHJcbiAgICAgICAgPFVwbG9hZCB7Li4udXBsb2FkUHJvcHN9PlxyXG4gICAgICAgICAge211bHRpcGxlID09PSB0cnVlID8gdXBsb2FkQnV0dG9uIDogKGZpbGVMaXN0Lmxlbmd0aCA+PSBtdWx0aXBsZSA/IG51bGwgOiB1cGxvYWRCdXR0b24pfVxyXG4gICAgICAgIDwvVXBsb2FkPlxyXG4gICAgICAgIDxNb2RhbCB7Li4ubW9kYWxQcm9wc30+XHJcbiAgICAgICAgICA8aW1nIGNsYXNzTmFtZT17c3R5bGVzLnByZXZpZXdJbWFnZX0gYWx0PScnIHNyYz17cHJldmlld0ltYWdlfSAvPlxyXG4gICAgICAgIDwvTW9kYWw+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVwbG9hZEZpbGVzXHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2NvbXBvbmVudHMvY29tbW9uL1VwbG9hZEZpbGUuanNcbiAqKi8iLCJpbXBvcnQgUmVhY3QsIHtDb21wb25lbnR9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgVXBsb2FkRmlsZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL2NvbW1vbi9VcGxvYWRGaWxlJ1xyXG5pbXBvcnQge0Zvcm0sIEJ1dHRvbn0gZnJvbSAnYW50ZCdcclxuXHJcbmNvbnN0IEZvcm1JdGVtID0gRm9ybS5JdGVtXHJcblxyXG5jb25zdCBmb3JtSXRlbUxheW91dCA9IHtcclxuICBsYWJlbENvbDoge1xyXG4gICAgc3BhbjogNlxyXG4gIH0sXHJcbiAgd3JhcHBlckNvbDoge1xyXG4gICAgc3BhbjogMTRcclxuICB9XHJcbn1cclxuXHJcbmNsYXNzIERlbW8gZXh0ZW5kcyBDb21wb25lbnQge1xyXG5cclxuICBoYW5kbGVVcGxvYWQoZmlsZXMpIHtcclxuICB9XHJcblxyXG4gIGhhbmRsZU9rKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG5cclxuICAgIC8vIGNvbnN0IGZpbGVzID0gJ2h0dHBzOi8vem9zLmFsaXBheW9iamVjdHMuY29tL3Jtc3BvcnRhbC9qa2pna0VmdnBVUFZ5UmpVSW1uaVZzbFpmV1BuSnV1Wi5wbmcnXHJcbiAgICBjb25zdCBmaWxlcyA9IFsnaHR0cHM6Ly96b3MuYWxpcGF5b2JqZWN0cy5jb20vcm1zcG9ydGFsL2pramdrRWZ2cFVQVnlSalVJbW5pVnNsWmZXUG5KdXVaLnBuZyddXHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEZvcm0gaG9yaXpvbnRhbCBvblN1Ym1pdD17Ojp0aGlzLmhhbmRsZU9rfT5cclxuICAgICAgICA8Rm9ybUl0ZW0gbGFiZWw9J+eUqOaIt+WQje+8micgaGFzRmVlZGJhY2sgey4uLmZvcm1JdGVtTGF5b3V0fT5cclxuICAgICAgICAgIDxVcGxvYWRGaWxlIGZpbGVMaXN0PXtmaWxlc30gb25VcGxvYWQ9ezo6dGhpcy5oYW5kbGVVcGxvYWR9IG11bHRpcGxlPjwvVXBsb2FkRmlsZT5cclxuICAgICAgICA8L0Zvcm1JdGVtPlxyXG4gICAgICAgIDxGb3JtSXRlbSB7Li4uZm9ybUl0ZW1MYXlvdXR9PlxyXG4gICAgICAgICAgICA8QnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgaHRtbFR5cGU9XCJzdWJtaXRcIiBzaXplPVwibGFyZ2VcIj7noa7orqTmj5DkuqQ8L0J1dHRvbj5cclxuICAgICAgICA8L0Zvcm1JdGVtPlxyXG4gICAgICA8L0Zvcm0+XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtLmNyZWF0ZSgpKERlbW8pXHJcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3JvdXRlcy9kZW1vL0RlbW8uanNcbiAqKi8iLCIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxubW9kdWxlLmV4cG9ydHMgPSB7XCJwcmV2aWV3SW1hZ2VcIjpcInByZXZpZXdJbWFnZV9fX1J3c0FwXCJ9O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9jb21tb24vVXBsb2FkRmlsZS5sZXNzXG4gKiogbW9kdWxlIGlkID0gODYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9taXhpbiA9IHJlcXVpcmUoJy4vbWl4aW4nKTtcblxudmFyIF9taXhpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9taXhpbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9IC8qIGVzbGludC1kaXNhYmxlIHJlYWN0L3Byb3AtdHlwZXMgKi9cblxuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdDaXJjbGUnLFxuXG4gIG1peGluczogW19taXhpbjJbXCJkZWZhdWx0XCJdXSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBfcHJvcHMgPSB0aGlzLnByb3BzO1xuICAgIHZhciBwcmVmaXhDbHMgPSBfcHJvcHMucHJlZml4Q2xzO1xuICAgIHZhciBzdHJva2VXaWR0aCA9IF9wcm9wcy5zdHJva2VXaWR0aDtcbiAgICB2YXIgdHJhaWxXaWR0aCA9IF9wcm9wcy50cmFpbFdpZHRoO1xuICAgIHZhciBzdHJva2VDb2xvciA9IF9wcm9wcy5zdHJva2VDb2xvcjtcbiAgICB2YXIgdHJhaWxDb2xvciA9IF9wcm9wcy50cmFpbENvbG9yO1xuICAgIHZhciBzdHJva2VMaW5lY2FwID0gX3Byb3BzLnN0cm9rZUxpbmVjYXA7XG4gICAgdmFyIHBlcmNlbnQgPSBfcHJvcHMucGVyY2VudDtcbiAgICB2YXIgc3R5bGUgPSBfcHJvcHMuc3R5bGU7XG4gICAgdmFyIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWU7XG5cbiAgICB2YXIgcmVzdFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9wcm9wcywgWydwcmVmaXhDbHMnLCAnc3Ryb2tlV2lkdGgnLCAndHJhaWxXaWR0aCcsICdzdHJva2VDb2xvcicsICd0cmFpbENvbG9yJywgJ3N0cm9rZUxpbmVjYXAnLCAncGVyY2VudCcsICdzdHlsZScsICdjbGFzc05hbWUnXSk7XG5cbiAgICB2YXIgcmFkaXVzID0gNTAgLSBzdHJva2VXaWR0aCAvIDI7XG4gICAgdmFyIHBhdGhTdHJpbmcgPSAnTSA1MCw1MCBtIDAsLScgKyByYWRpdXMgKyAnXFxuICAgICBhICcgKyByYWRpdXMgKyAnLCcgKyByYWRpdXMgKyAnIDAgMSAxIDAsJyArIDIgKiByYWRpdXMgKyAnXFxuICAgICBhICcgKyByYWRpdXMgKyAnLCcgKyByYWRpdXMgKyAnIDAgMSAxIDAsLScgKyAyICogcmFkaXVzO1xuICAgIHZhciBsZW4gPSBNYXRoLlBJICogMiAqIHJhZGl1cztcbiAgICB2YXIgcGF0aFN0eWxlID0ge1xuICAgICAgc3Ryb2tlRGFzaGFycmF5OiBsZW4gKyAncHggJyArIGxlbiArICdweCcsXG4gICAgICBzdHJva2VEYXNob2Zmc2V0OiAoMTAwIC0gcGVyY2VudCkgLyAxMDAgKiBsZW4gKyAncHgnLFxuICAgICAgdHJhbnNpdGlvbjogJ3N0cm9rZS1kYXNob2Zmc2V0IDAuM3MgZWFzZSAwcywgc3Ryb2tlIDAuM3MgZWFzZSdcbiAgICB9O1xuXG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICAnc3ZnJyxcbiAgICAgIF9leHRlbmRzKHtcbiAgICAgICAgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWNpcmNsZSAnICsgY2xhc3NOYW1lLFxuICAgICAgICB2aWV3Qm94OiAnMCAwIDEwMCAxMDAnLFxuICAgICAgICBzdHlsZTogc3R5bGVcbiAgICAgIH0sIHJlc3RQcm9wcyksXG4gICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdwYXRoJywge1xuICAgICAgICBjbGFzc05hbWU6IHByZWZpeENscyArICctY2lyY2xlLXRyYWlsJyxcbiAgICAgICAgZDogcGF0aFN0cmluZyxcbiAgICAgICAgc3Ryb2tlOiB0cmFpbENvbG9yLFxuICAgICAgICBzdHJva2VXaWR0aDogdHJhaWxXaWR0aCB8fCBzdHJva2VXaWR0aCxcbiAgICAgICAgZmlsbE9wYWNpdHk6ICcwJ1xuICAgICAgfSksXG4gICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdwYXRoJywge1xuICAgICAgICBjbGFzc05hbWU6IHByZWZpeENscyArICctY2lyY2xlLXBhdGgnLFxuICAgICAgICBkOiBwYXRoU3RyaW5nLFxuICAgICAgICBzdHJva2VMaW5lY2FwOiBzdHJva2VMaW5lY2FwLFxuICAgICAgICBzdHJva2U6IHN0cm9rZUNvbG9yLFxuICAgICAgICBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsXG4gICAgICAgIGZpbGxPcGFjaXR5OiAnMCcsXG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKHBhdGgpIHtcbiAgICAgICAgICBfdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHBhdGhTdHlsZVxuICAgICAgfSlcbiAgICApO1xuICB9XG59KTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JjLXByb2dyZXNzL2xpYi9DaXJjbGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9taXhpbiA9IHJlcXVpcmUoJy4vbWl4aW4nKTtcblxudmFyIF9taXhpbjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9taXhpbik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMob2JqLCBrZXlzKSB7IHZhciB0YXJnZXQgPSB7fTsgZm9yICh2YXIgaSBpbiBvYmopIHsgaWYgKGtleXMuaW5kZXhPZihpKSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBpKSkgY29udGludWU7IHRhcmdldFtpXSA9IG9ialtpXTsgfSByZXR1cm4gdGFyZ2V0OyB9IC8qIGVzbGludC1kaXNhYmxlIHJlYWN0L3Byb3AtdHlwZXMgKi9cblxuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUNsYXNzKHtcbiAgZGlzcGxheU5hbWU6ICdMaW5lJyxcblxuICBtaXhpbnM6IFtfbWl4aW4yW1wiZGVmYXVsdFwiXV0sXG4gIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcztcbiAgICB2YXIgcHJlZml4Q2xzID0gX3Byb3BzLnByZWZpeENscztcbiAgICB2YXIgc3Ryb2tlV2lkdGggPSBfcHJvcHMuc3Ryb2tlV2lkdGg7XG4gICAgdmFyIHRyYWlsV2lkdGggPSBfcHJvcHMudHJhaWxXaWR0aDtcbiAgICB2YXIgc3Ryb2tlQ29sb3IgPSBfcHJvcHMuc3Ryb2tlQ29sb3I7XG4gICAgdmFyIHRyYWlsQ29sb3IgPSBfcHJvcHMudHJhaWxDb2xvcjtcbiAgICB2YXIgc3Ryb2tlTGluZWNhcCA9IF9wcm9wcy5zdHJva2VMaW5lY2FwO1xuICAgIHZhciBwZXJjZW50ID0gX3Byb3BzLnBlcmNlbnQ7XG4gICAgdmFyIHN0eWxlID0gX3Byb3BzLnN0eWxlO1xuICAgIHZhciBjbGFzc05hbWUgPSBfcHJvcHMuY2xhc3NOYW1lO1xuXG4gICAgdmFyIHJlc3RQcm9wcyA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcHJvcHMsIFsncHJlZml4Q2xzJywgJ3N0cm9rZVdpZHRoJywgJ3RyYWlsV2lkdGgnLCAnc3Ryb2tlQ29sb3InLCAndHJhaWxDb2xvcicsICdzdHJva2VMaW5lY2FwJywgJ3BlcmNlbnQnLCAnc3R5bGUnLCAnY2xhc3NOYW1lJ10pO1xuXG4gICAgdmFyIHBhdGhTdHlsZSA9IHtcbiAgICAgIHN0cm9rZURhc2hhcnJheTogJzEwMHB4LCAxMDBweCcsXG4gICAgICBzdHJva2VEYXNob2Zmc2V0OiAxMDAgLSBwZXJjZW50ICsgJ3B4JyxcbiAgICAgIHRyYW5zaXRpb246ICdzdHJva2UtZGFzaG9mZnNldCAwLjNzIGVhc2UgMHMsIHN0cm9rZSAwLjNzIGxpbmVhcidcbiAgICB9O1xuXG4gICAgdmFyIGNlbnRlciA9IHN0cm9rZVdpZHRoIC8gMjtcbiAgICB2YXIgcmlnaHQgPSAxMDAgLSBzdHJva2VXaWR0aCAvIDI7XG4gICAgdmFyIHBhdGhTdHJpbmcgPSAnTSAnICsgY2VudGVyICsgJywnICsgY2VudGVyICsgJyBMICcgKyByaWdodCArICcsJyArIGNlbnRlcjtcbiAgICB2YXIgdmlld0JveFN0cmluZyA9ICcwIDAgMTAwICcgKyBzdHJva2VXaWR0aDtcblxuICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgJ3N2ZycsXG4gICAgICBfZXh0ZW5kcyh7XG4gICAgICAgIGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saW5lICcgKyBjbGFzc05hbWUsXG4gICAgICAgIHZpZXdCb3g6IHZpZXdCb3hTdHJpbmcsXG4gICAgICAgIHByZXNlcnZlQXNwZWN0UmF0aW86ICdub25lJyxcbiAgICAgICAgc3R5bGU6IHN0eWxlXG4gICAgICB9LCByZXN0UHJvcHMpLFxuICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgncGF0aCcsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBwcmVmaXhDbHMgKyAnLWxpbmUtdHJhaWwnLFxuICAgICAgICBkOiBwYXRoU3RyaW5nLFxuICAgICAgICBzdHJva2VMaW5lY2FwOiBzdHJva2VMaW5lY2FwLFxuICAgICAgICBzdHJva2U6IHRyYWlsQ29sb3IsXG4gICAgICAgIHN0cm9rZVdpZHRoOiB0cmFpbFdpZHRoIHx8IHN0cm9rZVdpZHRoLFxuICAgICAgICBmaWxsT3BhY2l0eTogJzAnXG4gICAgICB9KSxcbiAgICAgIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoJ3BhdGgnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogcHJlZml4Q2xzICsgJy1saW5lLXBhdGgnLFxuICAgICAgICBkOiBwYXRoU3RyaW5nLFxuICAgICAgICBzdHJva2VMaW5lY2FwOiBzdHJva2VMaW5lY2FwLFxuICAgICAgICBzdHJva2U6IHN0cm9rZUNvbG9yLFxuICAgICAgICBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsXG4gICAgICAgIGZpbGxPcGFjaXR5OiAnMCcsXG4gICAgICAgIHJlZjogZnVuY3Rpb24gcmVmKHBhdGgpIHtcbiAgICAgICAgICBfdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgfSxcbiAgICAgICAgc3R5bGU6IHBhdGhTdHlsZVxuICAgICAgfSlcbiAgICApO1xuICB9XG59KTtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JjLXByb2dyZXNzL2xpYi9MaW5lLmpzXG4gKiogbW9kdWxlIGlkID0gMTA0OVxuICoqIG1vZHVsZSBjaHVua3MgPSA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX0xpbmUgPSByZXF1aXJlKCcuL0xpbmUnKTtcblxudmFyIF9MaW5lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0xpbmUpO1xuXG52YXIgX0NpcmNsZSA9IHJlcXVpcmUoJy4vQ2lyY2xlJyk7XG5cbnZhciBfQ2lyY2xlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0NpcmNsZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHtcbiAgTGluZTogX0xpbmUyW1wiZGVmYXVsdFwiXSxcbiAgQ2lyY2xlOiBfQ2lyY2xlMltcImRlZmF1bHRcIl1cbn07XG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yYy1wcm9ncmVzcy9saWIvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxMDUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9kZWZpbmVQcm9wZXJ0eScpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5Mik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9jbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbnZhciBfcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xuXG52YXIgX3JlcXVlc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVxdWVzdCk7XG5cbnZhciBfdWlkID0gcmVxdWlyZSgnLi91aWQnKTtcblxudmFyIF91aWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdWlkKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbi8qIGVzbGludCByZWFjdC9uby1pcy1tb3VudGVkOjAqL1xuXG52YXIgQWpheFVwbG9hZGVyID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0FqYXhVcGxvYWRlcicsXG5cbiAgcHJvcFR5cGVzOiB7XG4gICAgY29tcG9uZW50OiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBzdHlsZTogX3JlYWN0LlByb3BUeXBlcy5vYmplY3QsXG4gICAgcHJlZml4Q2xzOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBjbGFzc05hbWU6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIG11bHRpcGxlOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgZGlzYWJsZWQ6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBhY2NlcHQ6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIGNoaWxkcmVuOiBfcmVhY3QuUHJvcFR5cGVzLmFueSxcbiAgICBvblN0YXJ0OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgZGF0YTogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMub2JqZWN0LCBfcmVhY3QuUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICBoZWFkZXJzOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcbiAgICBiZWZvcmVVcGxvYWQ6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBjdXN0b21SZXF1ZXN0OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgd2l0aENyZWRlbnRpYWxzOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2xcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICB0aGlzLnJlcXMgPSB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgdWlkOiAoMCwgX3VpZDJbXCJkZWZhdWx0XCJdKSgpXG4gICAgfTtcbiAgfSxcbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuYWJvcnQoKTtcbiAgfSxcbiAgb25DaGFuZ2U6IGZ1bmN0aW9uIG9uQ2hhbmdlKGUpIHtcbiAgICB2YXIgZmlsZXMgPSBlLnRhcmdldC5maWxlcztcbiAgICB0aGlzLnVwbG9hZEZpbGVzKGZpbGVzKTtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH0sXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgdmFyIGVsID0gdGhpcy5yZWZzLmZpbGU7XG4gICAgaWYgKCFlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbC5jbGljaygpO1xuICB9LFxuICBvbktleURvd246IGZ1bmN0aW9uIG9uS2V5RG93bihlKSB7XG4gICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICB0aGlzLm9uQ2xpY2soKTtcbiAgICB9XG4gIH0sXG4gIG9uRmlsZURyb3A6IGZ1bmN0aW9uIG9uRmlsZURyb3AoZSkge1xuICAgIGlmIChlLnR5cGUgPT09ICdkcmFnb3ZlcicpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZmlsZXMgPSBlLmRhdGFUcmFuc2Zlci5maWxlcztcbiAgICB0aGlzLnVwbG9hZEZpbGVzKGZpbGVzKTtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfSxcbiAgdXBsb2FkRmlsZXM6IGZ1bmN0aW9uIHVwbG9hZEZpbGVzKGZpbGVzKSB7XG4gICAgdmFyIHBvc3RGaWxlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZpbGVzKTtcbiAgICB2YXIgbGVuID0gcG9zdEZpbGVzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgZmlsZSA9IHBvc3RGaWxlc1tpXTtcbiAgICAgIGZpbGUudWlkID0gKDAsIF91aWQyW1wiZGVmYXVsdFwiXSkoKTtcbiAgICAgIHRoaXMudXBsb2FkKGZpbGUsIHBvc3RGaWxlcyk7XG4gICAgfVxuICB9LFxuICB1cGxvYWQ6IGZ1bmN0aW9uIHVwbG9hZChmaWxlLCBmaWxlTGlzdCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKCFwcm9wcy5iZWZvcmVVcGxvYWQpIHtcbiAgICAgIC8vIGFsd2F5cyBhc3luYyBpbiBjYXNlIHVzZSByZWFjdCBzdGF0ZSB0byBrZWVwIGZpbGVMaXN0XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5wb3N0KGZpbGUpO1xuICAgICAgfSwgMCk7XG4gICAgfVxuXG4gICAgdmFyIGJlZm9yZSA9IHByb3BzLmJlZm9yZVVwbG9hZChmaWxlLCBmaWxlTGlzdCk7XG4gICAgaWYgKGJlZm9yZSAmJiBiZWZvcmUudGhlbikge1xuICAgICAgYmVmb3JlLnRoZW4oZnVuY3Rpb24gKHByb2Nlc3NlZEZpbGUpIHtcbiAgICAgICAgdmFyIHByb2Nlc3NlZEZpbGVUeXBlID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3NlZEZpbGUpO1xuICAgICAgICBpZiAocHJvY2Vzc2VkRmlsZVR5cGUgPT09ICdbb2JqZWN0IEZpbGVdJyB8fCBwcm9jZXNzZWRGaWxlVHlwZSA9PT0gJ1tvYmplY3QgQmxvYl0nKSB7XG4gICAgICAgICAgX3RoaXMucG9zdChwcm9jZXNzZWRGaWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfdGhpcy5wb3N0KGZpbGUpO1xuICAgICAgICB9XG4gICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnNvbGUgJiYgY29uc29sZS5sb2coZSk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGJlZm9yZSAhPT0gZmFsc2UpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXMucG9zdChmaWxlKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfSxcbiAgcG9zdDogZnVuY3Rpb24gcG9zdChmaWxlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMuaXNNb3VudGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcbiAgICB2YXIgZGF0YSA9IHByb3BzLmRhdGE7XG4gICAgdmFyIG9uU3RhcnQgPSBwcm9wcy5vblN0YXJ0O1xuXG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBkYXRhID0gZGF0YShmaWxlKTtcbiAgICB9XG4gICAgdmFyIHVpZCA9IGZpbGUudWlkO1xuXG4gICAgdmFyIHJlcXVlc3QgPSBwcm9wcy5jdXN0b21SZXF1ZXN0IHx8IF9yZXF1ZXN0MltcImRlZmF1bHRcIl07XG4gICAgdGhpcy5yZXFzW3VpZF0gPSByZXF1ZXN0KHtcbiAgICAgIGFjdGlvbjogcHJvcHMuYWN0aW9uLFxuICAgICAgZmlsZW5hbWU6IHByb3BzLm5hbWUsXG4gICAgICBmaWxlOiBmaWxlLFxuICAgICAgZGF0YTogZGF0YSxcbiAgICAgIGhlYWRlcnM6IHByb3BzLmhlYWRlcnMsXG4gICAgICB3aXRoQ3JlZGVudGlhbHM6IHByb3BzLndpdGhDcmVkZW50aWFscyxcbiAgICAgIG9uUHJvZ3Jlc3M6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3MoZSkge1xuICAgICAgICBwcm9wcy5vblByb2dyZXNzKGUsIGZpbGUpO1xuICAgICAgfSxcbiAgICAgIG9uU3VjY2VzczogZnVuY3Rpb24gb25TdWNjZXNzKHJldCkge1xuICAgICAgICBkZWxldGUgX3RoaXMyLnJlcXNbdWlkXTtcbiAgICAgICAgcHJvcHMub25TdWNjZXNzKHJldCwgZmlsZSk7XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcihlcnIsIHJldCkge1xuICAgICAgICBkZWxldGUgX3RoaXMyLnJlcXNbdWlkXTtcbiAgICAgICAgcHJvcHMub25FcnJvcihlcnIsIHJldCwgZmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgb25TdGFydChmaWxlKTtcbiAgfSxcbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdWlkOiAoMCwgX3VpZDJbXCJkZWZhdWx0XCJdKSgpXG4gICAgfSk7XG4gIH0sXG4gIGFib3J0OiBmdW5jdGlvbiBhYm9ydChmaWxlKSB7XG4gICAgdmFyIHJlcXMgPSB0aGlzLnJlcXM7XG5cbiAgICBpZiAoZmlsZSkge1xuICAgICAgdmFyIHVpZCA9IGZpbGU7XG4gICAgICBpZiAoZmlsZSAmJiBmaWxlLnVpZCkge1xuICAgICAgICB1aWQgPSBmaWxlLnVpZDtcbiAgICAgIH1cbiAgICAgIGlmIChyZXFzW3VpZF0pIHtcbiAgICAgICAgcmVxc1t1aWRdLmFib3J0KCk7XG4gICAgICAgIGRlbGV0ZSByZXFzW3VpZF07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5rZXlzKHJlcXMpLmZvckVhY2goZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICBpZiAocmVxc1t1aWRdKSByZXFzW3VpZF0uYWJvcnQoKTtcbiAgICAgICAgZGVsZXRlIHJlcXNbdWlkXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgdmFyIF9jbGFzc05hbWVzO1xuXG4gICAgdmFyIF9wcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIFRhZyA9IF9wcm9wcy5jb21wb25lbnQsXG4gICAgICAgIHByZWZpeENscyA9IF9wcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgIGRpc2FibGVkID0gX3Byb3BzLmRpc2FibGVkLFxuICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZSxcbiAgICAgICAgbXVsdGlwbGUgPSBfcHJvcHMubXVsdGlwbGUsXG4gICAgICAgIGFjY2VwdCA9IF9wcm9wcy5hY2NlcHQsXG4gICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuO1xuXG4gICAgdmFyIGNscyA9ICgwLCBfY2xhc3NuYW1lczJbXCJkZWZhdWx0XCJdKSgoX2NsYXNzTmFtZXMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kaXNhYmxlZCcsIGRpc2FibGVkKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgY2xhc3NOYW1lLCBjbGFzc05hbWUpLCBfY2xhc3NOYW1lcykpO1xuICAgIHZhciBldmVudHMgPSBkaXNhYmxlZCA/IHt9IDoge1xuICAgICAgb25DbGljazogdGhpcy5vbkNsaWNrLFxuICAgICAgb25LZXlEb3duOiB0aGlzLm9uS2V5RG93bixcbiAgICAgIG9uRHJvcDogdGhpcy5vbkZpbGVEcm9wLFxuICAgICAgb25EcmFnT3ZlcjogdGhpcy5vbkZpbGVEcm9wLFxuICAgICAgdGFiSW5kZXg6ICcwJ1xuICAgIH07XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXG4gICAgICBUYWcsXG4gICAgICAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIGV2ZW50cywge1xuICAgICAgICBjbGFzc05hbWU6IGNscyxcbiAgICAgICAgcm9sZTogJ2J1dHRvbicsXG4gICAgICAgIHN0eWxlOiBzdHlsZVxuICAgICAgfSksXG4gICAgICBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KCdpbnB1dCcsIHtcbiAgICAgICAgdHlwZTogJ2ZpbGUnLFxuICAgICAgICByZWY6ICdmaWxlJyxcbiAgICAgICAga2V5OiB0aGlzLnN0YXRlLnVpZCxcbiAgICAgICAgc3R5bGU6IHsgZGlzcGxheTogJ25vbmUnIH0sXG4gICAgICAgIGFjY2VwdDogYWNjZXB0LFxuICAgICAgICBtdWx0aXBsZTogbXVsdGlwbGUsXG4gICAgICAgIG9uQ2hhbmdlOiB0aGlzLm9uQ2hhbmdlXG4gICAgICB9KSxcbiAgICAgIGNoaWxkcmVuXG4gICAgKTtcbiAgfVxufSk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQWpheFVwbG9hZGVyO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmMtdXBsb2FkL2xpYi9BamF4VXBsb2FkZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkyID0gcmVxdWlyZSgnYmFiZWwtcnVudGltZS9oZWxwZXJzL2RlZmluZVByb3BlcnR5Jyk7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGVmaW5lUHJvcGVydHkyKTtcblxudmFyIF9leHRlbmRzMiA9IHJlcXVpcmUoJ2JhYmVsLXJ1bnRpbWUvaGVscGVycy9leHRlbmRzJyk7XG5cbnZhciBfZXh0ZW5kczMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9leHRlbmRzMik7XG5cbnZhciBfcmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG52YXIgX3JlYWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0KTtcblxudmFyIF9yZWFjdERvbSA9IHJlcXVpcmUoJ3JlYWN0LWRvbScpO1xuXG52YXIgX3JlYWN0RG9tMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlYWN0RG9tKTtcblxudmFyIF9jbGFzc25hbWVzID0gcmVxdWlyZSgnY2xhc3NuYW1lcycpO1xuXG52YXIgX2NsYXNzbmFtZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2xhc3NuYW1lcyk7XG5cbnZhciBfdWlkID0gcmVxdWlyZSgnLi91aWQnKTtcblxudmFyIF91aWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdWlkKTtcblxudmFyIF93YXJuaW5nID0gcmVxdWlyZSgnd2FybmluZycpO1xuXG52YXIgX3dhcm5pbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2FybmluZyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG52YXIgSUZSQU1FX1NUWUxFID0ge1xuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgdG9wOiAwLFxuICBvcGFjaXR5OiAwLFxuICBmaWx0ZXI6ICdhbHBoYShvcGFjaXR5PTApJyxcbiAgbGVmdDogMCxcbiAgekluZGV4OiA5OTk5XG59O1xuXG4vLyBkaWZlcmVudCBmcm9tIEFqYXhVcGxvYWQsIGNhbiBvbmx5IHVwbG9hZCBvbiBhdCBvbmUgdGltZSwgc2VyaWFsIHNlcmlvdXNseVxudmFyIElmcmFtZVVwbG9hZGVyID0gX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlQ2xhc3Moe1xuICBkaXNwbGF5TmFtZTogJ0lmcmFtZVVwbG9hZGVyJyxcblxuICBwcm9wVHlwZXM6IHtcbiAgICBjb21wb25lbnQ6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIHN0eWxlOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcbiAgICBkaXNhYmxlZDogX3JlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIHByZWZpeENsczogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgY2xhc3NOYW1lOiBfcmVhY3QuUHJvcFR5cGVzLnN0cmluZyxcbiAgICBhY2NlcHQ6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIG9uU3RhcnQ6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBtdWx0aXBsZTogX3JlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIGNoaWxkcmVuOiBfcmVhY3QuUHJvcFR5cGVzLmFueSxcbiAgICBkYXRhOiBfcmVhY3QuUHJvcFR5cGVzLm9uZU9mVHlwZShbX3JlYWN0LlByb3BUeXBlcy5vYmplY3QsIF9yZWFjdC5Qcm9wVHlwZXMuZnVuY10pLFxuICAgIGFjdGlvbjogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgbmFtZTogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmdcbiAgfSxcblxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICB0aGlzLmZpbGUgPSB7fTtcbiAgICByZXR1cm4ge1xuICAgICAgdXBsb2FkaW5nOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZUlmcmFtZVdIKCk7XG4gICAgdGhpcy5pbml0SWZyYW1lKCk7XG4gIH0sXG4gIGNvbXBvbmVudERpZFVwZGF0ZTogZnVuY3Rpb24gY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMudXBkYXRlSWZyYW1lV0goKTtcbiAgfSxcbiAgb25Mb2FkOiBmdW5jdGlvbiBvbkxvYWQoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLnVwbG9hZGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcHJvcHMgPSB0aGlzLnByb3BzLFxuICAgICAgICBmaWxlID0gdGhpcy5maWxlO1xuXG4gICAgdmFyIHJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRyeSB7XG4gICAgICB2YXIgZG9jID0gdGhpcy5nZXRJZnJhbWVEb2N1bWVudCgpO1xuICAgICAgdmFyIHNjcmlwdCA9IGRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gICAgICBpZiAoc2NyaXB0ICYmIHNjcmlwdC5wYXJlbnROb2RlID09PSBkb2MuYm9keSkge1xuICAgICAgICBkb2MuYm9keS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgfVxuICAgICAgcmVzcG9uc2UgPSBkb2MuYm9keS5pbm5lckhUTUw7XG4gICAgICBwcm9wcy5vblN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgKDAsIF93YXJuaW5nMltcImRlZmF1bHRcIl0pKGZhbHNlLCAnY3Jvc3MgZG9tYWluIGVycm9yIGZvciBVcGxvYWQuIE1heWJlIHNlcnZlciBzaG91bGQgcmV0dXJuIGRvY3VtZW50LmRvbWFpbiBzY3JpcHQuIHNlZSBOb3RlIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC91cGxvYWQnKTtcbiAgICAgIHJlc3BvbnNlID0gJ2Nyb3NzLWRvbWFpbic7XG4gICAgICBwcm9wcy5vbkVycm9yKGVyciwgbnVsbCwgZmlsZSk7XG4gICAgfVxuICAgIHRoaXMuZW5kVXBsb2FkKCk7XG4gIH0sXG4gIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0Rm9ybUlucHV0Tm9kZSgpO1xuICAgIC8vIGllOC85IGRvbid0IHN1cHBvcnQgRmlsZUxpc3QgT2JqZWN0XG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjgzMDA1OC9pZTgtaW5wdXQtdHlwZS1maWxlLWdldC1maWxlc1xuICAgIHZhciBmaWxlID0gdGhpcy5maWxlID0ge1xuICAgICAgdWlkOiAoMCwgX3VpZDJbXCJkZWZhdWx0XCJdKSgpLFxuICAgICAgbmFtZTogdGFyZ2V0LnZhbHVlXG4gICAgfTtcbiAgICB0aGlzLnN0YXJ0VXBsb2FkKCk7XG4gICAgdmFyIHByb3BzID0gdGhpcy5wcm9wcztcblxuICAgIGlmICghcHJvcHMuYmVmb3JlVXBsb2FkKSB7XG4gICAgICByZXR1cm4gdGhpcy5wb3N0KGZpbGUpO1xuICAgIH1cbiAgICB2YXIgYmVmb3JlID0gcHJvcHMuYmVmb3JlVXBsb2FkKGZpbGUpO1xuICAgIGlmIChiZWZvcmUgJiYgYmVmb3JlLnRoZW4pIHtcbiAgICAgIGJlZm9yZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMucG9zdChmaWxlKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMuZW5kVXBsb2FkKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGJlZm9yZSAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucG9zdChmaWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbmRVcGxvYWQoKTtcbiAgICB9XG4gIH0sXG4gIGdldElmcmFtZU5vZGU6IGZ1bmN0aW9uIGdldElmcmFtZU5vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmcy5pZnJhbWU7XG4gIH0sXG4gIGdldElmcmFtZURvY3VtZW50OiBmdW5jdGlvbiBnZXRJZnJhbWVEb2N1bWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJZnJhbWVOb2RlKCkuY29udGVudERvY3VtZW50O1xuICB9LFxuICBnZXRGb3JtTm9kZTogZnVuY3Rpb24gZ2V0Rm9ybU5vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SWZyYW1lRG9jdW1lbnQoKS5nZXRFbGVtZW50QnlJZCgnZm9ybScpO1xuICB9LFxuICBnZXRGb3JtSW5wdXROb2RlOiBmdW5jdGlvbiBnZXRGb3JtSW5wdXROb2RlKCkge1xuICAgIHJldHVybiB0aGlzLmdldElmcmFtZURvY3VtZW50KCkuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0Jyk7XG4gIH0sXG4gIGdldEZvcm1EYXRhTm9kZTogZnVuY3Rpb24gZ2V0Rm9ybURhdGFOb2RlKCkge1xuICAgIHJldHVybiB0aGlzLmdldElmcmFtZURvY3VtZW50KCkuZ2V0RWxlbWVudEJ5SWQoJ2RhdGEnKTtcbiAgfSxcbiAgZ2V0RmlsZUZvck11bHRpcGxlOiBmdW5jdGlvbiBnZXRGaWxlRm9yTXVsdGlwbGUoZmlsZSkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLm11bHRpcGxlID8gW2ZpbGVdIDogZmlsZTtcbiAgfSxcbiAgZ2V0SWZyYW1lSFRNTDogZnVuY3Rpb24gZ2V0SWZyYW1lSFRNTChkb21haW4pIHtcbiAgICB2YXIgZG9tYWluU2NyaXB0ID0gJyc7XG4gICAgdmFyIGRvbWFpbklucHV0ID0gJyc7XG4gICAgaWYgKGRvbWFpbikge1xuICAgICAgdmFyIHNjcmlwdCA9ICdzY3JpcHQnO1xuICAgICAgZG9tYWluU2NyaXB0ID0gJzwnICsgc2NyaXB0ICsgJz5kb2N1bWVudC5kb21haW49XCInICsgZG9tYWluICsgJ1wiOzwvJyArIHNjcmlwdCArICc+JztcbiAgICAgIGRvbWFpbklucHV0ID0gJzxpbnB1dCBuYW1lPVwiX2RvY3VtZW50RG9tYWluXCIgdmFsdWU9XCInICsgZG9tYWluICsgJ1wiIC8+JztcbiAgICB9XG4gICAgcmV0dXJuICdcXG4gICAgPCFET0NUWVBFIGh0bWw+XFxuICAgIDxodG1sPlxcbiAgICA8aGVhZD5cXG4gICAgPG1ldGEgaHR0cC1lcXVpdj1cIlgtVUEtQ29tcGF0aWJsZVwiIGNvbnRlbnQ9XCJJRT1lZGdlXCIgLz5cXG4gICAgPHN0eWxlPlxcbiAgICBib2R5LGh0bWwge3BhZGRpbmc6MDttYXJnaW46MDtib3JkZXI6MDtvdmVyZmxvdzpoaWRkZW47fVxcbiAgICA8L3N0eWxlPlxcbiAgICAnICsgZG9tYWluU2NyaXB0ICsgJ1xcbiAgICA8L2hlYWQ+XFxuICAgIDxib2R5PlxcbiAgICA8Zm9ybSBtZXRob2Q9XCJwb3N0XCJcXG4gICAgZW5jVHlwZT1cIm11bHRpcGFydC9mb3JtLWRhdGFcIlxcbiAgICBhY3Rpb249XCInICsgdGhpcy5wcm9wcy5hY3Rpb24gKyAnXCIgaWQ9XCJmb3JtXCJcXG4gICAgc3R5bGU9XCJkaXNwbGF5OmJsb2NrO2hlaWdodDo5OTk5cHg7cG9zaXRpb246cmVsYXRpdmU7b3ZlcmZsb3c6aGlkZGVuO1wiPlxcbiAgICA8aW5wdXQgaWQ9XCJpbnB1dFwiIHR5cGU9XCJmaWxlXCJcXG4gICAgIG5hbWU9XCInICsgdGhpcy5wcm9wcy5uYW1lICsgJ1wiXFxuICAgICBzdHlsZT1cInBvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7aGVpZ2h0Ojk5OTlweDtmb250LXNpemU6OTk5OXB4O2N1cnNvcjpwb2ludGVyO1wiLz5cXG4gICAgJyArIGRvbWFpbklucHV0ICsgJ1xcbiAgICA8c3BhbiBpZD1cImRhdGFcIj48L3NwYW4+XFxuICAgIDwvZm9ybT5cXG4gICAgPC9ib2R5PlxcbiAgICA8L2h0bWw+XFxuICAgICc7XG4gIH0sXG4gIGluaXRJZnJhbWVTcmM6IGZ1bmN0aW9uIGluaXRJZnJhbWVTcmMoKSB7XG4gICAgaWYgKHRoaXMuZG9tYWluKSB7XG4gICAgICB0aGlzLmdldElmcmFtZU5vZGUoKS5zcmMgPSAnamF2YXNjcmlwdDp2b2lkKChmdW5jdGlvbigpe1xcbiAgICAgICAgdmFyIGQgPSBkb2N1bWVudDtcXG4gICAgICAgIGQub3BlbigpO1xcbiAgICAgICAgZC5kb21haW49XFwnJyArIHRoaXMuZG9tYWluICsgJ1xcJztcXG4gICAgICAgIGQud3JpdGUoXFwnXFwnKTtcXG4gICAgICAgIGQuY2xvc2UoKTtcXG4gICAgICB9KSgpKSc7XG4gICAgfVxuICB9LFxuICBpbml0SWZyYW1lOiBmdW5jdGlvbiBpbml0SWZyYW1lKCkge1xuICAgIHZhciBpZnJhbWVOb2RlID0gdGhpcy5nZXRJZnJhbWVOb2RlKCk7XG4gICAgdmFyIHdpbiA9IGlmcmFtZU5vZGUuY29udGVudFdpbmRvdztcbiAgICB2YXIgZG9jID0gdm9pZCAwO1xuICAgIHRoaXMuZG9tYWluID0gdGhpcy5kb21haW4gfHwgJyc7XG4gICAgdGhpcy5pbml0SWZyYW1lU3JjKCk7XG4gICAgdHJ5IHtcbiAgICAgIGRvYyA9IHdpbi5kb2N1bWVudDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmRvbWFpbiA9IGRvY3VtZW50LmRvbWFpbjtcbiAgICAgIHRoaXMuaW5pdElmcmFtZVNyYygpO1xuICAgICAgd2luID0gaWZyYW1lTm9kZS5jb250ZW50V2luZG93O1xuICAgICAgZG9jID0gd2luLmRvY3VtZW50O1xuICAgIH1cbiAgICBkb2Mub3BlbigndGV4dC9odG1sJywgJ3JlcGxhY2UnKTtcbiAgICBkb2Mud3JpdGUodGhpcy5nZXRJZnJhbWVIVE1MKHRoaXMuZG9tYWluKSk7XG4gICAgZG9jLmNsb3NlKCk7XG4gICAgdGhpcy5nZXRGb3JtSW5wdXROb2RlKCkub25jaGFuZ2UgPSB0aGlzLm9uQ2hhbmdlO1xuICB9LFxuICBlbmRVcGxvYWQ6IGZ1bmN0aW9uIGVuZFVwbG9hZCgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS51cGxvYWRpbmcpIHtcbiAgICAgIHRoaXMuZmlsZSA9IHt9O1xuICAgICAgLy8gaGFjayBhdm9pZCBiYXRjaFxuICAgICAgdGhpcy5zdGF0ZS51cGxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB1cGxvYWRpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHRoaXMuaW5pdElmcmFtZSgpO1xuICAgIH1cbiAgfSxcbiAgc3RhcnRVcGxvYWQ6IGZ1bmN0aW9uIHN0YXJ0VXBsb2FkKCkge1xuICAgIGlmICghdGhpcy5zdGF0ZS51cGxvYWRpbmcpIHtcbiAgICAgIHRoaXMuc3RhdGUudXBsb2FkaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICB1cGxvYWRpbmc6IHRydWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgdXBkYXRlSWZyYW1lV0g6IGZ1bmN0aW9uIHVwZGF0ZUlmcmFtZVdIKCkge1xuICAgIHZhciByb290Tm9kZSA9IF9yZWFjdERvbTJbXCJkZWZhdWx0XCJdLmZpbmRET01Ob2RlKHRoaXMpO1xuICAgIHZhciBpZnJhbWVOb2RlID0gdGhpcy5nZXRJZnJhbWVOb2RlKCk7XG4gICAgaWZyYW1lTm9kZS5zdHlsZS5oZWlnaHQgPSByb290Tm9kZS5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgIGlmcmFtZU5vZGUuc3R5bGUud2lkdGggPSByb290Tm9kZS5vZmZzZXRXaWR0aCArICdweCc7XG4gIH0sXG4gIGFib3J0OiBmdW5jdGlvbiBhYm9ydChmaWxlKSB7XG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIHZhciB1aWQgPSBmaWxlO1xuICAgICAgaWYgKGZpbGUgJiYgZmlsZS51aWQpIHtcbiAgICAgICAgdWlkID0gZmlsZS51aWQ7XG4gICAgICB9XG4gICAgICBpZiAodWlkID09PSB0aGlzLmZpbGUudWlkKSB7XG4gICAgICAgIHRoaXMuZW5kVXBsb2FkKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW5kVXBsb2FkKCk7XG4gICAgfVxuICB9LFxuICBwb3N0OiBmdW5jdGlvbiBwb3N0KGZpbGUpIHtcbiAgICB2YXIgZm9ybU5vZGUgPSB0aGlzLmdldEZvcm1Ob2RlKCk7XG4gICAgdmFyIGRhdGFTcGFuID0gdGhpcy5nZXRGb3JtRGF0YU5vZGUoKTtcbiAgICB2YXIgZGF0YSA9IHRoaXMucHJvcHMuZGF0YTtcbiAgICB2YXIgb25TdGFydCA9IHRoaXMucHJvcHMub25TdGFydDtcblxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZGF0YSA9IGRhdGEoZmlsZSk7XG4gICAgfVxuICAgIHZhciBpbnB1dHMgPSBbXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBpbnB1dHMucHVzaCgnPGlucHV0IG5hbWU9XCInICsga2V5ICsgJ1wiIHZhbHVlPVwiJyArIGRhdGFba2V5XSArICdcIi8+Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIGRhdGFTcGFuLmlubmVySFRNTCA9IGlucHV0cy5qb2luKCcnKTtcbiAgICBmb3JtTm9kZS5zdWJtaXQoKTtcbiAgICBkYXRhU3Bhbi5pbm5lckhUTUwgPSAnJztcbiAgICBvblN0YXJ0KGZpbGUpO1xuICB9LFxuICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgX2NsYXNzTmFtZXM7XG5cbiAgICB2YXIgX3Byb3BzID0gdGhpcy5wcm9wcyxcbiAgICAgICAgVGFnID0gX3Byb3BzLmNvbXBvbmVudCxcbiAgICAgICAgZGlzYWJsZWQgPSBfcHJvcHMuZGlzYWJsZWQsXG4gICAgICAgIGNsYXNzTmFtZSA9IF9wcm9wcy5jbGFzc05hbWUsXG4gICAgICAgIHByZWZpeENscyA9IF9wcm9wcy5wcmVmaXhDbHMsXG4gICAgICAgIGNoaWxkcmVuID0gX3Byb3BzLmNoaWxkcmVuLFxuICAgICAgICBzdHlsZSA9IF9wcm9wcy5zdHlsZTtcblxuICAgIHZhciBpZnJhbWVTdHlsZSA9ICgwLCBfZXh0ZW5kczNbXCJkZWZhdWx0XCJdKSh7fSwgSUZSQU1FX1NUWUxFLCB7XG4gICAgICBkaXNwbGF5OiB0aGlzLnN0YXRlLnVwbG9hZGluZyB8fCBkaXNhYmxlZCA/ICdub25lJyA6ICcnXG4gICAgfSk7XG4gICAgdmFyIGNscyA9ICgwLCBfY2xhc3NuYW1lczJbXCJkZWZhdWx0XCJdKSgoX2NsYXNzTmFtZXMgPSB7fSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzLCB0cnVlKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgcHJlZml4Q2xzICsgJy1kaXNhYmxlZCcsIGRpc2FibGVkKSwgKDAsIF9kZWZpbmVQcm9wZXJ0eTNbXCJkZWZhdWx0XCJdKShfY2xhc3NOYW1lcywgY2xhc3NOYW1lLCBjbGFzc05hbWUpLCBfY2xhc3NOYW1lcykpO1xuICAgIHJldHVybiBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFxuICAgICAgVGFnLFxuICAgICAge1xuICAgICAgICBjbGFzc05hbWU6IGNscyxcbiAgICAgICAgc3R5bGU6ICgwLCBfZXh0ZW5kczNbXCJkZWZhdWx0XCJdKSh7IHBvc2l0aW9uOiAncmVsYXRpdmUnLCB6SW5kZXg6IDAgfSwgc3R5bGUpXG4gICAgICB9LFxuICAgICAgX3JlYWN0MltcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudCgnaWZyYW1lJywge1xuICAgICAgICByZWY6ICdpZnJhbWUnLFxuICAgICAgICBvbkxvYWQ6IHRoaXMub25Mb2FkLFxuICAgICAgICBzdHlsZTogaWZyYW1lU3R5bGVcbiAgICAgIH0pLFxuICAgICAgY2hpbGRyZW5cbiAgICApO1xuICB9XG59KTtcblxuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBJZnJhbWVVcGxvYWRlcjtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3JjLXVwbG9hZC9saWIvSWZyYW1lVXBsb2FkZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kczIgPSByZXF1aXJlKCdiYWJlbC1ydW50aW1lL2hlbHBlcnMvZXh0ZW5kcycpO1xuXG52YXIgX2V4dGVuZHMzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXh0ZW5kczIpO1xuXG52YXIgX3JlYWN0ID0gcmVxdWlyZSgncmVhY3QnKTtcblxudmFyIF9yZWFjdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZWFjdCk7XG5cbnZhciBfQWpheFVwbG9hZGVyID0gcmVxdWlyZSgnLi9BamF4VXBsb2FkZXInKTtcblxudmFyIF9BamF4VXBsb2FkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQWpheFVwbG9hZGVyKTtcblxudmFyIF9JZnJhbWVVcGxvYWRlciA9IHJlcXVpcmUoJy4vSWZyYW1lVXBsb2FkZXInKTtcblxudmFyIF9JZnJhbWVVcGxvYWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9JZnJhbWVVcGxvYWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG5mdW5jdGlvbiBlbXB0eSgpIHt9XG5cbnZhciBVcGxvYWQgPSBfcmVhY3QyW1wiZGVmYXVsdFwiXS5jcmVhdGVDbGFzcyh7XG4gIGRpc3BsYXlOYW1lOiAnVXBsb2FkJyxcblxuICBwcm9wVHlwZXM6IHtcbiAgICBjb21wb25lbnQ6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIHN0eWxlOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcbiAgICBwcmVmaXhDbHM6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIGFjdGlvbjogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgbmFtZTogX3JlYWN0LlByb3BUeXBlcy5zdHJpbmcsXG4gICAgbXVsdGlwYXJ0OiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgb25FcnJvcjogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIG9uU3VjY2VzczogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIG9uUHJvZ3Jlc3M6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBvblN0YXJ0OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgZGF0YTogX3JlYWN0LlByb3BUeXBlcy5vbmVPZlR5cGUoW19yZWFjdC5Qcm9wVHlwZXMub2JqZWN0LCBfcmVhY3QuUHJvcFR5cGVzLmZ1bmNdKSxcbiAgICBoZWFkZXJzOiBfcmVhY3QuUHJvcFR5cGVzLm9iamVjdCxcbiAgICBhY2NlcHQ6IF9yZWFjdC5Qcm9wVHlwZXMuc3RyaW5nLFxuICAgIG11bHRpcGxlOiBfcmVhY3QuUHJvcFR5cGVzLmJvb2wsXG4gICAgZGlzYWJsZWQ6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbCxcbiAgICBiZWZvcmVVcGxvYWQ6IF9yZWFjdC5Qcm9wVHlwZXMuZnVuYyxcbiAgICBjdXN0b21SZXF1ZXN0OiBfcmVhY3QuUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25SZWFkeTogX3JlYWN0LlByb3BUeXBlcy5mdW5jLFxuICAgIHdpdGhDcmVkZW50aWFsczogX3JlYWN0LlByb3BUeXBlcy5ib29sLFxuICAgIHN1cHBvcnRTZXJ2ZXJSZW5kZXI6IF9yZWFjdC5Qcm9wVHlwZXMuYm9vbFxuICB9LFxuXG4gIGdldERlZmF1bHRQcm9wczogZnVuY3Rpb24gZ2V0RGVmYXVsdFByb3BzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb21wb25lbnQ6ICdzcGFuJyxcbiAgICAgIHByZWZpeENsczogJ3JjLXVwbG9hZCcsXG4gICAgICBkYXRhOiB7fSxcbiAgICAgIGhlYWRlcnM6IHt9LFxuICAgICAgbmFtZTogJ2ZpbGUnLFxuICAgICAgbXVsdGlwYXJ0OiBmYWxzZSxcbiAgICAgIG9uUHJvZ3Jlc3M6IGVtcHR5LFxuICAgICAgb25SZWFkeTogZW1wdHksXG4gICAgICBvblN0YXJ0OiBlbXB0eSxcbiAgICAgIG9uRXJyb3I6IGVtcHR5LFxuICAgICAgb25TdWNjZXNzOiBlbXB0eSxcbiAgICAgIHN1cHBvcnRTZXJ2ZXJSZW5kZXI6IGZhbHNlLFxuICAgICAgbXVsdGlwbGU6IGZhbHNlLFxuICAgICAgYmVmb3JlVXBsb2FkOiBudWxsLFxuICAgICAgY3VzdG9tUmVxdWVzdDogbnVsbCxcbiAgICAgIHdpdGhDcmVkZW50aWFsczogZmFsc2VcbiAgICB9O1xuICB9LFxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQ29tcG9uZW50OiBudWxsXG4gICAgfTtcbiAgfSxcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLnByb3BzLnN1cHBvcnRTZXJ2ZXJSZW5kZXIpIHtcbiAgICAgIC8qIGVzbGludCByZWFjdC9uby1kaWQtbW91bnQtc2V0LXN0YXRlOjAgKi9cbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBDb21wb25lbnQ6IHRoaXMuZ2V0Q29tcG9uZW50KClcbiAgICAgIH0sIHRoaXMucHJvcHMub25SZWFkeSk7XG4gICAgfVxuICB9LFxuICBnZXRDb21wb25lbnQ6IGZ1bmN0aW9uIGdldENvbXBvbmVudCgpIHtcbiAgICByZXR1cm4gdHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJyA/IF9BamF4VXBsb2FkZXIyW1wiZGVmYXVsdFwiXSA6IF9JZnJhbWVVcGxvYWRlcjJbXCJkZWZhdWx0XCJdO1xuICB9LFxuICBhYm9ydDogZnVuY3Rpb24gYWJvcnQoZmlsZSkge1xuICAgIHRoaXMucmVmcy5pbm5lci5hYm9ydChmaWxlKTtcbiAgfSxcbiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuc3VwcG9ydFNlcnZlclJlbmRlcikge1xuICAgICAgdmFyIF9Db21wb25lbnQgPSB0aGlzLnN0YXRlLkNvbXBvbmVudDtcblxuICAgICAgaWYgKF9Db21wb25lbnQpIHtcbiAgICAgICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoX0NvbXBvbmVudCwgKDAsIF9leHRlbmRzM1tcImRlZmF1bHRcIl0pKHt9LCB0aGlzLnByb3BzLCB7IHJlZjogJ2lubmVyJyB9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuZ2V0Q29tcG9uZW50KCk7XG4gICAgcmV0dXJuIF9yZWFjdDJbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCAoMCwgX2V4dGVuZHMzW1wiZGVmYXVsdFwiXSkoe30sIHRoaXMucHJvcHMsIHsgcmVmOiAnaW5uZXInIH0pKTtcbiAgfVxufSk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gVXBsb2FkO1xubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmMtdXBsb2FkL2xpYi9VcGxvYWQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDdcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5cbi8vIGV4cG9ydCB0aGlzIHBhY2thZ2UncyBhcGlcbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9VcGxvYWQnKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9yYy11cGxvYWQvbGliL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTA2NVxuICoqIG1vZHVsZSBjaHVua3MgPSA3XG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB1cGxvYWQ7XG5mdW5jdGlvbiBnZXRFcnJvcihvcHRpb24sIHhocikge1xuICB2YXIgbXNnID0gJ2Nhbm5vdCBwb3N0ICcgKyBvcHRpb24uYWN0aW9uICsgJyAnICsgeGhyLnN0YXR1cyArICdcXCcnO1xuICB2YXIgZXJyID0gbmV3IEVycm9yKG1zZyk7XG4gIGVyci5zdGF0dXMgPSB4aHIuc3RhdHVzO1xuICBlcnIubWV0aG9kID0gJ3Bvc3QnO1xuICBlcnIudXJsID0gb3B0aW9uLmFjdGlvbjtcbiAgcmV0dXJuIGVycjtcbn1cblxuZnVuY3Rpb24gZ2V0Qm9keSh4aHIpIHtcbiAgdmFyIHRleHQgPSB4aHIucmVzcG9uc2VUZXh0IHx8IHhoci5yZXNwb25zZTtcbiAgaWYgKCF0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRleHQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cbn1cblxuLy8gb3B0aW9uIHtcbi8vICBvblByb2dyZXNzOiAoZXZlbnQ6IHsgcGVyY2VudDogbnVtYmVyIH0pOiB2b2lkLFxuLy8gIG9uRXJyb3I6IChldmVudDogRXJyb3IsIGJvZHk/OiBPYmplY3QpOiB2b2lkLFxuLy8gIG9uU3VjY2VzczogKGJvZHk6IE9iamVjdCk6IHZvaWQsXG4vLyAgZGF0YTogT2JqZWN0LFxuLy8gIGZpbGVuYW1lOiBTdHJpbmcsXG4vLyAgZmlsZTogRmlsZSxcbi8vICB3aXRoQ3JlZGVudGlhbHM6IEJvb2xlYW4sXG4vLyAgYWN0aW9uOiBTdHJpbmcsXG4vLyAgaGVhZGVyczogT2JqZWN0LFxuLy8gfVxuZnVuY3Rpb24gdXBsb2FkKG9wdGlvbikge1xuICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIGlmICh4aHIudXBsb2FkKSB7XG4gICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gcHJvZ3Jlc3MoZSkge1xuICAgICAgaWYgKGUudG90YWwgPiAwKSB7XG4gICAgICAgIGUucGVyY2VudCA9IGUubG9hZGVkIC8gZS50b3RhbCAqIDEwMDtcbiAgICAgIH1cbiAgICAgIG9wdGlvbi5vblByb2dyZXNzKGUpO1xuICAgIH07XG4gIH1cblxuICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblxuICBpZiAob3B0aW9uLmRhdGEpIHtcbiAgICBPYmplY3Qua2V5cyhvcHRpb24uZGF0YSkubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIG9wdGlvbi5kYXRhW2tleV0pO1xuICAgIH0pO1xuICB9XG5cbiAgZm9ybURhdGEuYXBwZW5kKG9wdGlvbi5maWxlbmFtZSwgb3B0aW9uLmZpbGUpO1xuXG4gIHhoci5vbmVycm9yID0gZnVuY3Rpb24gZXJyb3IoZSkge1xuICAgIG9wdGlvbi5vbkVycm9yKGUpO1xuICB9O1xuXG4gIHhoci5vbmxvYWQgPSBmdW5jdGlvbiBvbmxvYWQoKSB7XG4gICAgLy8gYWxsb3cgc3VjY2VzcyB3aGVuIDJ4eCBzdGF0dXNcbiAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3JlYWN0LWNvbXBvbmVudC91cGxvYWQvaXNzdWVzLzM0XG4gICAgaWYgKHhoci5zdGF0dXMgPCAyMDAgfHwgeGhyLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgIHJldHVybiBvcHRpb24ub25FcnJvcihnZXRFcnJvcihvcHRpb24sIHhociksIGdldEJvZHkoeGhyKSk7XG4gICAgfVxuXG4gICAgb3B0aW9uLm9uU3VjY2VzcyhnZXRCb2R5KHhocikpO1xuICB9O1xuXG4gIHhoci5vcGVuKCdwb3N0Jywgb3B0aW9uLmFjdGlvbiwgdHJ1ZSk7XG5cbiAgLy8gSGFzIHRvIGJlIGFmdGVyIGAub3BlbigpYC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbnlvL2Ryb3B6b25lL2lzc3Vlcy8xNzlcbiAgaWYgKG9wdGlvbi53aXRoQ3JlZGVudGlhbHMgJiYgJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKSB7XG4gICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gIH1cblxuICB2YXIgaGVhZGVycyA9IG9wdGlvbi5oZWFkZXJzIHx8IHt9O1xuXG4gIC8vIHdoZW4gc2V0IGhlYWRlcnNbJ1gtUmVxdWVzdGVkLVdpdGgnXSA9IG51bGwgLCBjYW4gY2xvc2UgZGVmYXVsdCBYSFIgaGVhZGVyXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcmVhY3QtY29tcG9uZW50L3VwbG9hZC9pc3N1ZXMvMzNcbiAgaWYgKGhlYWRlcnNbJ1gtUmVxdWVzdGVkLVdpdGgnXSAhPT0gbnVsbCkge1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XG4gIH1cblxuICBmb3IgKHZhciBoIGluIGhlYWRlcnMpIHtcbiAgICBpZiAoaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShoKSAmJiBoZWFkZXJzW2hdICE9PSBudWxsKSB7XG4gICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihoLCBoZWFkZXJzW2hdKTtcbiAgICB9XG4gIH1cbiAgeGhyLnNlbmQoZm9ybURhdGEpO1xuXG4gIHJldHVybiB7XG4gICAgYWJvcnQ6IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgeGhyLmFib3J0KCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcmMtdXBsb2FkL2xpYi9yZXF1ZXN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTA2NlxuICoqIG1vZHVsZSBjaHVua3MgPSA3XG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==